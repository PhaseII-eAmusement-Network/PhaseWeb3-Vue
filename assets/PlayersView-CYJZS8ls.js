import{a as $,b as k,a7 as I,r as A,o as R,c,d as u,w as f,e as n,_ as D,i as o,b6 as B,g as s,f as h,l as g,ba as C,bb as N,P as S,b9 as L,h as V,n as G}from"./index-BqLzkjKg.js";import{g as M,_ as j}from"./sources-BlfCMmON.js";import{_ as F}from"./GeneralTable-DtlZfxdX.js";import{a as H}from"./profile-vtpBo443.js";import{d as T}from"./userData-DZYdegtD.js";import{g as y}from"./danClass-NuRM5DAU.js";const z={class:"bg-white dark:bg-slate-900/90 rounded-2xl pt-6 p-3 card-content"},E={class:"w-full"},O={class:"md:flex md:px-5 md:space-x-10 md:justify-between md:items-center"},X={class:"md:w-1/2 grid grid-cols-1 md:grid-cols-2 gap-3"},q={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},J={class:"w-full"},ta={__name:"PlayersView",setup(K){const v=$(),_=k();var l=null,t=null;l=v.params.id,t=I(l),t==null&&_.push({name:"ErrorPage",params:{catchAll:"404"}});const m=A([]);R(async()=>{try{const e=await H(l);m.value=x(e)}catch(e){console.error("Failed to fetch profile data:",e)}});const i=[];if(i.push({text:"Player",value:"username",sortable:!0,width:120}),t.noRivals||i.push({text:"Rival ID",value:"extid",width:100}),i.push({text:"Last Play",value:"stats.last_play_timestamp",width:150},{text:"Last Arcade",value:"stats.last_play_arcade",width:150},{text:"Plays",value:"stats.total_plays",sortable:!0,width:50}),t.playerHeaders)for(var w of t.playerHeaders)i.push(w);function x(e){var r=[];for(var a of e){if(a.extid&&(a.extid=T(a.extid)),a.stats){if(a.stats.last_play_timestamp){const d=new Date(a.stats.last_play_timestamp*1e3);a.stats.last_play_timestamp=d.toLocaleString()}a.sgrade&&(a.sgrade=y(a.sgrade).short),a.dgrade&&(a.dgrade=y(a.dgrade).short)}r.push(a)}return r.sort((d,p)=>{const P=d.stats&&d.stats.total_plays||0;return(p.stats&&p.stats.total_plays||0)-P}),r}const b=e=>{const r=e.userId;_.push(`/games/${l}/profiles/${r}`)};return(e,r)=>(u(),c(G,null,{default:f(()=>[n(D,null,{default:f(()=>[o("div",{style:B(s(M)(s(t))),class:"rounded-2xl mb-6 card-container"},[o("div",z,[o("div",E,[o("div",O,[n(j,{path:s(t).icon,title:s(t).name},null,8,["path","title"])])]),o("div",X,[s(t).noScores?h("",!0):(u(),c(g,{key:0,href:`/#/games/${s(l)}/scores`,icon:s(C),outline:!1,color:"info",label:"Network Scores"},null,8,["href","icon"])),s(t).noRecords?h("",!0):(u(),c(g,{key:1,href:`/#/games/${s(l)}/records`,icon:s(N),outline:!1,color:"info",label:"Network Records"},null,8,["href","icon"]))])])],4),n(S,{icon:s(L),title:"All Players",main:""},null,8,["icon"]),n(V,{"has-table":""},{default:f(()=>[o("div",q,[o("div",J,[n(F,{headers:i,items:m.value,path:`/#/${s(l)}/profiles/`,onRowClicked:b},null,8,["items","path"])])])]),_:1})]),_:1})]),_:1}))}};export{ta as default};
