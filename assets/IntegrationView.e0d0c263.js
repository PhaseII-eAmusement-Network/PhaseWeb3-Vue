import{u as I,a as U,r as w,b as R,M as D,a6 as F,c as i,e as u,w as _,f as c,Z as L,$ as x,g as C,a7 as N,j as m,k as h,l as P,_ as V,i as f,n as d,a0 as T,V as B,t as p,F as H,p as M,q as O,a8 as q,a9 as W,aa as j}from"./index.ac0000bb.js";const z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},E={key:0,class:"text-lg"},K={key:1,class:"text-lg"},Q={class:"space-x-2"},X={__name:"IntegrationView",setup(Z){const b=I(),k=U(),y="https://discord.com/oauth2/authorize?client_id=947985989421395988&response_type=code&redirect_uri=https%3A%2F%2Fweb3.phaseii.network%2F%23%2Fprofile%2Fintegrate%2Fdiscord&scope=identify",$="https://kamai.tachi.ac/oauth/request-auth?clientID=CIce4260e1939ceed11c8e48ee857a3aef2a87ba56",g=w(b.params.service);if(g.value){const t=new URLSearchParams(window.location.search),r=t.get("code");t.delete("code"),r!==void 0&&A(g.value,r)}const l=R(),e=w(l.userData);D(()=>l.userData,t=>{e.value=t});const S=[{id:"discord",name:"Discord",icon:q,oAuth:y},{id:"tachi",name:"Kamaitachi",icon:W,oAuth:$}];async function v(t){await j(t.id)&&(l.userLoaded=!1,l.loadUser(),k.push({name:"profile_integrations"}))}async function A(t,r){if(await F(t,r)){const n=new URLSearchParams(window.location.search);n.delete("code");const o=n.toString(),s=`${window.location.pathname}${o?"?"+o:""}`;window.history.replaceState(null,"",s),l.userLoaded=!1,l.loadUser(),k.push({name:"profile_integrations"})}}return(t,r)=>(i(),u(O,null,{default:_(()=>[c(M,null,{default:_(()=>[c(L,{class:"mb-6","use-small":"","even-smaller":""}),c(x,{icon:C(N),title:"Server Integrations",main:""},null,8,["icon"]),m("div",z,[(i(),h(H,null,P(S,a=>c(V,{key:a.id},{footer:_(()=>{var n,o,s;return[m("div",Q,[!e.value[a.id]||!((n=e.value[a.id])!=null&&n.linked)?(i(),u(f,{key:0,color:"success",label:"Link Now",href:a.oAuth,target:"_blank"},null,8,["href"])):d("",!0),e.value[a.id]&&((o=e.value[a.id])==null?void 0:o.linked)?(i(),u(f,{key:1,color:"info",label:"Relink",href:a.oAuth,target:"_blank"},null,8,["href"])):d("",!0),e.value[a.id]&&((s=e.value[a.id])==null?void 0:s.linked)?(i(),u(f,{key:2,color:"danger",label:"Unlink",onClick:G=>v(a)},null,8,["onClick"])):d("",!0)])]}),default:_(()=>{var n,o,s;return[c(T,{color:"info",icon:a.icon,label:a.name,class:"mb-2"},null,8,["icon","label"]),e.value[a.id]&&((n=e.value[a.id])==null?void 0:n.linked)?(i(),h("h1",E,[B(p(a.name)+" is linked to ",1),m("b",null,p((o=e.value[a.id])==null?void 0:o.username),1)])):d("",!0),!e.value[a.id]||!((s=e.value[a.id])!=null&&s.linked)?(i(),h("h1",K,p(a.name)+" isn't linked! ",1)):d("",!0)]}),_:2},1024)),64))])]),_:1})]),_:1}))}};export{X as default};
