import{r as m,o as E,a as i,c as h,w as d,b as o,i as b,X as N,e as r,ar as L,_ as S,v as O,Y as U,ao as F,g as u,F as P,j as M,k as g,f as y,as as R,ai as j,l as G,n as J,p as D}from"./index.3d4bf4c6.js";import{_ as H}from"./ArcadeCard.76e9e314.js";import{_ as X}from"./FormField.6dc9c939.js";import{_ as Y}from"./FormCheckRadio.4f9aa2f6.js";import{g as V,s as A}from"./values.1bd6ac4a.js";import{A as q,a as z,b as K}from"./arcade.99b9675b.js";const Q={class:"grid grid-cols-1 w-full gap-2 md:gap-6 md:flex md:place-content-stretch"},T={key:0,class:"space-x-2 mt-6"},W=u("h1",{class:"text-lg md:text-xl"},"OpenVPN Configuration",-1),Z=u("p",{class:"pb-1 dark:text-white/50"}," Use this to download your VPN config. ",-1),ee={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 mb-6"},re={__name:"ArcadeView",setup(ae){const l=m(null),p=m(null),s=m(null),w=m(!0),x=D(),f=parseInt(x.params.id);var k=[{id:"paseli_enabled",name:"PASELI Services",help:"Enable PASELI for this arcade.",type:"Boolean"},{id:"paseli_infinite",name:"Infinite PASELI",help:"Enable infinite PASELI for this arcade.",type:"Boolean"},{id:"maint",name:"Maintenance Mode",help:"Place this arcade under maintenance.",type:"Boolean"},{id:"hide_network",name:"Incognito Mode",help:"Hide the network and all ranking data.",type:"Boolean"}];async function _(){try{s.value={},l.value={},p.value={};const t=await q(f);s.value=t;for(const a of k){const e=V(s.value.data,a.id);A(l.value,a.id,e),A(p.value,a.id,e)}w.value=!1}catch(t){console.error("Failed to fetch arcade data:",t)}}async function B(){(await K(f,l.value)).status!="error"&&await _()}E(()=>{_()});function I(t,a="NA_"){var e=[...t].map(c=>c.charCodeAt(0)<128?c:a).join("");return e=e.replace(/[!"#$%&'()*+,-./:;<=>?@[\\\]^_`{|}~]/g,""),e=e.replace(/\s+/g,"_"),e}async function C(){try{const t=await z(f),a=new Blob([t],{type:"application/ovpn"}),e=document.createElement("a");e.href=URL.createObjectURL(a),e.download=`gradius-${I(s.value.name)}-phaseii-config.ovpn`,document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)}catch(t){console.log("Failed to fetch arcade data:",t)}}return(t,a)=>(i(),h(J,null,{default:d(()=>[o(G,null,{default:d(()=>{var e,c;return[w.value?g("",!0):(i(),b(P,{key:0},[o(H,{class:"mb-6",arcade:s.value},null,8,["arcade"]),o(N,{icon:r(L),title:"Arcade Administration",main:""},null,8,["icon"]),o(S,{"is-form":"",class:"mb-6",onSubmit:O(B,["prevent"])},{default:d(()=>[o(U,{color:"info",label:"Settings",icon:r(F),class:"mb-2"},null,8,["icon"]),u("div",Q,[(i(!0),b(P,null,M(r(k),n=>(i(),h(X,{key:n.id,label:n.name,help:n.help},{default:d(()=>{var $;return[n.type=="Boolean"?(i(),h(Y,{key:0,name:n.id,"model-value":Boolean(($=r(V)(l.value,n.id))!=null?$:!1),"input-value":!0,type:"switch","onUpdate:modelValue":v=>r(A)(l.value,n.id,v!=null?v:!1)},null,8,["name","model-value","onUpdate:modelValue"])):g("",!0)]}),_:2},1032,["label","help"]))),128))]),JSON.stringify(l.value)!==JSON.stringify(p.value)?(i(),b("div",T,[o(y,{color:"success",label:"Save",type:"submit"}),o(y,{color:"danger",label:"Revert",onClick:a[0]||(a[0]=n=>_())})])):g("",!0)]),_:1},8,["onSubmit"]),o(S,{class:"w-full md:w-1/2 mb-6"},{default:d(()=>[W,Z,o(y,{small:!1,color:"success",class:"my-2",label:"Export",onClick:a[1]||(a[1]=n=>C())})]),_:1}),o(N,{icon:r(R),title:"Arcade Overview",main:""},null,8,["icon"]),u("div",ee,[o(j,{number:(c=(e=s.value)==null?void 0:e.machines)==null?void 0:c.length,label:"Active Machines"},null,8,["number"])])],64))]}),_:1})]),_:1}))}};export{re as default};
