import{u as A,a as I,r as w,b as R,M as D,c as i,e as u,w as _,f as c,V as F,W as L,g as x,Z as C,j as m,k as f,l as N,_ as P,i as h,n as d,X as V,U as T,t as p,F as B,p as H,q as M,$ as O,a0 as W}from"./index.af302b91.js";import{e as q,f as j}from"./account.b9298e77.js";const z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},E={key:0,class:"text-lg"},K={key:1,class:"text-lg"},Q={class:"space-x-2"},Y={__name:"IntegrationView",setup(X){const b=A(),k=I(),y="https://discord.com/oauth2/authorize?client_id=947985989421395988&response_type=code&redirect_uri=https%3A%2F%2Fweb3.phaseii.network%2F%23%2Fprofile%2Fintegrate%2Fdiscord&scope=identify",$="https://kamai.tachi.ac/oauth/request-auth?clientID=CIce4260e1939ceed11c8e48ee857a3aef2a87ba56",g=w(b.params.service);if(g.value){const t=new URLSearchParams(window.location.search),r=t.get("code");t.delete("code"),r!==void 0&&v(g.value,r)}const l=R(),a=w(l.userData);D(()=>l.userData,t=>{a.value=t});const S=[{id:"discord",name:"Discord",icon:O,oAuth:y},{id:"tachi",name:"Kamaitachi",icon:W,oAuth:$}];async function U(t){await j(t.id)&&(l.userLoaded=!1,l.loadUser(),k.push({name:"profile_integrations"}))}async function v(t,r){if(await q(t,r)){const n=new URLSearchParams(window.location.search);n.delete("code");const o=n.toString(),s=`${window.location.pathname}${o?"?"+o:""}`;window.history.replaceState(null,"",s),l.userLoaded=!1,l.loadUser(),k.push({name:"profile_integrations"})}}return(t,r)=>(i(),u(M,null,{default:_(()=>[c(H,null,{default:_(()=>[c(F,{class:"mb-6","use-small":"","even-smaller":""}),c(L,{icon:x(C),title:"Server Integrations",main:""},null,8,["icon"]),m("div",z,[(i(),f(B,null,N(S,e=>c(P,{key:e.id},{footer:_(()=>{var n,o,s;return[m("div",Q,[!a.value[e.id]||!((n=a.value[e.id])!=null&&n.linked)?(i(),u(h,{key:0,color:"success",label:"Link Now",href:e.oAuth,target:"_blank"},null,8,["href"])):d("",!0),a.value[e.id]&&((o=a.value[e.id])==null?void 0:o.linked)?(i(),u(h,{key:1,color:"info",label:"Relink",href:e.oAuth,target:"_blank"},null,8,["href"])):d("",!0),a.value[e.id]&&((s=a.value[e.id])==null?void 0:s.linked)?(i(),u(h,{key:2,color:"danger",label:"Unlink",onClick:Z=>U(e)},null,8,["onClick"])):d("",!0)])]}),default:_(()=>{var n,o,s;return[c(V,{color:"info",icon:e.icon,label:e.name,class:"mb-2"},null,8,["icon","label"]),a.value[e.id]&&((n=a.value[e.id])==null?void 0:n.linked)?(i(),f("h1",E,[T(p(e.name)+" is linked to ",1),m("b",null,p((o=a.value[e.id])==null?void 0:o.username),1)])):d("",!0),!a.value[e.id]||!((s=a.value[e.id])!=null&&s.linked)?(i(),f("h1",K,p(e.name)+" isn't linked! ",1)):d("",!0)]}),_:2},1024)),64))])]),_:1})]),_:1}))}};export{Y as default};
