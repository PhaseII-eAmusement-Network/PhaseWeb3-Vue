import{b as D,r as h,o as y,p as I,c as V,d as m,w as r,e,_ as A,i as a,h as i,Q as b,j as p,F,k as L,t as d,l as v,v as B,P as S,g as P,aN as M,n as N}from"./index-BqLzkjKg.js";import{_ as O}from"./GeneralTable-DtlZfxdX.js";import{_ as x}from"./FormField-Ch4Nz22U.js";import{_ as w}from"./FormControl-Dpk-YKzT.js";import{l as j,m as R}from"./admin-BzZpYmdl.js";const q={class:"grid md:grid-cols-2 gap-6"},E={class:"grid gap-4"},Q={class:"md:flex w-full place-content-between"},T={class:"text-lg md:text-xl"},z={class:"text-md md:text-lg"},G={class:"text-md"},H={class:"bg-slate-900 p-2 rounded-md mt-2 w-14 max-w-16 text-center"},J={class:"text-lg font-mono text-pink-700"},K={class:"flex align-middle mt-2 md:mt-0 max-h-16"},W={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},X={class:"w-full"},re={__name:"UsersView",setup(Y){const g=D(),c=h([]),o=h(null),k=[{text:"User ID",value:"id",width:20,sortable:!0},{text:"Username",value:"username",width:150,sortable:!0},{text:"Public",value:"public",width:120,sortable:!0},{text:"Admin",value:"admin",width:120,sortable:!0},{text:"Banned",value:"banned",width:120,sortable:!0},{text:"Discord Linked",value:"data.discord.linked",width:120,sortable:!0},{text:"Tachi Linked",value:"data.tachi.linked",width:120,sortable:!0}];y(async()=>{U()});async function U(){try{const t=await j();var s=[];for(var l of t)l.username||(l.username="Unclaimed Account"),s.push(l);c.value=s}catch(t){console.error("Failed to fetch user data:",t)}}const u=s=>{const l=s.id;g.push(`/profiles/${l}`)},n=I({filter:null});function C(){return n.filter?c.value.filter(s=>s.id.toString().toLowerCase().includes(n.filter.toLowerCase())||s.username.toLowerCase().includes(n.filter.toLowerCase())).slice(0,25):[]}async function $(){const s=await R(o.value);if(s)u({id:s==null?void 0:s.id});else{window.alert("Couldn't find user.");return}}return(s,l)=>(m(),V(N,null,{default:r(()=>[e(A,null,{default:r(()=>[e(i,{class:"mb-6 p-1"},{default:r(()=>l[2]||(l[2]=[a("h1",{class:"text-3xl"},"User Management",-1),a("p",{class:"text-sm text-gray-400"},"Click a row to open User",-1)])),_:1}),a("div",q,[e(i,{class:"mb-6"},{default:r(()=>[e(b,{color:"info",label:"Search",class:"mb-2"}),e(x,{label:"Search",help:"Search by ID or username.",class:"w-full"},{default:r(()=>[e(w,{modelValue:n.filter,"onUpdate:modelValue":l[0]||(l[0]=t=>n.filter=t),"model-value":n.filter},null,8,["modelValue","model-value"])]),_:1}),a("div",E,[(m(!0),p(F,null,L(C(),t=>{var f,_;return m(),p("div",{key:t.id,class:"bg-slate-800 p-4 rounded-xl"},[a("div",Q,[a("div",null,[a("h1",T,d(t.username),1),a("h2",z," User "+d(t.banned?"is":"isn't")+" banned. ",1),a("h2",G," Discord "+d((_=(f=t.data)==null?void 0:f.discord)!=null&&_.linked?"is":"isn't")+" linked. ",1),a("div",H,[a("h2",J,d(t.id),1)])]),a("div",K,[e(v,{label:"Open User",color:"info",onClick:Z=>u(t)},null,8,["onClick"])])])])}),128))])]),_:1}),e(i,{class:"mb-6","is-form":"",onSubmit:B($,["prevent"])},{default:r(()=>[e(b,{color:"warning",label:"From CardID",class:"mb-2"}),e(x,{label:"Card ID",help:"16 character ID for a user's card.",class:"w-full"},{default:r(()=>[e(w,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=t=>o.value=t),name:"Card ID",required:"","model-value":o.value,minlength:16,maxlength:16},null,8,["modelValue","model-value"])]),_:1}),e(v,{color:"success",type:"submit",label:"Open User"})]),_:1})]),e(S,{icon:P(M),title:"All Users",color:"text-blue-400",main:""},null,8,["icon"]),e(i,{"has-table":"",class:"mb-6"},{default:r(()=>[a("div",W,[a("div",X,[e(O,{headers:k,items:c.value,"has-avatar":!0,onRowClicked:u},null,8,["items"])])])]),_:1})]),_:1})]),_:1}))}};export{re as default};
