import{u as k,a as v,b as g,r as p,o as A,A as $,c as w,d as n,w as c,e as d,_ as N,T as B,f as b,g as s,h as F,i as e,j as u,t as x,F as P,k as V,l as C,H as R,m as S}from"./index-BK8JKmkz.js";import{_ as D}from"./BaseButtons-C0XVogEK.js";const i=k();async function E(a){if(i.loadedArticles[a])return i.loadedArticles[a];try{const o=await i.callApi(`/news/${a}`);return i.loadedArticles[a]=o,i.loadedArticles[a]}catch(o){throw console.log("Error fetching post:",o),o}}const H={class:"flex flex-col items-center"},M=["src"],T={class:"text-left md:text-center"},j={class:"text-2xl"},z={key:1},U={__name:"PostView",setup(a){const o=v(),h=g(),f=parseInt(o.params.id);var r=p({data:{}}),m=p("");A(async()=>{try{const t=await E(f);r.value=t.news,m.value=t.news.body.split(`
`)}catch(t){console.error("Failed to fetch news data:",t)}try{await $(f)}catch(t){console.error("Failed to set news as read:",t)}});function y(){h.push("/")}return(t,l)=>(n(),w(S,null,{default:c(()=>[d(N,null,{default:c(()=>[d(B,null,{default:c(()=>[s(r)!={}?(n(),w(F,{key:0,"has-table":""},{footer:c(()=>[d(D,null,{default:c(()=>[d(C,{label:"Home",color:"info",icon:s(R),"icon-size":"20",onClick:y},null,8,["icon"])]),_:1})]),default:c(()=>[e("div",H,[e("img",{src:s(r).data.img,class:"rounded-t-2xl md:rounded-2xl md:w-1/2 md:m-4"},null,8,M)]),s(r)?(n(),u("div",{key:s(r).id,class:"flex flex-col items-center p-4"},[e("div",T,[e("h1",j,x(s(r).title),1),l[1]||(l[1]=e("hr",{class:"pb-1 my-2"},null,-1)),(n(!0),u(P,null,V(s(m),_=>(n(),u("div",{key:_},[e("p",null,x(_),1),l[0]||(l[0]=e("br",null,null,-1))]))),128))])])):(n(),u("div",z,l[2]||(l[2]=[e("h1",{class:"text-2xl"},"News not found...",-1)])))]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1}))}};export{U as default};
