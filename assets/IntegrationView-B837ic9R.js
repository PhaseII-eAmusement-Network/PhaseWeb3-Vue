import{u as I,a as U,r as w,b as L,L as R,V as D,c as u,d as i,w as _,e as c,_ as F,i as m,M as x,N as C,g as N,W as P,j as h,F as V,k as T,X as B,Y as H,h as O,f as d,O as M,H as W,t as f,l as k,n as j,Z as q}from"./index-vA9N45XP.js";const z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},E={key:0,class:"text-lg"},K={key:1,class:"text-lg"},Q={class:"space-x-2"},G={__name:"IntegrationView",setup(X){const b=I(),p=U(),y="https://discord.com/oauth2/authorize?client_id=947985989421395988&response_type=code&redirect_uri=https%3A%2F%2Fweb3.phaseii.network%2F%23%2Fprofile%2Fintegrate%2Fdiscord&scope=identify",S="https://kamai.tachi.ac/oauth/request-auth?clientID=CIce4260e1939ceed11c8e48ee857a3aef2a87ba56",g=w(b.params.service);if(g.value){const t=new URLSearchParams(window.location.search),r=t.get("code");t.delete("code"),r!==void 0&&A(g.value,r)}const l=L(),a=w(l.userData);R(()=>l.userData,t=>{a.value=t});const $=[{id:"discord",name:"Discord",icon:B,oAuth:y},{id:"tachi",name:"Kamaitachi",icon:H,oAuth:S}];async function v(t){await q(t.id)&&(l.userLoaded=!1,l.loadUser(),p.push({name:"profile_integrations"}))}async function A(t,r){if(await D(t,r)){const n=new URLSearchParams(window.location.search);n.delete("code");const o=n.toString(),s=`${window.location.pathname}${o?"?"+o:""}`;window.history.replaceState(null,"",s),l.userLoaded=!1,l.loadUser(),p.push({name:"profile_integrations"})}}return(t,r)=>(i(),u(j,null,{default:_(()=>[c(F,null,{default:_(()=>[c(x,{class:"mb-6","use-small":"","even-smaller":""}),c(C,{icon:N(P),title:"Server Integrations",main:""},null,8,["icon"]),m("div",z,[(i(),h(V,null,T($,e=>c(O,{key:e.id},{footer:_(()=>{var n,o,s;return[m("div",Q,[!a.value[e.id]||!((n=a.value[e.id])!=null&&n.linked)?(i(),u(k,{key:0,color:"success",label:"Link Now",href:e.oAuth,target:"_blank"},null,8,["href"])):d("",!0),a.value[e.id]&&((o=a.value[e.id])!=null&&o.linked)?(i(),u(k,{key:1,color:"info",label:"Relink",href:e.oAuth,target:"_blank"},null,8,["href"])):d("",!0),a.value[e.id]&&((s=a.value[e.id])!=null&&s.linked)?(i(),u(k,{key:2,color:"danger",label:"Unlink",onClick:Y=>v(e)},null,8,["onClick"])):d("",!0)])]}),default:_(()=>{var n,o,s;return[c(M,{color:"info",icon:e.icon,label:e.name,class:"mb-2"},null,8,["icon","label"]),a.value[e.id]&&((n=a.value[e.id])!=null&&n.linked)?(i(),h("h1",E,[W(f(e.name)+" is linked to ",1),m("b",null,f((o=a.value[e.id])==null?void 0:o.username),1)])):d("",!0),!a.value[e.id]||!((s=a.value[e.id])!=null&&s.linked)?(i(),h("h1",K,f(e.name)+" isn't linked! ",1)):d("",!0)]}),_:2},1024)),64))])]),_:1})]),_:1}))}};export{G as default};
