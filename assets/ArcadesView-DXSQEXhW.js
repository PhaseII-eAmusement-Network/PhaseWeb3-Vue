import{m as y,r as w,o as D,j as B,B as L,c as S,a as u,w as o,b as t,_ as P,p as l,n as r,f,g as _,y as b,d as h,F as V,h as F,t as d,s as p,G as x,ax as E,k as M}from"./index-D9SORqzk.js";import{I as O}from"./PhMagnifyingGlass.vue-CNnu9WEr.js";import{I as j}from"./PhPlusCircle.vue-BCNoo5vq.js";import{_ as N}from"./GeneralTable-D5BfDyro.js";import{_ as v}from"./FormField-DiqkXYVL.js";import{_ as g}from"./FormControl-BerDdVCg.js";import{k as G,l as R}from"./admin-D20RHfRG.js";import"./contentExport-CicB39Ud.js";const U={class:"grid md:grid-cols-2 gap-6"},q={class:"grid gap-4"},z={class:"md:flex w-full place-content-between"},H={class:"text-lg md:text-xl"},J={class:"text-md md:text-lg"},K={class:"text-md"},Q={class:"bg-slate-900 p-2 rounded-md mt-2 w-12 max-w-14 text-center"},T={class:"text-lg font-mono text-pink-700"},W={class:"flex align-middle mt-2 md:mt-0 max-h-12"},X={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},Y={class:"w-full"},de={__name:"ArcadesView",setup(Z){const C=y(),c=w([]),A=[{text:"Name",value:"name",width:150,sortable:!0},{text:"Description",value:"description",width:150},{text:"Owners",value:"owners",width:150,sortable:!0},{text:"PASELI Enabled",value:"data.paseli_enabled",width:50,sortable:!0},{text:"Infinite PASELI",value:"data.paseli_infinite",width:50,sortable:!0},{text:"Beta Enabled",value:"data.is_beta",width:50,sortable:!0}];D(async()=>{I()});async function I(){try{const a=await G();var s=[];for(var e of a)e.timestamp&&(e.timestamp=B(e.timestamp)),e.owners&&(e.owners=e.owners.join(", ")),s.push(e);c.value=s}catch(a){console.error("Failed to fetch client data:",a)}}const m=s=>{const e=s.id;C.push(`/arcade/${e}`)},n=L({filter:null});function $(){if(n.filter)return c.value.filter(s=>s.id.toString().toLowerCase().includes(n.filter.toLowerCase())||s.name.toLowerCase().includes(n.filter.toLowerCase())||s.description.toLowerCase().includes(n.filter.toLowerCase())||s.owners.toLowerCase().includes(n.filter.toLowerCase()))}const i=w(null);async function k(){const s=await R(i.value);if(s)m({id:s?.arcadeId});else{window.alert("Couldn't find machine.");return}}return(s,e)=>(u(),S(M,null,{default:o(()=>[t(P,null,{default:o(()=>[t(r,{class:"mb-6 p-1"},{default:o(()=>e[3]||(e[3]=[l("h1",{class:"text-3xl"},"Arcade Management",-1),l("p",{class:"text-sm text-gray-400"},"Enter an arcade to manage it",-1)])),_:1,__:[3]}),t(f,{icon:_(O),title:"Search Arcades",color:"text-amber-600",main:""},null,8,["icon"]),l("div",U,[t(r,{class:"mb-6"},{default:o(()=>[t(b,{color:"info",label:"Search",class:"mb-2"}),t(v,{label:"Search",help:"Search by ID, name, description, or owner.",class:"w-full"},{default:o(()=>[t(g,{modelValue:n.filter,"onUpdate:modelValue":e[0]||(e[0]=a=>n.filter=a),"model-value":n.filter},null,8,["modelValue","model-value"])]),_:1}),l("div",q,[(u(!0),h(V,null,F($(),a=>(u(),h("div",{key:a.id,class:"bg-slate-800 p-4 rounded-xl"},[l("div",z,[l("div",null,[l("h1",H,d(a.name),1),l("h2",J,d(a.description),1),l("h2",K,"Managed by "+d(a.owners),1),l("div",Q,[l("h2",T,d(a.id),1)])]),l("div",W,[t(p,{label:"Open Arcade",color:"info",onClick:ee=>m(a)},null,8,["onClick"])])])]))),128))])]),_:1}),t(r,{class:"mb-6","is-form":"",onSubmit:x(k,["prevent"])},{default:o(()=>[t(b,{color:"warning",label:"From PCBID",class:"mb-2"}),t(v,{label:"PCBID",help:"20 character ID for a machine.",class:"w-full"},{default:o(()=>[t(g,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=a=>i.value=a),name:"PCBID",required:"","model-value":i.value,minlength:20,maxlength:20},null,8,["modelValue","model-value"])]),_:1}),t(p,{color:"success",type:"submit",label:"Open Arcade"})]),_:1})]),t(f,{icon:_(E),title:"All Arcades",color:"text-blue-400",main:""},null,8,["icon"]),t(r,{"has-table":"",class:"mb-6"},{default:o(()=>[l("div",X,[l("div",Y,[t(N,{headers:A,items:c.value,onRowClicked:m},null,8,["items"]),e[4]||(e[4]=l("h1",{class:"mx-4 mt-1 mb-2 text-md lg:text-lg"}," Click row to open arcade ",-1))])])]),_:1}),t(f,{icon:_(j),title:"Create Arcade",color:"text-emerald-600",main:""},null,8,["icon"]),t(r,{"is-form":"",class:"row-span-1",onSubmit:e[2]||(e[2]=x(a=>s.createClient(),["prevent"]))},{default:o(()=>[t(p,{color:"info",small:!1,label:"Arcade Onboarding",to:"/admin/onboarding"})]),_:1})]),_:1})]),_:1}))}};export{de as default};
