import{r as y,s as P,N as S,ar as R,a,c as t,w as f,g as d,b as u,f as k,R as U,i as x,F as j,j as N,_ as Q,u as q,ad as G,o as z,e as h,m as F,k as p,P as A,as as I,ac as K,l as M,n as O,p as D,q as H}from"./index.245a4617.js";import{b as L,U as T,_ as J}from"./ProfileCard.b5c0184d.js";import{_ as C}from"./FormField.b3adf7d6.js";import{_ as W}from"./FormCheckRadio.7997f514.js";import{_ as w}from"./FormControl.e52bf3bc.js";import"./userData.bcc92478.js";const X={class:"grid md:grid-cols-2 space-y-6 align-center"},Y={class:"place-self-center"},Z={class:"space-x-2"},ee={__name:"EmblemCardBox",props:{profile:{type:Object,default:null},version:{type:Number,default:14}},setup(E){var m,B;const i=E,_=y(i.profile),b=y(i.version),c=y(0),r=P(g((B=(m=_.value)==null?void 0:m.last)==null?void 0:B.emblem)),s=y([]);S(()=>i.version,()=>{var e;_.value=i.profile,b.value=i.version,l(),r.value=g((e=_.value.last)==null?void 0:e.emblem)}),S(r,()=>{c.value++},{deep:!0}),l();function l(){R.get(`https://web3.phaseii.network/gameassets/emblems/${b.value}.json`).then(e=>{e.data&&(s.value=e.data)}).catch(e=>{console.log(e.message)})}function g(e){return e?{background:e[0],main:e[1],ornament:e[2],effect:e[3],speech_bubble:e[4]}:{background:0,main:0,ornament:0,effect:0,speech_bubble:0}}function $(e){return e?[e.background,e.main,e.ornament,e.effect,e.speech_bubble]:[0,0,0,0,0]}return(e,n)=>(a(),t(Q,{class:"mt-6"},{footer:f(()=>[d("div",Z,[u(k,{type:"submit",color:"success",label:"Save"}),u(k,{type:"submit",color:"danger",label:"Revert"})])]),default:f(()=>[u(U,{color:"info",label:"Emblem",class:"mb-2"}),d("div",X,[d("div",null,[(a(!0),x(j,null,N(s.value,v=>(a(),t(C,{key:v.id,label:v.name,help:v.help},{default:f(()=>[u(w,{modelValue:r[v.id],"onUpdate:modelValue":V=>r[v.id]=V,options:v.options},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1032,["label","help"]))),128))]),d("div",Y,[(a(),t(L,{key:c.value,version:b.value,profile:{last:{emblem:$(r)}},size:300},null,8,["version","profile"]))])])]),_:1}))}},le={class:"grid md:grid-cols-2 space-y-6 align-center"},se={class:"place-self-center"},ae={class:"space-x-2"},re={__name:"QproCardBox",props:{profile:{type:Object,default:null},version:{type:Number,default:14}},setup(E){var g,$;const i=E,_=y(i.profile),b=y(i.version),c=y(0),r=P(($=(g=_.value)==null?void 0:g.qpro)!=null?$:{head:0,hair:0,face:0,body:0,hand:0}),s=y([]);S(()=>i.version,()=>{var m;_.value=i.profile,l(),r.value=(m=_.value)==null?void 0:m.qpro}),S(()=>i.version,()=>{b.value=i.version}),S(r,()=>{c.value++},{deep:!0}),l();function l(){R.get(`https://web3.phaseii.network/gameassets/qpro/${b.value}.json`).then(m=>{m.data&&(s.value=m.data)}).catch(m=>{console.log(m.message)})}return(m,B)=>(a(),t(Q,{class:"mt-6"},{footer:f(()=>[d("div",ae,[u(k,{type:"submit",color:"success",label:"Save"}),u(k,{type:"submit",color:"danger",label:"Revert"})])]),default:f(()=>[u(U,{color:"info",label:"QPro",class:"mb-2"}),d("div",le,[d("div",null,[(a(!0),x(j,null,N(s.value,e=>(a(),t(C,{key:e.id,label:e.name,help:e.help},{default:f(()=>[u(w,{modelValue:r[e.id],"onUpdate:modelValue":n=>r[e.id]=n,options:e.options},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1032,["label","help"]))),128))]),d("div",se,[(a(),t(T,{key:c.value,version:b.value,profile:{qpro:r},style:{scale:"1.9"},class:"my-16 mb-10"},null,8,["version","profile"]))])])]),_:1}))}},oe={class:"md:flex pb-6 md:justify-between md:items-center"},ne={key:0,class:"mt-2 md:mt-0 md:w-1/3 md:text-right"},te=d("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1),ue={class:"bg-white dark:bg-slate-900/90 rounded-2xl pt-6 p-3"},ie={class:"w-full"},ce={key:2},de={class:"space-x-2"},he={__name:"EditView",setup(E){const i=D(),_=H(),b=q();var c=null,r=null;const s=P({currentVersion:null});S(()=>s.currentVersion,()=>{e()}),c=i.params.game,r=G(c),r||_.push({name:"ErrorPage",params:{catchAll:"404"}}),r.versions||(s.currentVersion=1);const l=y(null);z(()=>{e()});var g=[{id:"name",name:"Username",help:"Set your username for this profile",type:String}];function $(){var n=null;return s.currentVersion?n=`/assets/games/${r.id}/card/${s.currentVersion}.png`:n=r.cardBG,n}function m(){return`
      background-image: url('${$()}');
      background-size: cover;
      background-repeat: no-repeat;
    `}function B(n){var v=[];for(const V of r.versions)n.includes(V.id)&&v.push(V);return v}async function e(){try{l.value=null;const n=await b.getUserProfile(c,s.currentVersion);l.value=n,n&&!s.currentVersion&&(s.currentVersion=n.versions[n.versions.length-1])}catch(n){console.error("Failed to fetch user profile data:",n)}}return(n,v)=>(a(),t(O,null,{default:f(()=>[u(M,null,{default:f(()=>{var V;return[d("div",oe,[u(k,{icon:h(F),href:`/#/games/${h(c)}`,class:"w-full md:w-auto",color:"info",label:"Go Back"},null,8,["icon","href"]),h(r).versions&&l.value?(a(),x("div",ne,[te,u(w,{modelValue:s.currentVersion,"onUpdate:modelValue":v[0]||(v[0]=o=>s.currentVersion=o),options:B(l.value.versions)},null,8,["modelValue","options"])])):p("",!0)]),s.currentVersion?(a(),t(A,{key:0,icon:h(I),title:"Profile Customizations",main:""},null,8,["icon"])):p("",!0),s.currentVersion?(a(),x("div",{key:1,style:K(m()),class:"rounded-2xl mb-6"},[d("div",ue,[d("div",ie,[l.value?(a(),t(J,{key:0,"use-small":"",game:h(c),profile:l.value,version:s.currentVersion},null,8,["game","profile","version"])):p("",!0)])])],4)):p("",!0),s.currentVersion&&l.value?(a(),x("div",ce,[u(Q,null,{footer:f(()=>[d("div",de,[u(k,{type:"submit",color:"success",label:"Save"}),u(k,{type:"submit",color:"danger",label:"Revert"})])]),default:f(()=>[d("div",null,[u(U,{color:"info",label:"General",class:"mb-2"}),(a(!0),x(j,null,N(h(g),o=>(a(),t(C,{key:o.id,label:o.name,help:o.help},{default:f(()=>[o.type==String?(a(),t(w,{key:0,"v-model":l.value[o.id],"model-value":l.value[o.id]},null,8,["v-model","model-value"])):p("",!0),o.type==Number?(a(),t(w,{key:1,"v-model":l.value[o.id],"model-value":l.value[o.id],type:"number"},null,8,["v-model","model-value"])):p("",!0),o.type==Array?(a(),t(w,{key:2,options:o.options,"v-model":l.value[o.id],"model-value":l.value[o.id],selected:l.value[o.id]},null,8,["options","v-model","model-value","selected"])):p("",!0),o.type==Boolean?(a(),t(W,{key:3,"v-model":l.value[o.id],"model-value":l.value[o.id],type:"switch"},null,8,["v-model","model-value"])):p("",!0)]),_:2},1032,["label","help"]))),128))])]),_:1}),h(c)=="jubeat"&&s.currentVersion>=10&&((V=l.value.last)==null?void 0:V.emblem)?(a(),t(ee,{key:0,profile:l.value,version:s.currentVersion},null,8,["profile","version"])):p("",!0),(h(c)=="iidx"||h(c)=="iidxclass")&&s.currentVersion>=19?(a(),t(re,{key:1,profile:l.value,version:s.currentVersion},null,8,["profile","version"])):p("",!0)])):p("",!0)]}),_:1})]),_:1}))}};export{he as default};
