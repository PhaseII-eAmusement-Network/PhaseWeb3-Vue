import{r as u,u as C,o as E,c as v,e as r,w as d,f as n,_ as L,l as b,g as h,F as k,k as m,P as $,i,aH as O,j as N,y as U,Q as F,av as M,m as R,n as g,aI as j,ap as G,q as H}from"./index-CXK2Nwmi.js";import{_ as J}from"./ArcadeCard-DodJtgU8.js";import{_ as q}from"./FormField-CRvXSUZc.js";import{_ as D}from"./FormCheckRadio-B0BQFNeR.js";import{s as y,g as P}from"./values-CmNcmtTU.js";import{A as Q,a as z,b as K}from"./arcade-sDReWpNV.js";const T={class:"grid grid-cols-1 w-full gap-2 md:gap-6 md:flex md:place-content-stretch"},W={key:0,class:"space-x-2 mt-6"},X={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 mb-6"},oe={__name:"ArcadeView",setup(Y){const o=u(null),p=u(null),s=u(null),A=u(!0),I=C(),f=parseInt(I.params.id);var w=[{id:"paseli_enabled",name:"PASELI Services",help:"Enable PASELI for this arcade.",type:"Boolean"},{id:"paseli_infinite",name:"Infinite PASELI",help:"Enable infinite PASELI for this arcade.",type:"Boolean"},{id:"maint",name:"Maintenance Mode",help:"Place this arcade under maintenance.",type:"Boolean"},{id:"hide_network",name:"Incognito Mode",help:"Hide the network and all ranking data.",type:"Boolean"}];async function _(){try{s.value={},o.value={},p.value={};const t=await Q(f);s.value=t;for(const a of w){const e=P(s.value.data,a.id);y(o.value,a.id,e),y(p.value,a.id,e)}A.value=!1}catch(t){console.error("Failed to fetch arcade data:",t)}}async function S(){(await z(f,o.value)).status!="error"&&await _()}E(()=>{_()});function V(t,a="NA_"){var e=[...t].map(c=>c.charCodeAt(0)<128?c:a).join("");return e=e.replace(/[!"#$%&'()*+,-./:;<=>?@[\\\]^_`{|}~]/g,""),e=e.replace(/\s+/g,"_"),e}async function x(){try{const t=await K(f),a=new Blob([t],{type:"application/ovpn"}),e=document.createElement("a");e.href=URL.createObjectURL(a),e.download=`gradius-${V(s.value.name)}-phaseii-config.ovpn`,document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)}catch(t){console.log("Failed to fetch arcade data:",t)}}return(t,a)=>(r(),v(H,null,{default:d(()=>[n(L,null,{default:d(()=>{var e,c;return[A.value?h("",!0):(r(),b(k,{key:0},[n(J,{class:"mb-6",arcade:s.value},null,8,["arcade"]),n($,{icon:i(O),title:"Arcade Administration",main:""},null,8,["icon"]),n(N,{"is-form":"",class:"mb-6",onSubmit:U(S,["prevent"])},{default:d(()=>[n(F,{color:"info",label:"Settings",icon:i(M),class:"mb-2"},null,8,["icon"]),m("div",T,[(r(!0),b(k,null,R(i(w),l=>(r(),v(q,{key:l.id,label:l.name,help:l.help},{default:d(()=>[l.type=="Boolean"?(r(),v(D,{key:0,name:l.id,"model-value":!!(i(P)(o.value,l.id)??!1),"input-value":!0,type:"switch","onUpdate:modelValue":B=>i(y)(o.value,l.id,B??!1)},null,8,["name","model-value","onUpdate:modelValue"])):h("",!0)]),_:2},1032,["label","help"]))),128))]),JSON.stringify(o.value)!==JSON.stringify(p.value)?(r(),b("div",W,[n(g,{color:"success",label:"Save",type:"submit"}),n(g,{color:"danger",label:"Revert",onClick:a[0]||(a[0]=l=>_())})])):h("",!0)]),_:1}),n(N,{class:"w-full md:w-1/2 mb-6"},{default:d(()=>[a[2]||(a[2]=m("h1",{class:"text-lg md:text-xl"},"OpenVPN Configuration",-1)),a[3]||(a[3]=m("p",{class:"pb-1 dark:text-white/50"}," Use this to download your VPN config. ",-1)),n(g,{small:!1,color:"success",class:"my-2",label:"Export",onClick:a[1]||(a[1]=l=>x())})]),_:1}),n($,{icon:i(j),title:"Arcade Overview",main:""},null,8,["icon"]),m("div",X,[n(G,{number:(c=(e=s.value)==null?void 0:e.machines)==null?void 0:c.length,label:"Active Machines"},null,8,["number"])])],64))]}),_:1})]),_:1}))}};export{oe as default};
