import{r as v,s as h,o as x,c as M,e as b,w as n,f as a,_ as d,j as l,$ as c,g as u,aI as g,aJ as y,x as T,i as V,p as $,q as k,as as P}from"./index.f2f2fb83.js";import{_ as D}from"./GeneralTable.1610f38e.js";import{_ as f}from"./FormField.7ec89a57.js";import{_ as C}from"./FormControl.00f220d1.js";import{d as A,e as S}from"./admin.f0e65a37.js";const W={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},B={class:"w-full"},I={__name:"MaintView",setup(E){const r=v([]),p=[{text:"Start Timestamp",value:"timestamp",width:120},{text:"End Timestamp",value:"data.endTimestamp",width:120},{text:"Reason",value:"data.reason",width:120}],_={endTimestamp:Date.now()},s=h({..._});x(async()=>{m()});async function m(){try{const o=await A();var i=[];for(var e of o){if(e.timestamp){const t=new Date(e.timestamp*1e3);e.timestamp=t.toLocaleString()}if(e.data.endTimestamp){const t=new Date(e.data.endTimestamp*1e3);e.data.endTimestamp=t.toLocaleString()}i.push(e)}r.value=i}catch(o){console.error("Failed to fetch maint data:",o)}}async function w(){if(window.confirm("Are you really?"))try{const e=await S(s);r.value=e,m()}catch(e){console.error("Failed to post maint:",e)}}return(i,e)=>{const o=P("VueDatePicker");return M(),b(k,null,{default:n(()=>[a($,null,{default:n(()=>[a(d,{class:"mb-6 p-1"},{default:n(()=>e[4]||(e[4]=[l("h1",{class:"text-3xl"},"Network Maintenance",-1)])),_:1}),a(c,{icon:u(g),title:"Recent Maintenance Periods",color:"text-blue-400",main:""},null,8,["icon"]),a(d,{"has-table":"",class:"mb-6"},{default:n(()=>[l("div",W,[l("div",B,[a(D,{headers:p,items:r.value},null,8,["items"])])])]),_:1}),a(c,{icon:u(y),title:"Create Maintenance Period",color:"text-yellow-600",main:""},null,8,["icon"]),a(d,{"is-form":"",class:"row-span-1",onSubmit:e[3]||(e[3]=T(t=>w(),["prevent"]))},{default:n(()=>[a(f,{label:"Reason",help:"Why are we going under maintenance?"},{default:n(()=>[a(C,{modelValue:s.reason,"onUpdate:modelValue":e[0]||(e[0]=t=>s.reason=t),required:""},null,8,["modelValue"])]),_:1}),a(f,{label:"Period End",help:"When the network will release the maintenance window."},{default:n(()=>[a(o,{modelValue:s.endTimestamp,"onUpdate:modelValue":[e[1]||(e[1]=t=>s.endTimestamp=t),e[2]||(e[2]=t=>s.endTimestamp=new Date(t).getTime())],dark:""},null,8,["modelValue"])]),_:1}),l("div",null,[a(V,{type:"submit",color:"warning",label:"Enter Maintenance",small:!1})])]),_:1})]),_:1})]),_:1})}}};export{I as default};
