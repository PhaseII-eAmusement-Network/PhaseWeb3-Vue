import{r as c,o as x,c as u,e as b,w as l,f as s,k as g,_ as i,j as n,$ as m,g as f,aC as k,aK as B,F as C,n as y,p as D,q as I}from"./index.e616e197.js";import{_}from"./GeneralTable.c5a562b0.js";import{A as E}from"./admin.f20efb99.js";const P={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},$={class:"w-full"},A={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},V={class:"w-full"},S={__name:"EventsView",setup(F){const d=c({}),r=c(!0);x(async()=>{try{const t=await E();d.value=t,r.value=!1}catch(t){console.log("Failed to fetch admin data:",t)}});const v=[{text:"Timestamp",value:"date",width:120},{text:"IP Address",value:"data.ip",width:120},{text:"Game",value:"data.model",width:120},{text:"PCBID",value:"data.pcbid",width:120},{text:"Name",value:"data.name",width:120},{text:"Value",value:"data.value",width:120}],h=[{text:"Timestamp",value:"date",width:120},{text:"PCBID",value:"data.pcbid",width:120},{text:"Delta",value:"data.delta",width:120},{text:"Remaining Balance",value:"data.balance",width:120},{text:"Reason",value:"data.reason",width:120}];function p(t){var e=[];for(var a of t)if(a.type=="paseli_transaction"){if(a.timestamp){const o=new Date(a.timestamp*1e3);a.date=o.toLocaleString()}e.push(a)}return e}function w(t){var e=[];for(var a of t)if(a.type=="pcbevent"){if(a.timestamp){const o=new Date(a.timestamp*1e3);a.date=o.toLocaleString()}e.push(a)}return e}return(t,e)=>(u(),b(I,null,{default:l(()=>[s(D,null,{default:l(()=>[r.value?y("",!0):(u(),g(C,{key:0},[s(i,{class:"mb-6 p-1"},{default:l(()=>e[0]||(e[0]=[n("h1",{class:"text-3xl"},"Service Logs",-1)])),_:1}),s(m,{icon:f(k),title:"Recent PCB Events",color:"text-amber-400",main:""},null,8,["icon"]),s(i,{"has-table":"",class:"mb-4"},{default:l(()=>{var a;return[n("div",P,[n("div",$,[s(_,{headers:v,items:w((a=d.value)==null?void 0:a.audit)},null,8,["items"])])])]}),_:1}),s(m,{icon:f(B),title:"Recent PASELI Transactions",color:"text-emerald-400",main:""},null,8,["icon"]),s(i,{"has-table":""},{default:l(()=>{var a;return[n("div",A,[n("div",V,[s(_,{headers:h,items:p((a=d.value)==null?void 0:a.audit)},null,8,["items"])])])]}),_:1})],64))]),_:1})]),_:1}))}};export{S as default};
