import{l as k,m as w,ab as S,r as I,B as R,o as B,v as x,c as p,a as o,w as u,e as v,g as t,_ as D,b as f,d as c,f as N,a1 as F,p as l,F as g,h as V,n as G,t as m,s as T,M as A,k as C}from"./index-D9SORqzk.js";import{_ as E}from"./FormControl-BerDdVCg.js";import{_ as L}from"./GameHeader-o1Hcf0DZ.js";import{A as M}from"./music-Ccwi-tAX.js";import{s as P,f as U}from"./scoreDataFilters-4V9cRP9S.js";import"./PhGear.vue-Cq1XWPzU.js";import"./PhHouse.vue-r_0YgvZ8.js";const j={key:0,class:"md:w-1/3 md:text-right"},W={class:"md:flex w-full md:place-content-between"},q={class:"mb-4 md:mb-0 space-y-1"},z={class:"text-lg md:text-xl"},H={class:"text-md md:text-lg"},J={class:"grid md:flex gap-2 md:justify-end md:place-content-end"},K={key:0,class:"bg-gray-900 dark:bg-gray-700 p-4 rounded-lg"},O={class:"text-md md:text-lg"},ae={__name:"NetworkRecords",setup(Q){const y=k(),b=w();var _=y.params.game;const e=S(_);var d=I([]);const n=R({currentVersion:null});e||b.push({name:"ErrorPage",params:{catchAll:"404"}}),e.versions||(n.currentVersion=1),B(async()=>{try{const s=await M(_);d.value=s,e.versions&&!n.currentVersion&&(n.currentVersion=h.value.at(-1)?.id??null)}catch(s){console.error("Failed to fetch score data:",s)}});const h=x(()=>{if(!e.versions)return[];const s=new Set(d.value.map(r=>parseInt(r.version)));return e.versions.filter(r=>s.has(r.id))}),$=x(()=>n.currentVersion?d.value.filter(s=>parseInt(s.version)===n.currentVersion):d.value);return(s,r)=>(o(),p(C,null,{default:u(()=>[t(d)?(o(),p(D,{key:0},{default:u(()=>[f(L,{game:t(e)},null,8,["game"]),f(N,{icon:t(F),title:"Top Records",main:""},{default:u(()=>[t(e).versions?(o(),c("div",j,[r[1]||(r[1]=l("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),f(E,{modelValue:n.currentVersion,"onUpdate:modelValue":r[0]||(r[0]=i=>n.currentVersion=i),options:h.value.slice().reverse()},null,8,["modelValue","options"])])):v("",!0)]),_:1},8,["icon"]),(o(!0),c(g,null,V($.value,i=>(o(),p(G,{key:i.id,class:"mb-6"},{default:u(()=>[l("div",W,[l("div",q,[l("h1",z,m(i.name),1),l("h2",H,m(i.artist),1),f(T,{label:"View Song",color:"info",to:`/games/${t(_)}/song/${i.id}`},null,8,["to"])]),l("div",J,[(o(!0),c(g,null,V(i.charts,a=>(o(),c(g,{key:a.db_id},[t(P)(a.data?.difficulty,t(e).chartTable,a.chart)?(o(),c("div",K,[l("h2",O,m(t(e).chartTable[a.chart])+" - "+m(t(U)(a.data?.difficulty,t(e).difficultyDenom)),1),A(" "+m(a.record?`${a.record?.username} - ${a.record.points?.toLocaleString()}`:"Unclaimed"),1)])):v("",!0)],64))),128))])])]),_:2},1024))),128))]),_:1})):v("",!0)]),_:1}))}};export{ae as default};
