import{r as v,p as h,o as M,aC as b,c as g,d as x,w as n,e as a,_ as y,h as d,i as l,P as c,g as u,aD as T,aE as V,v as P,l as k,n as $}from"./index-CHivKhhP.js";import{_ as D}from"./GeneralTable-Dm8yzA2j.js";import{_ as f}from"./FormField-vtioLqMT.js";import{_ as C}from"./FormControl-BLuW9GWW.js";import{d as A,e as E}from"./admin-YL_-tKB5.js";const S={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},W={class:"w-full"},j={__name:"MaintView",setup(B){const r=v([]),p=[{text:"Start Timestamp",value:"timestamp",width:120},{text:"End Timestamp",value:"data.endTimestamp",width:120},{text:"Reason",value:"data.reason",width:120}],_={endTimestamp:Date.now()},o=h({..._});M(async()=>{m()});async function m(){try{const s=await A();var i=[];for(var e of s){if(e.timestamp){const t=new Date(e.timestamp*1e3);e.timestamp=t.toLocaleString()}if(e.data.endTimestamp){const t=new Date(e.data.endTimestamp*1e3);e.data.endTimestamp=t.toLocaleString()}i.push(e)}r.value=i}catch(s){console.error("Failed to fetch maint data:",s)}}async function w(){if(window.confirm("Are you really?"))try{const e=await E(o);r.value=e,m()}catch(e){console.error("Failed to post maint:",e)}}return(i,e)=>{const s=b("VueDatePicker");return x(),g($,null,{default:n(()=>[a(y,null,{default:n(()=>[a(d,{class:"mb-6 p-1"},{default:n(()=>e[4]||(e[4]=[l("h1",{class:"text-3xl"},"Network Maintenance",-1)])),_:1}),a(c,{icon:u(T),title:"Recent Maintenance Periods",color:"text-blue-400",main:""},null,8,["icon"]),a(d,{"has-table":"",class:"mb-6"},{default:n(()=>[l("div",S,[l("div",W,[a(D,{headers:p,items:r.value},null,8,["items"])])])]),_:1}),a(c,{icon:u(V),title:"Create Maintenance Period",color:"text-yellow-600",main:""},null,8,["icon"]),a(d,{"is-form":"",class:"row-span-1",onSubmit:e[3]||(e[3]=P(t=>w(),["prevent"]))},{default:n(()=>[a(f,{label:"Reason",help:"Why are we going under maintenance?"},{default:n(()=>[a(C,{modelValue:o.reason,"onUpdate:modelValue":e[0]||(e[0]=t=>o.reason=t),required:""},null,8,["modelValue"])]),_:1}),a(f,{label:"Period End",help:"When the network will release the maintenance window."},{default:n(()=>[a(s,{modelValue:o.endTimestamp,"onUpdate:modelValue":[e[1]||(e[1]=t=>o.endTimestamp=t),e[2]||(e[2]=t=>o.endTimestamp=new Date(t).getTime())],dark:""},null,8,["modelValue"])]),_:1}),l("div",null,[a(k,{type:"submit",color:"warning",label:"Enter Maintenance",small:!1})])]),_:1})]),_:1})]),_:1})}}};export{j as default};
