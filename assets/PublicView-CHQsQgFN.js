import{u as q,r as P,o as H,ai as s,c as x,d as l,w as S,e as n,_ as L,j as f,f as k,F as g,i as T,N as _,g as v,x as Q,M as z,aj as J,k as w,ak as K,al as W,a8 as X,am as Y,h as Z,an as ee,n as ae,ao as te,a4 as re,ap as D,aq as p,ar as se}from"./index-DxCfvdTP.js";const oe={class:"grid grid-cols-2 sm:grid-cols-3 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 3xl:grid-cols-5 mb-6"},le={class:"grid grid-flow-row auto-rows-auto grid-cols-2 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-3 3xl:grid-cols-4 4xl:grid-cols-6 gap-5 mb-5"},ne={key:0},me={__name:"PublicView",setup(ce){const $=q().params.id,o=P({});async function O(){try{o.value={};var e=await te($);e.name||(e.name="Unclaimed Account"),o.value=e}catch(t){console.error("Failed to fetch user profile data:",t)}}H(async()=>{O(),console.log(o.value)});const c=s(()=>o.value.userProfiles),d=s(()=>o.value.userScoreStats),E=s(()=>{var e;return(e=c.value)==null?void 0:e.reduce((t,a)=>t+a.data.total_plays,0)}),I=s(()=>{var e;return(e=c.value)==null?void 0:e.length}),j=s(()=>{var a;const e=r=>{const i={};return r.forEach(u=>{const m=new Date(u*1e3).toISOString().split("T")[0];i[m]=(i[m]||0)+1}),i};var t=0;return(a=c.value)==null||a.forEach(r=>{var y,b;const i=(y=r.data)!=null&&y.arcade_history?(b=r.data)==null?void 0:b.arcade_history:{},u=[];Object.values(i).forEach(V=>{Object.values(V).forEach(N=>{u.push(...N)})});const m=e(u),h=Math.max(...Object.values(m));t=Math.max(t,h)}),t});function A(e){if(e){var t=[];for(const a of e){const r=re(a.game);r&&!r.skip&&t.push(a)}return t.sort(function(a,r){return r.data.last_play_timestamp-a.data.last_play_timestamp}),t}}const C=new Date().toISOString().split("T")[0],B=s(()=>{var e,t;return((t=(e=d.value)==null?void 0:e.attempts)==null?void 0:t.length)||0}),U=s(()=>{var e,t;return((t=(e=d.value)==null?void 0:e.records)==null?void 0:t.length)||0}),F=s(()=>{var e,t;return((t=(e=d.value)==null?void 0:e.attempts)==null?void 0:t.filter(a=>new Date(a.timestamp*1e3).toISOString().split("T")[0]===C).length)||0}),G=s(()=>{var e,t;return((t=(e=d.value)==null?void 0:e.records)==null?void 0:t.filter(a=>new Date(a.timestamp*1e3).toISOString().split("T")[0]===C).length)||0}),M=s(()=>{var a;const e=new Date().toISOString().split("T")[0];let t=0;return(a=c.value)==null||a.forEach(r=>{var u;const i=((u=r.data)==null?void 0:u.arcade_history)||{};Object.values(i).forEach(m=>{Object.values(m).forEach(h=>{h.forEach(y=>{new Date(y*1e3).toISOString().split("T")[0]===e&&t++})})})}),t}),R=P([{label:"Cumulative Plays",icon:D,iconColor:"text-emerald-600",suffix:"play",number:E},{label:"Games Played",icon:p,iconColor:"text-sky-300",suffix:"game",number:I},{label:"Plays Today",icon:D,iconColor:"text-sky-300",suffix:"play",number:M},{label:"Longest Play Streak",icon:se,iconColor:"text-red-500",suffix:"play",number:j},{label:"Total Records",icon:p,iconColor:"text-sky-300",suffix:"record",number:U},{label:"Total Attempts",icon:p,iconColor:"text-sky-300",suffix:"attempt",number:B},{label:"Records Today",icon:p,iconColor:"text-sky-300",suffix:"record",number:G},{label:"Attempts Today",icon:p,iconColor:"text-sky-300",suffix:"attempt",number:F}]);return(e,t)=>(l(),x(ae,null,{default:S(()=>[n(L,null,{default:S(()=>[o.value!=null?(l(),f(g,{key:0},[n(_,{icon:v(Q),title:`${o.value.name}'s Profile`,main:""},null,8,["icon","title"]),n(z,{class:"mb-6","override-profile":o.value,"use-small":""},null,8,["override-profile"]),n(_,{icon:v(J),title:"Quick Stats",main:""},null,8,["icon"]),T("div",oe,[(l(!0),f(g,null,w(R.value,a=>(l(),f(g,{key:a.label},[a.number?(l(),x(K,{key:0,icon:a.icon,number:a.number,label:a.label,suffix:`${a.suffix}${a.number==1?"":"s"}`,"icon-color":a.iconColor},null,8,["icon","number","label","suffix","icon-color"])):k("",!0)],64))),128))]),n(_,{icon:v(W),title:"Showcase",main:""},null,8,["icon"]),T("div",le,[(l(!0),f(g,null,w(A(c.value),a=>(l(),x(X,{key:a.game,game:a.game,value:a.data.total_plays,"profile-name":"",type:"plays"},null,8,["game","value"]))),128))]),n(_,{icon:v(Y),title:"Play Trends",main:""},null,8,["icon"]),n(Z,{class:"mb-6"},{default:S(()=>[c.value?(l(),f("div",ne,[n(ee,{data:e.generateChartData(c.value,d.value),class:"h-96"},null,8,["data"])])):k("",!0)]),_:1})],64)):k("",!0)]),_:1})]),_:1}))}};export{me as default};
