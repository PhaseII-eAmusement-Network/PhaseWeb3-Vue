import{$ as G,a0 as C,v as x,d,a,a1 as U,e as l,p as t,a2 as X,u as Ce,r as S,o as W,h as q,c as i,w as A,b as h,y as O,t as w,n as I,F as D,aD as te,aE as ie,aF as ae,aG as Se,ak as Pe,Q as re,aH as le,aI as ce,aJ as Me,aK as De,aL as Ze,aM as Le,aN as Te,aO as He,aP as Ie,aQ as Ne,g,l as Be,m as je,ab as Fe,B as ze,j as J,_ as Re,f as R,J as Ee,aC as Oe,s as oe,at as Ge,a5 as Je,an as v,D as qe,M,aR as Ue,k as Xe}from"./index-DuYVLgib.js";import{g as Y,_ as We,I as Ke}from"./danClass-V1KdqkF0.js";import{_ as Qe}from"./GameHeader-BIQN79uC.js";import{_ as Ye,g as ea,a as ee}from"./ProfileCard-CWGl0Fo2.js";import{_ as aa}from"./FormControl-CyyQZ7FC.js";import{_ as la}from"./UserSticker-F6dut3wY.js";import{b as ta,A as ra}from"./profile-DTcJtiBo.js";import{A as na}from"./arcade-D1re7ksU.js";import{a as oa}from"./music-Dx1QRfAF.js";import"./GeneralTable-CKxzcNOP.js";import"./contentExport-BfPkph0e.js";import"./PhGear.vue-BNnjKjmx.js";import"./PhHouse.vue-DjptopzZ.js";import"./userData-DZYdegtD.js";const sa=["width","height","fill","transform"],ua={key:0},ia=t("path",{d:"M236,208a12,12,0,0,1-12,12H32a12,12,0,0,1-12-12V48a12,12,0,0,1,24,0v85.55L88.1,95a12,12,0,0,1,15.1-.57l56.22,42.16L216.1,87A12,12,0,1,1,231.9,105l-64,56a12,12,0,0,1-15.1.57L96.58,119.44,44,165.45V196H224A12,12,0,0,1,236,208Z"},null,-1),ca=[ia],da={key:1},ma=t("path",{d:"M224,64V208H32V48H208A16,16,0,0,1,224,64Z",opacity:"0.2"},null,-1),va=t("path",{d:"M232,208a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V48a8,8,0,0,1,16,0v94.37L90.73,98a8,8,0,0,1,10.07-.38l58.81,44.11L218.73,90a8,8,0,1,1,10.54,12l-64,56a8,8,0,0,1-10.07.38L96.39,114.29,40,163.63V200H224A8,8,0,0,1,232,208Z"},null,-1),pa=[ma,va],fa={key:2},ba=t("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM200,176a8,8,0,0,1,0,16H56a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v62.92l34.88-29.07a8,8,0,0,1,9.56-.51l43,28.69,43.41-36.18a8,8,0,0,1,10.24,12.3l-48,40a8,8,0,0,1-9.56.51l-43-28.69L64,155.75V176Z"},null,-1),ya=[ba],_a={key:3},ga=t("path",{d:"M230,208a6,6,0,0,1-6,6H32a6,6,0,0,1-6-6V48a6,6,0,0,1,12,0v98.78l54.05-47.3a6,6,0,0,1,7.55-.28l60.11,45.08,60.34-52.8a6,6,0,0,1,7.9,9l-64,56a6,6,0,0,1-7.55.28L96.29,111.72,38,162.72V202H224A6,6,0,0,1,230,208Z"},null,-1),ha=[ga],ka={key:4},$a=t("path",{d:"M232,208a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V48a8,8,0,0,1,16,0v94.37L90.73,98a8,8,0,0,1,10.07-.38l58.81,44.11L218.73,90a8,8,0,1,1,10.54,12l-64,56a8,8,0,0,1-10.07.38L96.39,114.29,40,163.63V200H224A8,8,0,0,1,232,208Z"},null,-1),Aa=[$a],wa={key:5},xa=t("path",{d:"M228,208a4,4,0,0,1-4,4H32a4,4,0,0,1-4-4V48a4,4,0,0,1,8,0V151.19L93.37,101a4,4,0,0,1,5-.19l61.41,46.05L221.37,93a4,4,0,0,1,5.26,6l-64,56a4,4,0,0,1-5,.19l-61.41-46L36,161.81V204H224A4,4,0,0,1,228,208Z"},null,-1),Va=[xa],Ca={name:"PhChartLine"},Sa=G({...Ca,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(c){const r=c,y=C("weight","regular"),$=C("size","1em"),_=C("color","currentColor"),s=C("mirrored",!1),o=x(()=>r.weight??y),b=x(()=>r.size??$),m=x(()=>r.color??_),e=x(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:s?"scale(-1, 1)":void 0);return(k,p)=>(a(),d("svg",X({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:b.value,height:b.value,fill:m.value,transform:e.value},k.$attrs),[U(k.$slots,"default"),o.value==="bold"?(a(),d("g",ua,ca)):o.value==="duotone"?(a(),d("g",da,pa)):o.value==="fill"?(a(),d("g",fa,ya)):o.value==="light"?(a(),d("g",_a,ha)):o.value==="regular"?(a(),d("g",ka,Aa)):o.value==="thin"?(a(),d("g",wa,Va)):l("",!0)],16,sa))}}),Pa=["width","height","fill","transform"],Ma={key:0},Da=t("path",{d:"M93.82,116.64A12,12,0,0,0,100,106.15V40.74A12,12,0,0,0,83,29.83,108.26,108.26,0,0,0,20,128c0,3.37.16,6.76.47,10.1a12,12,0,0,0,17.76,9.38ZM76,62.06v37L44.81,116.36A84.39,84.39,0,0,1,76,62.06ZM128,20a12,12,0,0,0-12,12v89.53L39.18,166.27a12,12,0,0,0-4.3,16.46A108,108,0,1,0,128,20Zm0,192a84.47,84.47,0,0,1-65.57-31.5L134,138.79a12,12,0,0,0,6-10.37V44.85A84,84,0,0,1,128,212Z"},null,-1),Za=[Da],La={key:1},Ta=t("path",{d:"M96,37.5v72l-62.4,36A96,96,0,0,1,96,37.5Z",opacity:"0.2"},null,-1),Ha=t("path",{d:"M100,116.43a8,8,0,0,0,4-6.93v-72A8,8,0,0,0,93.34,30,104.06,104.06,0,0,0,25.73,147a8,8,0,0,0,4.52,5.81,7.86,7.86,0,0,0,3.35.74,8,8,0,0,0,4-1.07ZM88,49.62v55.26L40.12,132.51C40,131,40,129.48,40,128A88.12,88.12,0,0,1,88,49.62ZM128,24a8,8,0,0,0-8,8v91.82L41.19,169.73a8,8,0,0,0-2.87,11A104,104,0,1,0,128,24Zm0,192a88.47,88.47,0,0,1-71.49-36.68l75.52-44a8,8,0,0,0,4-6.92V40.36A88,88,0,0,1,128,216Z"},null,-1),Ia=[Ta,Ha],Na={key:2},Ba=t("path",{d:"M100,116.43a8,8,0,0,0,4-6.93v-72A8,8,0,0,0,93.34,30,104.06,104.06,0,0,0,25.73,147a8,8,0,0,0,4.52,5.81,7.86,7.86,0,0,0,3.35.74,8,8,0,0,0,4-1.07ZM88,49.62v55.26L40.12,132.51C40,131,40,129.48,40,128A88.12,88.12,0,0,1,88,49.62ZM232,128A104,104,0,0,1,38.32,180.7a8,8,0,0,1,2.87-11L120,123.83V32a8,8,0,0,1,8-8,104.05,104.05,0,0,1,89.74,51.48c.11.16.21.32.31.49s.2.37.29.55A103.34,103.34,0,0,1,232,128Z"},null,-1),ja=[Ba],Fa={key:3},za=t("path",{d:"M102,109.5v-72a6,6,0,0,0-8-5.66A102,102,0,0,0,27.7,146.59a6,6,0,0,0,8.9,4.11l62.4-36A6,6,0,0,0,102,109.5ZM90,106l-51.66,29.8Q38,131.91,38,128A90.1,90.1,0,0,1,90,46.42Zm38-80a6,6,0,0,0-6,6v93L42.2,171.46a6,6,0,0,0-2.15,8.22A102,102,0,1,0,128,26Zm0,192a90.48,90.48,0,0,1-74.38-39.31L131,133.61a6,6,0,0,0,3-5.19V38.2A90,90,0,0,1,128,218Z"},null,-1),Ra=[za],Ea={key:4},Oa=t("path",{d:"M100,116.43a8,8,0,0,0,4-6.93v-72A8,8,0,0,0,93.34,30,104.06,104.06,0,0,0,25.73,147a8,8,0,0,0,4.52,5.81,7.86,7.86,0,0,0,3.35.74,8,8,0,0,0,4-1.07ZM88,49.62v55.26L40.12,132.51C40,131,40,129.48,40,128A88.12,88.12,0,0,1,88,49.62ZM128,24a8,8,0,0,0-8,8v91.82L41.19,169.73a8,8,0,0,0-2.87,11A104,104,0,1,0,128,24Zm0,192a88.47,88.47,0,0,1-71.49-36.68l75.52-44a8,8,0,0,0,4-6.92V40.36A88,88,0,0,1,128,216Z"},null,-1),Ga=[Oa],Ja={key:5},qa=t("path",{d:"M100,109.5v-72a4,4,0,0,0-5.33-3.77,100,100,0,0,0-65,112.5A4,4,0,0,0,35.6,149L98,113A4,4,0,0,0,100,109.5Zm-8-2.31L36.67,139.11A92,92,0,0,1,92,43.34ZM128,28a4,4,0,0,0-4,4v94.12L43.2,173.18a4,4,0,0,0-1.43,5.49A100,100,0,1,0,128,28Zm0,192a92.47,92.47,0,0,1-77.22-42L130,131.88a4,4,0,0,0,2-3.46V36.09A92,92,0,0,1,128,220Z"},null,-1),Ua=[qa],Xa={name:"PhChartPieSlice"},Wa=G({...Xa,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(c){const r=c,y=C("weight","regular"),$=C("size","1em"),_=C("color","currentColor"),s=C("mirrored",!1),o=x(()=>r.weight??y),b=x(()=>r.size??$),m=x(()=>r.color??_),e=x(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:s?"scale(-1, 1)":void 0);return(k,p)=>(a(),d("svg",X({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:b.value,height:b.value,fill:m.value,transform:e.value},k.$attrs),[U(k.$slots,"default"),o.value==="bold"?(a(),d("g",Ma,Za)):o.value==="duotone"?(a(),d("g",La,Ia)):o.value==="fill"?(a(),d("g",Na,ja)):o.value==="light"?(a(),d("g",Fa,Ra)):o.value==="regular"?(a(),d("g",Ea,Ga)):o.value==="thin"?(a(),d("g",Ja,Ua)):l("",!0)],16,Pa))}}),Ka=["width","height","fill","transform"],Qa={key:0},Ya=t("path",{d:"M168,28H88A60.07,60.07,0,0,0,28,88v80a60.07,60.07,0,0,0,60,60h48a11.9,11.9,0,0,0,3.79-.62c27.63-9.21,78.38-60,87.59-87.59A11.9,11.9,0,0,0,228,136V88A60.07,60.07,0,0,0,168,28ZM52,168V88A36,36,0,0,1,88,52h80a36,36,0,0,1,36,36v36H184a60.07,60.07,0,0,0-60,60v20H88A36,36,0,0,1,52,168Zm96,27.63V184a36,36,0,0,1,36-36h11.63C184,164.11,164.11,184,148,195.63Z"},null,-1),el=[Ya],al={key:1},ll=t("path",{d:"M216,136c-8,24-56,72-80,80V184a48,48,0,0,1,48-48Z",opacity:"0.2"},null,-1),tl=t("path",{d:"M168,32H88A56.06,56.06,0,0,0,32,88v80a56.06,56.06,0,0,0,56,56h48a8.07,8.07,0,0,0,2.53-.41c26.23-8.75,76.31-58.83,85.06-85.06A8.07,8.07,0,0,0,224,136V88A56.06,56.06,0,0,0,168,32ZM48,168V88A40,40,0,0,1,88,48h80a40,40,0,0,1,40,40v40H184a56.06,56.06,0,0,0-56,56v24H88A40,40,0,0,1,48,168Zm96,35.14V184a40,40,0,0,1,40-40h19.14C191,163.5,163.5,191,144,203.14Z"},null,-1),rl=[ll,tl],nl={key:2},ol=t("path",{d:"M168,32H88A56.06,56.06,0,0,0,32,88v80a56.06,56.06,0,0,0,56,56h48a8.07,8.07,0,0,0,2.53-.41c26.23-8.75,76.31-58.83,85.06-85.06A8.07,8.07,0,0,0,224,136V88A56.06,56.06,0,0,0,168,32ZM136,207.42V176a40,40,0,0,1,40-40h31.42C198.16,157.55,157.55,198.16,136,207.42Z"},null,-1),sl=[ol],ul={key:3},il=t("path",{d:"M168,34H88A54.06,54.06,0,0,0,34,88v80a54.06,54.06,0,0,0,54,54h48a5.86,5.86,0,0,0,1.9-.31c25.84-8.61,75.18-57.95,83.79-83.79A5.86,5.86,0,0,0,222,136V88A54.06,54.06,0,0,0,168,34ZM46,168V88A42,42,0,0,1,88,46h80a42,42,0,0,1,42,42v42H184a54.06,54.06,0,0,0-54,54v26H88A42,42,0,0,1,46,168Zm96,38.67V184a42,42,0,0,1,42-42h22.67C194.84,163.1,163.1,194.84,142,206.67Z"},null,-1),cl=[il],dl={key:4},ml=t("path",{d:"M168,32H88A56.06,56.06,0,0,0,32,88v80a56.06,56.06,0,0,0,56,56h48a8.07,8.07,0,0,0,2.53-.41c26.23-8.75,76.31-58.83,85.06-85.06A8.07,8.07,0,0,0,224,136V88A56.06,56.06,0,0,0,168,32ZM48,168V88A40,40,0,0,1,88,48h80a40,40,0,0,1,40,40v40H184a56.06,56.06,0,0,0-56,56v24H88A40,40,0,0,1,48,168Zm96,35.14V184a40,40,0,0,1,40-40h19.14C191,163.5,163.5,191,144,203.14Z"},null,-1),vl=[ml],pl={key:5},fl=t("path",{d:"M168,36H88A52.06,52.06,0,0,0,36,88v80a52.06,52.06,0,0,0,52,52h48a3.83,3.83,0,0,0,1.26-.21c25.46-8.48,74.05-57.07,82.53-82.53A3.83,3.83,0,0,0,220,136V88A52.06,52.06,0,0,0,168,36ZM44,168V88A44.05,44.05,0,0,1,88,44h80a44.05,44.05,0,0,1,44,44v44H184a52.06,52.06,0,0,0-52,52v28H88A44.05,44.05,0,0,1,44,168Zm96,42V184a44.05,44.05,0,0,1,44-44h26C198.9,162.23,162.23,198.9,140,210Z"},null,-1),bl=[fl],yl={name:"PhSticker"},_l=G({...yl,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(c){const r=c,y=C("weight","regular"),$=C("size","1em"),_=C("color","currentColor"),s=C("mirrored",!1),o=x(()=>r.weight??y),b=x(()=>r.size??$),m=x(()=>r.color??_),e=x(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:s?"scale(-1, 1)":void 0);return(k,p)=>(a(),d("svg",X({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:b.value,height:b.value,fill:m.value,transform:e.value},k.$attrs),[U(k.$slots,"default"),o.value==="bold"?(a(),d("g",Qa,el)):o.value==="duotone"?(a(),d("g",al,rl)):o.value==="fill"?(a(),d("g",nl,sl)):o.value==="light"?(a(),d("g",ul,cl)):o.value==="regular"?(a(),d("g",dl,vl)):o.value==="thin"?(a(),d("g",pl,bl)):l("",!0)],16,Ka))}}),gl=["width","height","fill","transform"],hl={key:0},kl=t("path",{d:"M229.26,90.4a108,108,0,0,1-177.63,114A108,108,0,0,1,195.41,43.63l20.1-20.11a12,12,0,0,1,17,17l-96,96a12,12,0,1,1-17-17l24-24a36,36,0,1,0,19.76,39.65,12,12,0,0,1,23.53,4.74,60,60,0,1,1-25.73-62L178.3,60.74a84,84,0,1,0,28.46,38,12,12,0,1,1,22.5-8.35Z"},null,-1),$l=[kl],Al={key:1},wl=t("path",{d:"M176,128a48,48,0,1,1-48-48A48,48,0,0,1,176,128Z",opacity:"0.2"},null,-1),xl=t("path",{d:"M221.87,83.16A104.1,104.1,0,1,1,195.67,49l22.67-22.68a8,8,0,0,1,11.32,11.32l-96,96a8,8,0,0,1-11.32-11.32l27.72-27.72a40,40,0,1,0,17.87,31.09,8,8,0,1,1,16-.9,56,56,0,1,1-22.38-41.65L184.3,60.39a87.88,87.88,0,1,0,23.13,29.67,8,8,0,0,1,14.44-6.9Z"},null,-1),Vl=[wl,xl],Cl={key:2},Sl=t("path",{d:"M221.87,83.16A104.1,104.1,0,1,1,195.67,49l22.67-22.68a8,8,0,0,1,11.32,11.32L167.6,99.71h0l-37.71,37.71-23.95,23.95a40,40,0,0,0,62-35.67,8,8,0,1,1,16-.9,56,56,0,0,1-95.5,42.79h0a56,56,0,0,1,73.13-84.43L184.3,60.39a87.88,87.88,0,1,0,23.13,29.67,8,8,0,0,1,14.44-6.9Z"},null,-1),Pl=[Sl],Ml={key:3},Dl=t("path",{d:"M220.06,84a102.06,102.06,0,1,1-24.31-32.27l24-24a6,6,0,0,1,8.48,8.49l-96,96a6,6,0,1,1-8.48-8.49l29.39-29.4a42,42,0,1,0,16.78,31.24,6,6,0,1,1,12-.68A54,54,0,1,1,161.7,85.83l25.54-25.55a89.91,89.91,0,1,0,22,28.93A6,6,0,1,1,220.06,84Z"},null,-1),Zl=[Dl],Ll={key:4},Tl=t("path",{d:"M221.87,83.16A104.1,104.1,0,1,1,195.67,49l22.67-22.68a8,8,0,0,1,11.32,11.32l-96,96a8,8,0,0,1-11.32-11.32l27.72-27.72a40,40,0,1,0,17.87,31.09,8,8,0,1,1,16-.9,56,56,0,1,1-22.38-41.65L184.3,60.39a87.88,87.88,0,1,0,23.13,29.67,8,8,0,0,1,14.44-6.9Z"},null,-1),Hl=[Tl],Il={key:5},Nl=t("path",{d:"M218.26,84.89a100.16,100.16,0,1,1-22.44-30.37l25.35-25.35a4,4,0,1,1,5.66,5.66l-96,96a4,4,0,0,1-5.66-5.66l31-31a44,44,0,1,0,15.78,31.3,4,4,0,0,1,8-.46,52,52,0,1,1-18.1-36.51l28.34-28.33A92,92,0,0,0,63,193.05,92,92,0,0,0,211,88.33a4,4,0,1,1,7.22-3.44Z"},null,-1),Bl=[Nl],jl={name:"PhTarget"},Fl=G({...jl,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(c){const r=c,y=C("weight","regular"),$=C("size","1em"),_=C("color","currentColor"),s=C("mirrored",!1),o=x(()=>r.weight??y),b=x(()=>r.size??$),m=x(()=>r.color??_),e=x(()=>r.mirrored!==void 0?r.mirrored?"scale(-1, 1)":void 0:s?"scale(-1, 1)":void 0);return(k,p)=>(a(),d("svg",X({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:b.value,height:b.value,fill:m.value,transform:e.value},k.$attrs),[U(k.$slots,"default"),o.value==="bold"?(a(),d("g",hl,$l)):o.value==="duotone"?(a(),d("g",Al,Vl)):o.value==="fill"?(a(),d("g",Cl,Pl)):o.value==="light"?(a(),d("g",Ml,Zl)):o.value==="regular"?(a(),d("g",Ll,Hl)):o.value==="thin"?(a(),d("g",Il,Bl)):l("",!0)],16,gl))}}),zl={class:"flex space-x-2 mb-2"},Rl={class:"flex justify-between items-center"},El={class:"grid"},Ol={class:"text-lg font-bold"},Gl={class:"text-md"},Jl={class:"text-lg"},ql={class:"text-lg"},se={__name:"JubilityTable",props:{jubilityData:{type:Array,required:!0},version:{type:Number,required:!0}},setup(c){const r=Ce(),y=S(null),$=c,_={0:{label:"Basic",color:"info"},1:{label:"Advanced",color:"warning"},2:{label:"Extreme",color:"danger"}};return W(async()=>{try{y.value=null;const s=$.jubilityData.map(m=>m.song_id),o=await r.getMusicData("jubeat",$.version,s),b=$.jubilityData.map(m=>{const e=o.find(k=>k.id===m.song_id&&k.chart===m.chart);return{...m,...e?{songData:e}:{}}});b.sort((m,e)=>e.rate-m.rate),y.value=b}catch(s){console.error("Failed to fetch music data:",s)}}),(s,o)=>y.value?(a(!0),d(D,{key:0},q(y.value,b=>(a(),i(I,{key:b.id,"color-prop":"bg-slate-800 dark:bg-slate-800",class:"my-3 p-5","has-table":""},{default:A(()=>[t("div",zl,[h(O,{label:_[b.chart].label,color:_[b.chart].color},null,8,["label","color"]),b.hard?(a(),i(O,{key:0,label:"Hard Mode",color:"danger"})):l("",!0)]),t("div",Rl,[t("div",El,[t("h1",Ol,w(b.songData.name),1),t("h2",Gl,w(b.songData.artist),1)]),t("div",null,[t("h2",Jl,"Jubility: "+w(b.value/10),1),t("h2",ql,"Rate: "+w(b.rate/10),1)])])]),_:2},1024))),128)):l("",!0)}},de={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},Ul={ariaLabel:{type:String},ariaDescribedby:{type:String}},Xl={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...de,...Ul},Wl=Se[0]==="2"?(c,r)=>Object.assign(c,{attrs:r}):(c,r)=>Object.assign(c,r);function E(c){return ce(c)?le(c):c}function Kl(c){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c;return ce(r)?new Proxy(c,{}):c}function Ql(c,r){const y=c.options;y&&r&&Object.assign(y,r)}function me(c,r){c.labels=r}function ve(c,r,y){const $=[];c.datasets=r.map(_=>{const s=c.datasets.find(o=>o[y]===_[y]);return!s||!_.data||$.includes(s)?{..._}:($.push(s),Object.assign(s,_),s)})}function Yl(c,r){const y={labels:[],datasets:[]};return me(y,c.labels),ve(y,c.datasets,r),y}const et=G({props:Xl,setup(c,r){let{expose:y,slots:$}=r;const _=S(null),s=ie(null);y({chart:s});const o=()=>{if(!_.value)return;const{type:e,data:k,options:p,plugins:V,datasetIdKey:T}=c,Z=Yl(k,T),P=Kl(Z,k);s.value=new te(_.value,{type:e,data:P,options:{...p},plugins:V})},b=()=>{const e=le(s.value);e&&(c.destroyDelay>0?setTimeout(()=>{e.destroy(),s.value=null},c.destroyDelay):(e.destroy(),s.value=null))},m=e=>{e.update(c.updateMode)};return W(o),Pe(b),re([()=>c.options,()=>c.data],(e,k)=>{let[p,V]=e,[T,Z]=k;const P=le(s.value);if(!P)return;let H=!1;if(p){const L=E(p),N=E(T);L&&L!==N&&(Ql(P,L),H=!0)}if(V){const L=E(V.labels),N=E(Z.labels),B=E(V.datasets),K=E(Z.datasets);L!==N&&(me(P.config.data,L),H=!0),B&&B!==K&&(ve(P.config.data,B,c.datasetIdKey),H=!0)}H&&De(()=>{m(P)})},{deep:!0}),()=>ae("canvas",{role:"img",ariaLabel:c.ariaLabel,ariaDescribedby:c.ariaDescribedby,ref:_},[ae("p",{},[$.default?$.default():""])])}});function at(c,r){return te.register(r),G({props:de,setup(y,$){let{expose:_}=$;const s=ie(null),o=b=>{s.value=b?.chart};return _({chart:s}),()=>ae(et,Wl({ref:o},{type:c,...y}))}})}const ue=at("radar",Me),lt={class:"grid lg:grid-cols-2 gap-4"},tt={class:"w-full grid place-content-center text-center"},rt={class:"text-lg"},nt={class:"w-full grid place-content-center text-center"},ot={class:"text-lg"},st={__name:"UserNotesRadar",props:{profile:{type:String,default:null},game:{type:String,default:null},version:{type:Number,default:9}},setup(c){te.register(Ze,Le,Te,He,Ie,Ne);const r=c,y=S(r.profile),$=S(r.version),_=S(!0),s=S(0),o=S({labels:["Notes","Peak","Scratch","Sof-Lan","Charge","Chord"],datasets:[{label:"SP",backgroundColor:"rgba(22, 95, 250, 0.2)",borderColor:"rgba(22, 95, 250, 1)",pointBackgroundColor:"rgba(22, 95, 250, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(22, 95, 250, 1)",data:[]},{label:"DP",backgroundColor:"rgba(250, 170, 22, 0.2)",borderColor:"rgba(250, 170, 22, 1)",pointBackgroundColor:"rgba(250, 170, 22, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(250, 170, 22, 1)",data:[]}]});re(()=>r.version,()=>{y.value=r.profile,$.value=r.version,b()});async function b(){try{const p=await ta(r.game,r.version,y.value,[["notes_radar",0],["notes_radar",1]]),V=T=>{const[Z,P,H,L,N,B]=T;return[Z/100,P/100,H/100,L/100,N/100,B/100]};p[0]?.achievementId===0&&(o.value.datasets[0].data=V(p[0].data.radar_score)),p[1]?.achievementId===1&&(o.value.datasets[1].data=V(p[1].data.radar_score)),_.value=!1,s.value+=1}catch(p){console.error("Failed to fetch arcade data:",p)}}W(async()=>{b()});const m={responsive:!1,maintainAspectRatio:!0,scales:{r:{ticks:{stepSize:30,callback:function(p){return p}},pointLabels:{font:{size:15}}}}},e=x(()=>o.value.datasets[0].data.reduce((p,V)=>p+V,0).toFixed(2)),k=x(()=>o.value.datasets[1].data.reduce((p,V)=>p+V,0).toFixed(2));return(p,V)=>o.value.datasets[0]?(a(),i(I,{key:0,class:"my-6"},{default:A(()=>[t("div",lt,[h(I,{"color-prop":"bg-slate-800 dark:bg-slate-800"},{default:A(()=>[h(O,{color:"info",label:"SP Radar",class:"mb-2"}),t("div",tt,[(a(),i(g(ue),{key:s.value,class:"bg-slate-100 p-2 rounded-lg",data:{labels:o.value.labels,datasets:[o.value.datasets[0]]},options:m},null,8,["data"])),t("span",rt,"Total score: "+w(e.value),1)])]),_:1}),h(I,{"color-prop":"bg-slate-800 dark:bg-slate-800"},{default:A(()=>[h(O,{color:"info",label:"DP Radar",class:"mb-2"}),t("div",nt,[(a(),i(g(ue),{key:s.value,class:"bg-slate-100 p-2 rounded-lg",data:{labels:o.value.labels,datasets:[o.value.datasets[1]]},options:m},null,8,["data"])),t("span",ot,"Total score: "+w(k.value),1)])]),_:1})])]),_:1})):l("",!0)}},ut={key:0,class:"mt-2 md:mt-0 md:w-1/3 md:text-right"},it=["src"],ct={class:"bg-white dark:bg-slate-900/90 rounded-2xl pt-6 p-3 card-content"},dt={class:"w-full"},mt={key:0,class:"md:w-1/3 grid grid-cols-1 md:grid-cols-2 gap-3 mt-4"},vt={class:"my-6 grid grid-cols-1 md:grid-cols-4 gap-6"},pt={class:"my-6 grid grid-cols-2 md:grid-cols-5 xl:grid-cols-6 gap-6"},ft={key:2,class:"mb-6"},bt={class:"my-6 grid grid-cols-1 md:grid-cols-2 gap-6"},yt={class:"my-6"},_t={class:"my-6"},gt={class:"border-s border-neutral-300 md:flex md:justify-start md:gap-10 md:border-s-0 md:border-t md:overflow-x-auto overflow-y-visible md:whitespace-nowrap scrollbar"},ht={class:"flex-start flex items-center pt-2 md:block md:pt-4"},kt={class:"mt-2 text-sm font-light"},$t={class:"ms-4 pb-6 md:ms-0"},At={class:"text-lg font-semibold"},Bt={__name:"PlayerView",setup(c){const r="https://cdn.phaseii.network/file/PhaseII/web-assets",y=Be(),$=je();var _=null,s=null,o=null,b=!0;_=y.params.game,o=y.params.userId,s=Fe(_),s||$.push({name:"ErrorPage",params:{catchAll:"404"}});const m=ze({currentVersion:null});re(()=>m.currentVersion,()=>{b?b=!1:P()});const e=S(null),k=S(null),p=S(null),V=S(null),T=S([]),Z=S(null);W(async()=>{P()}),s.versions||(m.currentVersion=1);async function P(){try{e.value=null;var u=await ra(_,m.currentVersion,o);const n=await ge(u.stats),f=ye(u.profile,u.stats);e.value=f[0],k.value=u.versions,p.value=f[1],p.value.timeline=n,u&&!m.currentVersion&&(m.currentVersion=u.versions[u.versions.length-1]),u.hitChart?.length&&(T.value=$e(u.hitChart),await he(),V.value=Ae(u.hitChart))}catch(n){console.error("Failed to fetch user profile data:",n)}}async function H(u){try{return await na(u)}catch(n){console.error("Failed to fetch arcade data:",n)}}var L=[{label:"Register Date",type:String,span:"md:col-span-2",key:"first_play_timestamp"},{label:"Last Play",type:String,span:"md:col-span-2",key:"last_play_timestamp"},{label:"First Arcade",type:String,span:"md:col-span-2",key:"first_play_arcade"},{label:"Last Arcade",type:String,span:"md:col-span-2",key:"last_play_arcade"},{label:"Total Plays",type:Number,key:"total_plays"},{label:"EXP",type:Number,key:"exp"},{label:"SP Plays",type:Number,key:"single_plays"},{label:"DP Plays",type:Number,key:"double_plays"},{label:"SP DJPOINT",type:Number,key:"single_dj_points"},{label:"DP DJPOINT",type:Number,key:"double_dj_points"}];function N(){return m.currentVersion?`${r}/games/${s.id}/card/${m.currentVersion}.webp`:s.cardBG}function B(){return m.currentVersion&&s.videoTable?.includes(m.currentVersion)?`https://cdn.phaseii.network/file/PhaseII/game-assets/video/${s.id}/${m.currentVersion}.mp4`:null}function K(){return s.videoTable?.includes(m.currentVersion)?null:`
      background-image: url('${N()}');
      background-size: cover;
      background-repeat: no-repeat;
    `}function pe(u,n){return""}function fe(u){var n=[];for(const f of s.versions)u.includes(f.id)&&n.push(f);return n}function be(u,n){return u.isSkill?n[u.key]/100:u.isJubility?n[u.key]/10:n[u.key]}function ye(u,n){return n&&(n.first_play_timestamp&&(n.first_play_timestamp=J(n.first_play_timestamp)),n.last_play_timestamp&&(n.last_play_timestamp=J(n.last_play_timestamp))),u.dp&&u.dp.dan!==void 0&&(u.dp.dan=Y(u.dp.dan).short),[u,n]}function _e(u){const n=u?.count;return n?[n.mfc!=null?{label:"MFCs",value:n.mfc}:{label:"MFCs",value:0},n.pfc!=null?{label:"PFCs",value:n.pfc}:{label:"PFCs",value:0},n.fc!=null?{label:"GFCs",value:n.fc}:{label:"GFCs",value:0},n.gfc!=null?{label:"FCs",value:n.gfc}:{label:"FCs",value:0},n.life4!=null?{label:"Life-4 Clears",value:n.life4}:{label:"Life-4 Clears",value:0}]:[]}async function ge(u){const n=u?.first_play_timestamp,f=u?.last_play_timestamp,j=u?.arcade_history,F=[];if(n&&F.push({timestamp:J(n),arcade:u?.first_play_arcade,first_play:!0}),j)for(const[z,Q]of Object.entries(j)){const we=await H(z);for(const[xe,Ve]of Object.entries(Q))for(const ne of Ve)[n,f].includes(ne)||F.push({timestamp:J(ne),arcade:we.name,machineId:xe,first_play:!1})}return f&&F.push({timestamp:J(f),arcade:u?.last_play_arcade,first_play:!1}),F.sort((z,Q)=>new Date(z.timestamp).getTime()-new Date(Q.timestamp).getTime())}async function he(){if(T.value.length){const u=await oa(_,m.currentVersion,T.value,!0);Z.value=u}}function ke(u){return Z.value?Z.value.find(n=>n.id==u):null}function $e(u){var n=[];for(const f in u){const j=u[f][0];n.push(j)}return n}function Ae(u){var n=[];for(const f in u){const j=u[f][0],F=u[f][1],z=ke(j);n.push({songid:j,plays:F,name:z?.name,artist:z?.artist})}return n}return(u,n)=>(a(),i(Xe,null,{default:A(()=>[e.value?(a(),i(Re,{key:0},{default:A(()=>[h(Qe,{game:g(s)},null,8,["game"]),h(R,{icon:g(Ee),title:"View Profile",main:""},{default:A(()=>[g(s).versions&&e.value?(a(),d("div",ut,[n[1]||(n[1]=t("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),h(aa,{modelValue:m.currentVersion,"onUpdate:modelValue":n[0]||(n[0]=f=>m.currentVersion=f),options:fe(k.value)},null,8,["modelValue","options"])])):l("",!0)]),_:1},8,["icon"]),m.currentVersion&&e.value?(a(),d("div",{key:0,style:Oe(K()),class:"rounded-2xl mb-6 card-container"},[t("video",{autoplay:"",muted:"",loop:"",playsinline:"",src:B(),class:"background-video"},null,8,it),t("div",ct,[t("div",dt,[h(Ye,{game:g(_),version:m.currentVersion,profile:e.value},{default:A(()=>[g(s).noScores?l("",!0):(a(),d("div",mt,[h(oe,{to:`/games/${g(_)}/scores/${e.value.userId}`,icon:g(Ge),class:"w-full md:w-auto",color:"info",label:"View Scores"},null,8,["to","icon"]),h(oe,{to:`/games/${g(_)}/records/${e.value.userId}`,icon:g(Je),class:"w-full md:w-auto",color:"info",label:"View Records"},null,8,["to","icon"])]))]),_:1},8,["game","version","profile"])])])],4)):l("",!0),t("div",vt,[(a(!0),d(D,null,q(g(L),f=>(a(),d(D,{key:f},[p.value[f.key]?(a(),i(v,{key:0,class:qe(f.span),label:f.label,number:f.type==Number?be(f,p.value):null,"num-color":pe(f)},{default:A(()=>[M(w(f.type==String?p.value[f.key]:null),1)]),_:2},1032,["class","label","number","num-color"])):l("",!0)],64))),128)),p.value?.count?.records?(a(),i(v,{key:0,label:"Records",number:p.value?.count?.records},null,8,["number"])):l("",!0),p.value?.count?.attempts?(a(),i(v,{key:1,label:"Scores",number:p.value?.count?.attempts},null,8,["number"])):l("",!0),e.value.skill?(a(),i(v,{key:2,label:"Skill Points",number:e.value.skill/100,"num-color":g(ea)(e.value.skill)},null,8,["number","num-color"])):l("",!0),e.value.profile_skill?(a(),i(v,{key:3,label:"Skill Level"},{default:A(()=>[M(w(e.value.profile_skill/100),1)]),_:1})):l("",!0),e.value.jubility?(a(),i(v,{key:4,label:"Jubility","num-color":g(ee)(e.value.jubility)},{default:A(()=>[M(w(e.value.jubility/10),1)]),_:1},8,["num-color"])):l("",!0),e.value.pick_up_jubility?(a(),i(v,{key:5,label:"Pick-Up Jubility","num-color":g(ee)(e.value.pick_up_jubility)},{default:A(()=>[M(w(e.value.pick_up_jubility/10),1)]),_:1},8,["num-color"])):l("",!0),e.value.common_jubility?(a(),i(v,{key:6,label:"Common Jubility","num-color":g(ee)(e.value.common_jubility)},{default:A(()=>[M(w(e.value.common_jubility/10),1)]),_:1},8,["num-color"])):l("",!0),e.value.deller?(a(),i(v,{key:7,label:"Deller",number:e.value.deller},null,8,["number"])):l("",!0),e.value.sgrade?(a(),i(v,{key:8,label:"SP DAN"},{default:A(()=>[M(w(g(Y)(e.value.sgrade).label),1)]),_:1})):l("",!0),e.value.dgrade?(a(),i(v,{key:9,label:"DP DAN"},{default:A(()=>[M(w(g(Y)(e.value.dgrade).label),1)]),_:1})):l("",!0),e.value.total_exp?(a(),i(v,{key:10,label:"EXP",number:e.value.total_exp},null,8,["number"])):l("",!0),e.value.coin_num?(a(),i(v,{key:11,label:"Coins",number:e.value.coin_num},null,8,["number"])):l("",!0),e.value.block?(a(),i(v,{key:12,label:"Block",number:e.value.block},null,8,["number"])):l("",!0),e.value.packet?(a(),i(v,{key:13,label:"Packet",number:e.value.packet},null,8,["number"])):l("",!0)]),p.value?.count||e.value.tune_cnt||e.value.max_clear_diff||e.value.battle_data?(a(),d(D,{key:1},[h(R,{icon:g(Sa),title:"Stats",main:""},null,8,["icon"]),t("div",pt,[(a(!0),d(D,null,q(_e(p.value),f=>(a(),d(D,{key:f},[f!==void 0?(a(),i(v,{key:0,label:f.label,number:f.value},{default:A(()=>[M(w(f.value?null:"0"),1)]),_:2},1032,["label","number"])):l("",!0)],64))),128)),e.value.tune_cnt?(a(),i(v,{key:0,label:"Total Tunes",number:e.value.tune_cnt},null,8,["number"])):l("",!0),e.value.ex_cnt?(a(),i(v,{key:1,label:"Total EXC",number:e.value.ex_cnt},null,8,["number"])):l("",!0),e.value.fc_cnt?(a(),i(v,{key:2,label:"Total FC",number:e.value.fc_cnt},null,8,["number"])):l("",!0),e.value.clear_cnt?(a(),i(v,{key:3,label:"Total Clear",number:e.value.clear_cnt},null,8,["number"])):l("",!0),e.value.saved_cnt?(a(),i(v,{key:4,label:"Total Saved",number:e.value.saved_cnt},null,8,["number"])):l("",!0),e.value.match_cnt?(a(),i(v,{key:5,label:"Total Matches",number:e.value.match_cnt},null,8,["number"])):l("",!0),e.value.max_clear_diff?(a(),i(v,{key:6,label:"Max Clear Difficulty"},{default:A(()=>[M(w(e.value.max_clear_diff/100),1)]),_:1})):l("",!0),e.value.max_full_diff?(a(),i(v,{key:7,label:"Max FC Difficulty"},{default:A(()=>[M(w(e.value.max_full_diff/100),1)]),_:1})):l("",!0),e.value.max_exce_diff?(a(),i(v,{key:8,label:"Max EX FC Difficulty"},{default:A(()=>[M(w(e.value.max_exce_diff/100),1)]),_:1})):l("",!0),e.value.clear_num?(a(),i(v,{key:9,label:"Total Clear",number:e.value.clear_num},null,8,["number"])):l("",!0),e.value.full_num?(a(),i(v,{key:10,label:"Total FC",number:e.value.full_num},null,8,["number"])):l("",!0),e.value.exce_num?(a(),i(v,{key:11,label:"Total EX FC",number:e.value.exce_num},null,8,["number"])):l("",!0),e.value.e_num?(a(),i(v,{key:12,label:"Total E",number:e.value.e_num},null,8,["number"])):l("",!0),e.value.d_num?(a(),i(v,{key:13,label:"Total D",number:e.value.d_num},null,8,["number"])):l("",!0),e.value.c_num?(a(),i(v,{key:14,label:"Total C",number:e.value.c_num},null,8,["number"])):l("",!0),e.value.b_num?(a(),i(v,{key:15,label:"Total B",number:e.value.b_num},null,8,["number"])):l("",!0),e.value.a_num?(a(),i(v,{key:16,label:"Total A",number:e.value.a_num},null,8,["number"])):l("",!0),e.value.s_num?(a(),i(v,{key:17,label:"Total S",number:e.value.s_num},null,8,["number"])):l("",!0),e.value.ss_num?(a(),i(v,{key:18,label:"Total SS",number:e.value.ss_num},null,8,["number"])):l("",!0),e.value.session_cnt?(a(),i(v,{key:19,label:"Sessions Played",number:e.value.session_cnt},null,8,["number"])):l("",!0),e.value.battle_data?.win_num?(a(),i(v,{key:20,label:"Total Wins",number:e.value.battle_data?.win_num},null,8,["number"])):l("",!0),e.value.battle_data?.lose_num?(a(),i(v,{key:21,label:"Total Losses",number:e.value.battle_data?.lose_num},null,8,["number"])):l("",!0),e.value.battle_data?.draw_num?(a(),i(v,{key:22,label:"Total Draws",number:e.value.battle_data?.draw_num},null,8,["number"])):l("",!0)])],64)):l("",!0),V.value&&!g(s).noScores?(a(),d("div",ft,[h(We,{"hitchart-data":V.value,"game-id":g(_)},null,8,["hitchart-data","game-id"])])):l("",!0),e.value.jubility?(a(),d(D,{key:3},[h(R,{icon:g(Wa),title:"Jubility Breakdown",main:""},null,8,["icon"]),t("div",bt,[e.value.pick_up_breakdown?(a(),i(I,{key:0},{default:A(()=>[h(O,{label:"Pick-Up",color:"info"}),h(se,{"jubility-data":e.value.pick_up_breakdown,version:m.currentVersion},null,8,["jubility-data","version"])]),_:1})):l("",!0),e.value.other_breakdown?(a(),i(I,{key:1},{default:A(()=>[h(O,{label:"Common",color:"info"}),h(se,{"jubility-data":e.value.other_breakdown,version:m.currentVersion},null,8,["jubility-data","version"])]),_:1})):l("",!0)])],64)):l("",!0),e.value?.trbitem?(a(),d(D,{key:4},[h(R,{icon:g(_l),title:"Sticker Board",main:""},null,8,["icon"]),t("div",yt,[h(I,{class:"w-full grid place-content-center"},{default:A(()=>[h(la,{version:m.currentVersion,profile:e.value,size:290},null,8,["version","profile"])]),_:1})])],64)):l("",!0),g(s).id==g(Ue).IIDX&&m.currentVersion>=29?(a(),d(D,{key:5},[h(R,{icon:g(Fl),title:"Notes Radar",main:""},null,8,["icon"]),h(st,{game:g(s).id,version:m.currentVersion,profile:g(o)},null,8,["game","version","profile"])],64)):l("",!0),p.value?.timeline?(a(),d(D,{key:6},[h(R,{icon:g(Ke),title:"Timeline",main:""},null,8,["icon"]),t("div",_t,[h(I,null,{default:A(()=>[t("ol",gt,[(a(!0),d(D,null,q(JSON.parse(JSON.stringify(p.value?.timeline)).reverse(),f=>(a(),d("li",{key:f.timestamp,class:"md:inline-block shrink-0"},[t("div",ht,[n[2]||(n[2]=t("div",{class:"-ms-[6px] me-3 h-[12px] w-[12px] md:w-0.5 md:h-4 rounded-full md:rounded-none bg-gray-300 md:-mt-6 md:me-0 md:ms-0"},null,-1)),t("p",kt,w(f.timestamp),1)]),t("div",$t,[t("h4",At,w(f.arcade),1)])]))),128))])]),_:1})])],64)):l("",!0)]),_:1})):l("",!0)]),_:1}))}};export{Bt as default};
