import{u as P,r as p,p as B,c as g,d as n,w as l,e,_ as I,j as u,f as c,O as S,F as D,P as m,g as o,b7 as X,h as d,v as $,i as a,I as k,b8 as V,l as _,C as T,D as A,t as f,ad as y,n as F}from"./index-DpUG9nZw.js";import{_ as M}from"./FormField-CeDH4QRv.js";import{_ as N}from"./FormControl-DJSYTs7f.js";import{f as R,g as L}from"./arcade-DCQASgYb.js";const O={key:1},U={class:"text-2xl font-bold"},Y={class:"text-xl mb-6"},j={class:"text-xl mb-6"},q={class:"mt-4"},E={key:2},G={class:"text-xl mb-6"},K={class:"mt-4"},z={key:3},H={class:"mt-4"},ae={__name:"ClaimView",setup(J){const b=P(),v=p(!1),t=p(null),r=B({PCBID:null}),i=p(null);async function w(){v.value=!0,t.value=await R(r.PCBID),v.value=!1}async function C(){const h=await L(r.PCBID);h||window.alert("Failed to takeover!"),h.status==="success"?i.value=!0:i.value=!1,b.userLoaded=!1,b.loadUser()}return(h,s)=>(n(),g(F,null,{default:l(()=>[e(I,null,{default:l(()=>[e(S,{class:"mb-6","use-small":"","even-smaller":""}),t.value?c("",!0):(n(),u(D,{key:0},[e(m,{icon:o(X),title:"Claim an Arcade",main:""},null,8,["icon"]),e(d,{"is-form":"",class:"row-span-2 mb-6",onSubmit:s[1]||(s[1]=$(x=>w(),["prevent"]))},{footer:l(()=>[e(_,{type:"submit",color:"success",label:"Start Claim"}),v.value?(n(),g(T,{key:0,path:o(A),color:"text-yellow-500",class:"animate animate-spin"},null,8,["path"])):c("",!0)]),default:l(()=>[s[2]||(s[2]=a("h2",{class:"text-xl mb-6 lg:w-1/2"},[k(" Claim an arcade using a PCBID."),a("br"),k(" You cannot claim the arcade if it has an owner. ")],-1)),e(M,{label:"PCBID",help:"A PCBID from the arcade you're wanting to claim."},{default:l(()=>[e(N,{modelValue:r.PCBID,"onUpdate:modelValue":s[0]||(s[0]=x=>r.PCBID=x),icon:o(V),name:"cardId",type:"pcbid",placeholder:"XXXXXXXXXXXXXXXXX",minlength:20,maxlength:20,required:""},null,8,["modelValue","icon"])]),_:1})]),_:1,__:[2]})],64)),t.value&&i.value==null?(n(),u("div",O,[e(m,{icon:o(X),title:"Confirm Merge",main:""},null,8,["icon"]),e(d,null,{default:l(()=>[a("h2",U,f(t.value?.arcade?.name),1),a("h3",Y,f(t.value?.arcade?.description),1),a("h2",j," This arcade has "+f(t.value?.count)+" machine(s). ",1),a("div",q,[e(_,{color:"success",label:"Start Takeover",onClick:C})])]),_:1})])):c("",!0),i.value==!0?(n(),u("div",E,[e(m,{icon:o(y),title:"Takeover Results",main:""},null,8,["icon"]),e(d,null,{default:l(()=>[a("h2",G," ✅ Successfully merged "+f(t.value?.count)+" machines. Yippie! ",1),a("div",K,[e(_,{color:"success",label:"Go to Arcade",href:`#/arcade/${t.value?.arcade?.id}`},null,8,["href"])])]),_:1})])):c("",!0),i.value==!1?(n(),u("div",z,[e(m,{icon:o(y),title:"Merge Results",main:""},null,8,["icon"]),e(d,null,{default:l(()=>[s[3]||(s[3]=a("h2",{class:"text-xl mb-6"},"❌ Failed to merge. Please try again.",-1)),a("div",H,[e(_,{color:"warning",label:"Retry",onClick:C})])]),_:1,__:[3]})])):c("",!0)]),_:1})]),_:1}))}};export{ae as default};
