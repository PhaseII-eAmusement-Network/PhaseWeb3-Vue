import{a as L,b as D,a7 as G,r as y,p as k,M as N,o as j,c as _,d as r,w as i,e as a,_ as E,f as v,g as c,j as p,i as s,P,bA as M,h,F as $,k as A,t as g,l as R,bB as U,n as Y}from"./index-CHivKhhP.js";import{_ as q}from"./GameHeader-CbS6z4E_.js";import{_ as z}from"./ProfileCard-D5atgNuu.js";import{_ as C}from"./FormControl-BLuW9GWW.js";import{_ as H}from"./FormField-vtioLqMT.js";import{A as J,a as K}from"./profile-LMvWxmH8.js";import{d as O}from"./userData-DZYdegtD.js";import"./sources-0lyug9Pk.js";const Q={key:0,class:"w-full md:flex md:-mt-[75px] mb-4 place-content-end"},T={class:"md:w-1/3 md:text-right"},W={key:1,class:"w-full"},X={class:"grid gap-4"},Z={class:"flex w-full place-content-between"},ee={class:"text-lg md:text-xl"},se={class:"text-md md:text-lg font-mono"},te={class:"flex align-middle"},le={class:"grid gap-3"},oe={class:"flex justify-between items-center"},re={class:"flex"},ae={class:"grid"},ne={class:"text-lg"},ie={class:"text-md font-mono"},ge={__name:"RivalsView",setup(de){const I=L(),F=D();var m=null,d=null;m=I.params.game,d=G(m);const n=y(null),V=y([]),l=k({currentVersion:null});N(()=>l.currentVersion,()=>{w(),b()}),j(async()=>{b(),w()}),d.versions||(l.currentVersion=1);async function w(){try{n.value=null;const e=await J(m,l.currentVersion);n.value=e,e&&!l.currentVersion&&(l.currentVersion=e.versions[e.versions.length-1])}catch(e){console.error("Failed to fetch user profile data:",e)}}async function b(){try{const e=await K(m,l.currentVersion);V.value=e}catch(e){console.error("Failed to fetch profile data:",e)}}function S(e){var o=[];for(const t of d.versions)e.includes(t.id)&&o.push(t);return o}const u=k({filter:null});d||F.push({name:"ErrorPage",params:{catchAll:"404"}});function B(){if(u.filter)return V.value.filter(e=>e.username.toLowerCase().includes(u.filter.toLowerCase())||e.extid.toString().toLowerCase().includes(u.filter.toLowerCase()))}return(e,o)=>(r(),_(Y,null,{default:i(()=>[a(E,null,{default:i(()=>[a(q,{game:c(d),version:l.currentVersion},{default:i(()=>[c(d).versions&&n.value?(r(),p("div",Q,[s("div",T,[o[2]||(o[2]=s("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),a(C,{modelValue:l.currentVersion,"onUpdate:modelValue":o[0]||(o[0]=t=>l.currentVersion=t),options:S(n.value.versions)},null,8,["modelValue","options"])])])):v("",!0),n.value?(r(),p("div",W,[a(z,{game:c(m),version:l.currentVersion,profile:n.value,"use-small":""},null,8,["game","version","profile"])])):v("",!0)]),_:1},8,["game","version"]),a(P,{icon:c(M),title:"Add a Rival",main:""},null,8,["icon"]),l.currentVersion?(r(),_(h,{key:0,class:"mb-6"},{default:i(()=>[a(H,{label:"Search",help:"Search by username or Rival ID to add a rival.",class:"w-full md:w-1/3"},{default:i(()=>[a(C,{modelValue:u.filter,"onUpdate:modelValue":o[1]||(o[1]=t=>u.filter=t),"model-value":u.filter,placeholder:"1234-5678"},null,8,["modelValue","model-value"])]),_:1}),s("div",X,[(r(!0),p($,null,A(B(),t=>{var f;return r(),p("div",{key:t.id,class:"bg-slate-800 p-4 rounded-xl"},[s("div",Z,[s("div",null,[s("h1",ee,g(t.username),1),s("h2",se,g(c(O)(t.extid)),1)]),s("div",te,[a(R,{label:"Add Rival",color:"success",disabled:t.userId==((f=n.value)==null?void 0:f.userId),tooltip:"penis"},null,8,["disabled"])])])])}),128))])]),_:1})):v("",!0),a(P,{icon:c(U),title:"Rivals",main:""},null,8,["icon"]),l.currentVersion?(r(),_(h,{key:1,class:"mb-6"},{default:i(()=>{var t,f;return[s("div",le,[(r(!0),p($,null,A((t=n.value)==null?void 0:t.rivals,x=>(r(),_(h,{key:x.id},{default:i(()=>[s("div",oe,[s("div",re,[s("div",ae,[s("h1",ne,g(x.name),1),s("h2",ie,g(x.rivalID),1)])]),a(R,{label:"Remove Rival",color:"danger"})])]),_:2},1024))),128)),(f=n.value)!=null&&f.rivals?v("",!0):(r(),_(h,{key:0},{default:i(()=>o[3]||(o[3]=[s("h1",{class:"text-2xl"},"You have no rivals!",-1)])),_:1}))])]}),_:1})):v("",!0)]),_:1})]),_:1}))}};export{ge as default};
