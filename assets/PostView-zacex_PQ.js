import{u as k,l as v,m as g,r as p,o as A,A as $,c as w,a as n,w as c,b as d,_ as N,T as B,e as b,g as s,n as F,p as e,d as u,t as x,F as P,h as V,q as C,s as R,H as S,k as D}from"./index-DuYVLgib.js";const i=k();async function E(a){if(i.loadedArticles[a])return i.loadedArticles[a];try{const o=await i.callApi(`/news/${a}`);return i.loadedArticles[a]=o,i.loadedArticles[a]}catch(o){throw console.log("Error fetching post:",o),o}}const H={class:"flex flex-col items-center"},M=["src"],T={class:"text-left md:text-center"},q={class:"text-2xl"},z={key:1},L={__name:"PostView",setup(a){const o=v(),h=g(),f=parseInt(o.params.id);var l=p({data:{}}),_=p("");A(async()=>{try{const t=await E(f);l.value=t.news,_.value=t.news.body.split(`
`)}catch(t){console.error("Failed to fetch news data:",t)}try{await $(f)}catch(t){console.error("Failed to set news as read:",t)}});function y(){h.push("/")}return(t,r)=>(n(),w(D,null,{default:c(()=>[d(N,null,{default:c(()=>[d(B,null,{default:c(()=>[s(l)!={}?(n(),w(F,{key:0,"has-table":""},{footer:c(()=>[d(C,null,{default:c(()=>[d(R,{label:"Home",color:"info",icon:s(S),"icon-size":"20",onClick:y},null,8,["icon"])]),_:1})]),default:c(()=>[e("div",H,[e("img",{src:s(l).data.img,class:"rounded-t-2xl md:rounded-2xl md:w-1/2 md:m-4"},null,8,M)]),s(l)?(n(),u("div",{key:s(l).id,class:"flex flex-col items-center p-4"},[e("div",T,[e("h1",q,x(s(l).title),1),r[1]||(r[1]=e("hr",{class:"pb-1 my-2"},null,-1)),(n(!0),u(P,null,V(s(_),m=>(n(),u("div",{key:m},[e("p",null,x(m),1),r[0]||(r[0]=e("br",null,null,-1))]))),128))])])):(n(),u("div",z,r[2]||(r[2]=[e("h1",{class:"text-2xl"},"News not found...",-1)])))]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1}))}};export{L as default};
