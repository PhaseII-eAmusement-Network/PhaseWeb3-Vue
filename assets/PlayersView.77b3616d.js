import{u as b,a as k,ag as I,r as A,o as R,c,e as u,w as f,f as n,j as o,g as s,i as h,aY as D,n as g,aZ as B,aU as C,$ as N,a_ as S,_ as L,p as V,q as j}from"./index.e6e60e27.js";import{_ as G}from"./GameTitleLine.06cd6f70.js";import{_ as M}from"./GeneralTable.0852facc.js";import{a as F}from"./profile.154a21cc.js";import{a as H}from"./sources.0e8cabdf.js";import{d as T}from"./userData.bcc92478.js";import{g as y}from"./danClass.233b0381.js";const q={class:"bg-white dark:bg-slate-900/90 rounded-2xl pt-6 p-3 card-content"},z={class:"w-full"},E={class:"md:flex md:px-5 md:space-x-10 md:justify-between md:items-center"},O={class:"md:w-1/2 grid grid-cols-1 md:grid-cols-2 gap-3"},U={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},X={class:"w-full"},ea={__name:"PlayersView",setup(Y){const v=b(),_=k();var l=null,t=null;l=v.params.id,t=I(l),t==null&&_.push({name:"ErrorPage",params:{catchAll:"404"}});const m=A([]);R(async()=>{try{const e=await F(l);m.value=x(e)}catch(e){console.error("Failed to fetch profile data:",e)}});const i=[];if(i.push({text:"Player",value:"username",sortable:!0,width:120}),t.noRivals||i.push({text:"Rival ID",value:"extid",width:100}),i.push({text:"Last Play",value:"stats.last_play_timestamp",width:150},{text:"Last Arcade",value:"stats.last_play_arcade",width:150},{text:"Plays",value:"stats.total_plays",sortable:!0,width:50}),t.playerHeaders)for(var w of t.playerHeaders)i.push(w);function x(e){var r=[];for(var a of e){if(a.extid&&(a.extid=T(a.extid)),a.stats){if(a.stats.last_play_timestamp){const d=new Date(a.stats.last_play_timestamp*1e3);a.stats.last_play_timestamp=d.toLocaleString()}a.sgrade&&(a.sgrade=y(a.sgrade).short),a.dgrade&&(a.dgrade=y(a.dgrade).short)}r.push(a)}return r.sort((d,p)=>{const P=d.stats&&d.stats.total_plays||0;return(p.stats&&p.stats.total_plays||0)-P}),r}const $=e=>{const r=e.userId;_.push(`/games/${l}/profiles/${r}`)};return(e,r)=>(c(),u(j,null,{default:f(()=>[n(V,null,{default:f(()=>[o("div",{style:C(s(H)(s(t))),class:"rounded-2xl mb-6 card-container"},[o("div",q,[o("div",z,[o("div",E,[n(G,{path:s(t).icon,title:s(t).name},null,8,["path","title"])])]),o("div",O,[s(t).noScores?g("",!0):(c(),u(h,{key:0,href:`/#/games/${s(l)}/scores`,icon:s(D),outline:!1,color:"info",label:"Network Scores"},null,8,["href","icon"])),s(t).noRecords?g("",!0):(c(),u(h,{key:1,href:`/#/games/${s(l)}/records`,icon:s(B),outline:!1,color:"info",label:"Network Records"},null,8,["href","icon"]))])])],4),n(N,{icon:s(S),title:"All Players",main:""},null,8,["icon"]),n(L,{"has-table":""},{default:f(()=>[o("div",U,[o("div",X,[n(M,{headers:i,items:m.value,path:`/#/${s(l)}/profiles/`,onRowClicked:$},null,8,["items","path"])])])]),_:1})]),_:1})]),_:1}))}};export{ea as default};
