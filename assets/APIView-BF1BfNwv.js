import{r as w,s as C,o as b,c as x,e as v,w as s,f as t,_ as y,j as r,k as o,P as m,i as d,aF as h,aG as g,y as k,n as A,q as $}from"./index-BzYv6Vb0.js";import{_ as P}from"./GeneralTable-Diu8r_Ya.js";import{_ as N}from"./FormField-DuF-7BFi.js";import{_ as V}from"./FormControl-Z8OoTgT_.js";import{f as B,g as D}from"./admin-PBRqi0K7.js";const F={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},I={class:"w-full"},U={__name:"APIView",setup(M){const n=w([]),u=[{text:"Create Timestamp",value:"timestamp",width:120},{text:"Name",value:"name",width:120}],i=C({...{name:null}});b(async()=>{c()});async function c(){try{const l=await B();var a=[];for(var e of l){if(e.timestamp){const _=new Date(e.timestamp*1e3);e.timestamp=_.toLocaleString()}a.push(e)}n.value=a}catch(l){console.error("Failed to fetch client data:",l)}}async function f(){try{const a=await D(i);n.value=a}catch(a){console.error("Failed to post client:",a)}c()}const p=a=>{navigator.clipboard.writeText(a.token).then(()=>{alert("Copied to clipboard!")}).catch(()=>{alert("Failed to copy to clipboard!")})};return(a,e)=>(v(),x($,null,{default:s(()=>[t(y,null,{default:s(()=>[t(r,{class:"mb-6 p-1"},{default:s(()=>e[2]||(e[2]=[o("h1",{class:"text-3xl"},"Data API",-1),o("p",{class:"text-sm text-gray-400"},"Used for RestfulSleep and BEMAPI",-1)])),_:1}),t(m,{icon:d(h),title:"All Active Clients",color:"text-blue-400",main:""},null,8,["icon"]),t(r,{"has-table":"",class:"mb-6"},{default:s(()=>[o("div",F,[o("div",I,[t(P,{headers:u,items:n.value,onRowClicked:p},null,8,["items"]),e[3]||(e[3]=o("h1",{class:"mx-4 mt-1 mb-2 text-md lg:text-lg"}," Click row to copy token ",-1))])])]),_:1}),t(m,{icon:d(g),title:"Create New Client",color:"text-emerald-600",main:""},null,8,["icon"]),t(r,{"is-form":"",class:"row-span-1",onSubmit:e[1]||(e[1]=k(l=>f(),["prevent"]))},{default:s(()=>[t(N,{label:"Name",help:"Name of the client you'd like to onboard."},{default:s(()=>[t(V,{modelValue:i.name,"onUpdate:modelValue":e[0]||(e[0]=l=>i.name=l),required:""},null,8,["modelValue"])]),_:1}),o("div",null,[t(A,{type:"submit",color:"success",label:"Create",small:!1})])]),_:1})]),_:1})]),_:1}))}};export{U as default};
