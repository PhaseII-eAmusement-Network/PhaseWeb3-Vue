import{m as $,r as f,o as y,s as D,c as I,a as m,w as r,b as e,_ as B,p as s,n as i,f as _,g as b,O as h,d as p,F,h as A,t as d,q as w,y as L,k as S}from"./index-jHbWkO02.js";import{I as M}from"./PhMagnifyingGlass.vue-63kGxoB3.js";import{F as O}from"./PhUsersThree.vue-Cc_REf6F.js";import{_ as P}from"./GeneralTable-D-FKNE3P.js";import{_ as v}from"./FormField-BOtKjy7M.js";import{_ as x}from"./FormControl-XG0ZJ25y.js";import{m as q,n as N}from"./admin-BPWdSIcl.js";import"./contentExport-BHEc0v0f.js";const R={class:"grid md:grid-cols-2 gap-6"},j={class:"grid gap-4"},E={class:"md:flex w-full place-content-between"},T={class:"text-lg md:text-xl"},W={class:"text-md md:text-lg"},z={class:"text-md"},G={class:"bg-slate-900 p-2 rounded-md mt-2 w-14 max-w-16 text-center"},H={class:"text-lg font-mono text-pink-700"},J={class:"flex align-middle mt-2 md:mt-0 max-h-16"},K={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},Q={class:"w-full"},ne={__name:"UsersView",setup(X){const g=$(),c=f([]),n=f(null),U=[{text:"User ID",value:"id",width:20,sortable:!0},{text:"Username",value:"username",width:150,sortable:!0},{text:"Public",value:"public",width:120,sortable:!0},{text:"Admin",value:"admin",width:120,sortable:!0},{text:"Banned",value:"banned",width:120,sortable:!0},{text:"Discord Linked",value:"data.discord.linked",width:120,sortable:!0},{text:"Tachi Linked",value:"data.tachi.linked",width:120,sortable:!0},{text:"Web3 Beta Used",value:"data.webVersionsBool",width:120,sortable:!0}];y(async()=>{k()});async function k(){try{const a=await q();var l=[];for(var t of a)t.username||(t.username="Unclaimed Account"),t.data.webVersions&&(t.data.webVersionsBool=!!t.data.webVersions),l.push(t);c.value=l}catch(a){console.error("Failed to fetch user data:",a)}}const u=l=>{const t=l.id;g.push(`/profiles/${t}`)},o=D({filter:null});function C(){return o.filter?c.value.filter(l=>l.id.toString().toLowerCase().includes(o.filter.toLowerCase())||l.username.toLowerCase().includes(o.filter.toLowerCase())).slice(0,25):[]}async function V(){const l=await N(n.value);if(l)u({id:l?.id});else{window.alert("Couldn't find user.");return}}return(l,t)=>(m(),I(S,null,{default:r(()=>[e(B,null,{default:r(()=>[e(i,{class:"mb-6 p-1"},{default:r(()=>t[2]||(t[2]=[s("h1",{class:"text-3xl"},"User Management",-1),s("p",{class:"text-sm text-gray-400"},"Click a row to open User",-1)])),_:1,__:[2]}),e(_,{icon:b(M),title:"Search",color:"text-amber-500",main:""},null,8,["icon"]),s("div",R,[e(i,{class:"mb-6"},{default:r(()=>[e(h,{color:"info",label:"Search",class:"mb-2"}),e(v,{label:"Search",help:"Search by ID or username.",class:"w-full"},{default:r(()=>[e(x,{modelValue:o.filter,"onUpdate:modelValue":t[0]||(t[0]=a=>o.filter=a),"model-value":o.filter},null,8,["modelValue","model-value"])]),_:1}),s("div",j,[(m(!0),p(F,null,A(C(),a=>(m(),p("div",{key:a.id,class:"bg-slate-800 p-4 rounded-xl"},[s("div",E,[s("div",null,[s("h1",T,d(a.username),1),s("h2",W," User "+d(a.banned?"is":"isn't")+" banned. ",1),s("h2",z," Discord "+d(a.data?.discord?.linked?"is":"isn't")+" linked. ",1),s("div",G,[s("h2",H,d(a.id),1)])]),s("div",J,[e(w,{label:"Open User",color:"info",onClick:Y=>u(a)},null,8,["onClick"])])])]))),128))])]),_:1}),e(i,{class:"mb-6","is-form":"",onSubmit:L(V,["prevent"])},{default:r(()=>[e(h,{color:"warning",label:"From CardID",class:"mb-2"}),e(v,{label:"Card ID",help:"16 character ID for a user's card.",class:"w-full"},{default:r(()=>[e(x,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=a=>n.value=a),name:"Card ID",required:"","model-value":n.value,minlength:16,maxlength:16},null,8,["modelValue","model-value"])]),_:1}),e(w,{color:"success",type:"submit",label:"Open User"})]),_:1})]),e(_,{icon:b(O),title:"All Users",color:"text-blue-400",main:""},null,8,["icon"]),e(i,{"has-table":"",class:"mb-6"},{default:r(()=>[s("div",K,[s("div",Q,[e(P,{headers:U,items:c.value,"has-avatar":!0,onRowClicked:u},null,8,["items"])])])]),_:1})]),_:1})]),_:1}))}};export{ne as default};
