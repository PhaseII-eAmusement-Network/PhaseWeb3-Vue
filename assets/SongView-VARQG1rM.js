import{W as N,X as v,Y as u,d as i,a as o,Z as B,e as V,p as t,$ as D,l as I,m as P,a8 as L,r as G,o as O,s as R,c as b,w as p,g as r,_ as z,b as c,f as $,n as Z,t as A,F as y,h as S,O as F,a2 as H,ak as j,D as E,aq as q,k as J}from"./index-DKeSYPLA.js";import{_ as U}from"./GeneralTable-CnvcZzSP.js";import{_ as W}from"./FormControl-DRIz9mVl.js";import{_ as X}from"./GameHeader-DBLOwGXu.js";import{b as Y}from"./music-D6CmXZhA.js";import{f as C}from"./scoreDataFilters-7k9N3yyn.js";import{f as K}from"./scores-BxZbC6Fw.js";import"./contentExport-C_Mii8yc.js";import"./PhGear.vue-BFfPvh_T.js";import"./PhHouse.vue-CNw9_CuB.js";const Q=["width","height","fill","transform"],ee={key:0},te=t("path",{d:"M211.45,52.51l-80-24A12,12,0,0,0,116,40V140.22A52,52,0,1,0,140,184V104.13l64.55,19.36A12,12,0,0,0,220,112V64A12,12,0,0,0,211.45,52.51ZM88,212a28,28,0,1,1,28-28A28,28,0,0,1,88,212ZM196,95.87l-56-16.8V56.13l56,16.8Z"},null,-1),ae=[te],le={key:1},re=t("path",{d:"M128,184a40,40,0,1,1-40-40A40,40,0,0,1,128,184Z",opacity:"0.2"},null,-1),se=t("path",{d:"M210.3,56.34l-80-24A8,8,0,0,0,120,40V148.26A48,48,0,1,0,136,184V98.75l69.7,20.91A8,8,0,0,0,216,112V64A8,8,0,0,0,210.3,56.34ZM88,216a32,32,0,1,1,32-32A32,32,0,0,1,88,216ZM200,101.25l-64-19.2V50.75L200,70Z"},null,-1),oe=[re,se],ie={key:2},ne=t("path",{d:"M210.3,56.34l-80-24A8,8,0,0,0,120,40V148.26A48,48,0,1,0,136,184V98.75l69.7,20.91A8,8,0,0,0,216,112V64A8,8,0,0,0,210.3,56.34Z"},null,-1),ce=[ne],de={key:3},ue=t("path",{d:"M209.72,58.25l-80-24A6,6,0,0,0,122,40V153.05A46,46,0,1,0,134,184V96.06l72.28,21.69A6,6,0,0,0,214,112V64A6,6,0,0,0,209.72,58.25ZM88,218a34,34,0,1,1,34-34A34,34,0,0,1,88,218ZM202,103.94l-68-20.4V48.06l68,20.4Z"},null,-1),me=[ue],fe={key:4},he=t("path",{d:"M210.3,56.34l-80-24A8,8,0,0,0,120,40V148.26A48,48,0,1,0,136,184V98.75l69.7,20.91A8,8,0,0,0,216,112V64A8,8,0,0,0,210.3,56.34ZM88,216a32,32,0,1,1,32-32A32,32,0,0,1,88,216ZM200,101.25l-64-19.2V50.75L200,70Z"},null,-1),pe=[he],ge={key:5},_e=t("path",{d:"M209.15,60.17l-80-24A4,4,0,0,0,124,40V158.75A44,44,0,1,0,132,184V93.38l74.85,22.45A4,4,0,0,0,212,112V64A4,4,0,0,0,209.15,60.17ZM88,220a36,36,0,1,1,36-36A36,36,0,0,1,88,220ZM204,106.62,132,85V45.38L204,67Z"},null,-1),ve=[_e],be={name:"PhMusicNote"},Ae=N({...be,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(k){const n=k,g=v("weight","regular"),m=v("size","1em"),x=v("color","currentColor"),s=v("mirrored",!1),e=u(()=>n.weight??g),f=u(()=>n.size??m),w=u(()=>n.color??x),h=u(()=>n.mirrored!==void 0?n.mirrored?"scale(-1, 1)":void 0:s?"scale(-1, 1)":void 0);return(_,M)=>(o(),i("svg",D({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:f.value,height:f.value,fill:w.value,transform:h.value},_.$attrs),[B(_.$slots,"default"),e.value==="bold"?(o(),i("g",ee,ae)):e.value==="duotone"?(o(),i("g",le,oe)):e.value==="fill"?(o(),i("g",ie,ce)):e.value==="light"?(o(),i("g",de,me)):e.value==="regular"?(o(),i("g",fe,pe)):e.value==="thin"?(o(),i("g",ge,ve)):V("",!0)],16,Q))}}),ye={class:"grid gap-4 bg-slate-900/90 card-content"},Ve={class:"text-3xl font-bold"},xe={class:"text-2xl"},we={class:"text-xl font-light italic"},$e={class:"grid grid-cols-3 sm:flex gap-2"},ke={class:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-6"},Me={class:"flex place-content-between mb-2"},Ze={class:"md:w-1/3 md:text-right"},Se={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},Ce={class:"w-full"},ze={__name:"SongView",setup(k){const n=I(),g=P();var m=n.params.game,x=n.params.songId;const s=L(m);var e=G({});s||g.push({name:"ErrorPage",params:{catchAll:"404"}}),O(async()=>{try{const l=await Y(m,x);e.value=l}catch(l){console.error("Failed to fetch score data:",l)}});const f=[{text:"Player",value:"username",width:120,sortable:!0},{text:"Timestamp",value:"timestamp",width:140,sortable:!0},{text:"Grade",value:"data.rank",width:80,sortable:!0},{text:"Score",value:"points",width:120,sortable:!0}];if(s.scoreHeaders)for(var w of s.scoreHeaders)f.push(w);const h=R({currentChart:0}),_=u(()=>e.value.charts?e.value.charts.filter(l=>l.data?.difficulty!==0&&l.data?.difficulty!=null&&s.chartTable[l.chart]).map((l,d)=>{const a=`${s.chartTable[l.chart]} - ${C(l.data?.difficulty,s.difficultyDenom)}`;return{id:l.chart,label:a}}):[]),M=u(()=>{if(!e.value.charts||e.value.charts.length===0)return[];const l=JSON.parse(JSON.stringify(e.value.charts[h.currentChart]));return K(s,l?.records??[])}),T=l=>{const d=l.userId;g.push(`/games/${m}/profiles/${d}`)};return(l,d)=>(o(),b(J,null,{default:p(()=>[r(e)?(o(),b(z,{key:0},{default:p(()=>[c(X,{game:r(s)},null,8,["game"]),c($,{icon:r(Ae),title:"Song Overview",main:""},null,8,["icon"]),c(Z,{class:"mb-6","has-table":""},{default:p(()=>[t("div",ye,[t("div",null,[t("h1",Ve,A(r(e).name),1),t("h2",xe,A(r(e).artist),1),t("h2",we,A(r(e).genre),1)]),t("div",$e,[(o(!0),i(y,null,S(r(e).charts,a=>(o(),i(y,{key:a.db_id},[a.data?.difficulty!=0&&r(s).chartTable[a.chart]?(o(),b(F,{key:0,color:"info",label:`${r(s).chartTable[a.chart]} - ${r(C)(a.data?.difficulty,r(s).difficultyDenom)}`},null,8,["label"])):V("",!0)],64))),128))])])]),_:1}),c($,{icon:r(H),title:"Top Records",main:""},null,8,["icon"]),t("div",ke,[(o(!0),i(y,null,S(r(e).charts,a=>(o(),i(y,{key:a.db_id},[a.data?.difficulty!=0&&r(s).chartTable[a.chart]?(o(),b(j,{key:0,label:`${r(s).chartTable[a.chart]}`,"small-content":""},{default:p(()=>[E(A(a.records[0]?`${a.records[0]?.username} - ${a.records[0].points?.toLocaleString()}`:"Unclaimed"),1)]),_:2},1032,["label"])):V("",!0)],64))),128))]),t("div",Me,[c($,{icon:r(q),title:"All Scores",main:""},null,8,["icon"]),t("div",Ze,[d[1]||(d[1]=t("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Chart ",-1)),c(W,{modelValue:h.currentChart,"onUpdate:modelValue":d[0]||(d[0]=a=>h.currentChart=a),options:_.value},null,8,["modelValue","options"])])]),c(Z,{"has-table":""},{default:p(()=>[t("div",Se,[t("div",Ce,[c(U,{headers:f,items:M.value,onRowClicked:T},null,8,["items"])])])]),_:1})]),_:1})):V("",!0)]),_:1}))}};export{ze as default};
