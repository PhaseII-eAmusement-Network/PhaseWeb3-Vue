import{b as L,r as b,o as y,n as S,c as B,d as u,w as o,e as t,_ as P,i as l,h as i,J as f,g as _,K as h,j as x,F as V,k as F,t as d,l as p,s as v,ap as E,m as M}from"./index-DrhAnfmx.js";import{I as O}from"./PhMagnifyingGlass.vue-DFlf1iNF.js";import{I as j}from"./PhPlusCircle.vue-BArYMiHG.js";import{_ as N}from"./GeneralTable-CsIYovPk.js";import{_ as g}from"./FormField-BMxZ_1j7.js";import{_ as C}from"./FormControl-H_hSOdva.js";import{k as R,l as U}from"./admin-Oi9Ta1vk.js";const q={class:"grid md:grid-cols-2 gap-6"},G={class:"grid gap-4"},J={class:"md:flex w-full place-content-between"},K={class:"text-lg md:text-xl"},z={class:"text-md md:text-lg"},H={class:"text-md"},Q={class:"bg-slate-900 p-2 rounded-md mt-2 w-12 max-w-14 text-center"},T={class:"text-lg font-mono text-pink-700"},W={class:"flex align-middle mt-2 md:mt-0 max-h-12"},X={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},Y={class:"w-full"},ie={__name:"ArcadesView",setup(Z){const A=L(),c=b([]),I=[{text:"Name",value:"name",width:150,sortable:!0},{text:"Description",value:"description",width:150},{text:"Owners",value:"owners",width:150,sortable:!0},{text:"PASELI Enabled",value:"data.paseli_enabled",width:50,sortable:!0},{text:"Infinite PASELI",value:"data.paseli_infinite",width:50,sortable:!0},{text:"Beta Enabled",value:"data.is_beta",width:50,sortable:!0}];y(async()=>{$()});async function $(){try{const a=await R();var s=[];for(var e of a){if(e.timestamp){const w=new Date(e.timestamp*1e3);e.timestamp=w.toLocaleString()}e.owners&&(e.owners=e.owners.join(", ")),s.push(e)}c.value=s}catch(a){console.error("Failed to fetch client data:",a)}}const m=s=>{const e=s.id;A.push(`/arcade/${e}`)},n=S({filter:null});function k(){if(n.filter)return c.value.filter(s=>s.id.toString().toLowerCase().includes(n.filter.toLowerCase())||s.name.toLowerCase().includes(n.filter.toLowerCase())||s.description.toLowerCase().includes(n.filter.toLowerCase())||s.owners.toLowerCase().includes(n.filter.toLowerCase()))}const r=b(null);async function D(){const s=await U(r.value);if(s)m({id:s?.arcadeId});else{window.alert("Couldn't find machine.");return}}return(s,e)=>(u(),B(M,null,{default:o(()=>[t(P,null,{default:o(()=>[t(i,{class:"mb-6 p-1"},{default:o(()=>e[3]||(e[3]=[l("h1",{class:"text-3xl"},"Arcade Management",-1),l("p",{class:"text-sm text-gray-400"},"Enter an arcade to manage it",-1)])),_:1,__:[3]}),t(f,{icon:_(O),title:"Search Arcades",color:"text-amber-600",main:""},null,8,["icon"]),l("div",q,[t(i,{class:"mb-6"},{default:o(()=>[t(h,{color:"info",label:"Search",class:"mb-2"}),t(g,{label:"Search",help:"Search by ID, name, description, or owner.",class:"w-full"},{default:o(()=>[t(C,{modelValue:n.filter,"onUpdate:modelValue":e[0]||(e[0]=a=>n.filter=a),"model-value":n.filter},null,8,["modelValue","model-value"])]),_:1}),l("div",G,[(u(!0),x(V,null,F(k(),a=>(u(),x("div",{key:a.id,class:"bg-slate-800 p-4 rounded-xl"},[l("div",J,[l("div",null,[l("h1",K,d(a.name),1),l("h2",z,d(a.description),1),l("h2",H,"Managed by "+d(a.owners),1),l("div",Q,[l("h2",T,d(a.id),1)])]),l("div",W,[t(p,{label:"Open Arcade",color:"info",onClick:w=>m(a)},null,8,["onClick"])])])]))),128))])]),_:1}),t(i,{class:"mb-6","is-form":"",onSubmit:v(D,["prevent"])},{default:o(()=>[t(h,{color:"warning",label:"From PCBID",class:"mb-2"}),t(g,{label:"PCBID",help:"20 character ID for a machine.",class:"w-full"},{default:o(()=>[t(C,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value=a),name:"PCBID",required:"","model-value":r.value,minlength:20,maxlength:20},null,8,["modelValue","model-value"])]),_:1}),t(p,{color:"success",type:"submit",label:"Open Arcade"})]),_:1})]),t(f,{icon:_(E),title:"All Arcades",color:"text-blue-400",main:""},null,8,["icon"]),t(i,{"has-table":"",class:"mb-6"},{default:o(()=>[l("div",X,[l("div",Y,[t(N,{headers:I,items:c.value,onRowClicked:m},null,8,["items"]),e[4]||(e[4]=l("h1",{class:"mx-4 mt-1 mb-2 text-md lg:text-lg"}," Click row to open arcade ",-1))])])]),_:1}),t(f,{icon:_(j),title:"Create Arcade",color:"text-emerald-600",main:""},null,8,["icon"]),t(i,{"is-form":"",class:"row-span-1",onSubmit:e[2]||(e[2]=v(a=>s.createClient(),["prevent"]))},{default:o(()=>[t(p,{color:"info",small:!1,label:"Arcade Onboarding",to:"/admin/onboarding"})]),_:1})]),_:1})]),_:1}))}};export{ie as default};
