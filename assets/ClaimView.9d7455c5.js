import{b as S,r as C,s as D,c as o,e as w,w as n,f as e,V as $,k as _,W as f,g as i,aG as B,_ as v,x as V,i as h,H as A,Q as T,n as m,j as a,aH as F,F as M,t as p,a9 as I,p as R,q as L}from"./index.f464fe03.js";import{_ as N}from"./FormField.9c6f1753.js";import{_ as q}from"./FormControl.d02ec4de.js";import{f as G,g as H}from"./arcade.83e0f17d.js";const O={key:1},U={class:"text-2xl font-bold"},j={class:"text-xl mb-6"},E={class:"text-xl mb-6"},K={class:"mt-4"},Q={key:2},W={class:"text-xl mb-6"},Y={class:"mt-4"},z={key:3},J={class:"mt-4"},le={__name:"ClaimView",setup(Z){const b=S(),x=C(!1),t=C(null),d=D({PCBID:null}),c=C(null);async function P(){x.value=!0,t.value=await H(d.PCBID),x.value=!1}async function g(){const y=await G(d.PCBID);y||window.alert("Failed to takeover!"),y.status==="success"?c.value=!0:c.value=!1,b.userLoaded=!1,b.loadUser()}return(y,s)=>(o(),w(L,null,{default:n(()=>[e(R,null,{default:n(()=>[e($,{class:"mb-6","use-small":"","even-smaller":""}),t.value?m("",!0):(o(),_(M,{key:0},[e(f,{icon:i(B),title:"Claim an Arcade",main:""},null,8,["icon"]),e(v,{"is-form":"",class:"row-span-2 mb-6",onSubmit:s[1]||(s[1]=V(l=>P(),["prevent"]))},{footer:n(()=>[e(h,{type:"submit",color:"success",label:"Start Claim"}),x.value?(o(),w(A,{key:0,path:i(T),color:"text-yellow-500",class:"animate animate-spin"},null,8,["path"])):m("",!0)]),default:n(()=>[s[2]||(s[2]=a("h2",{class:"text-xl mb-6 lg:w-1/2"}," Claim an arcade using a PCBID. If the account already has an owner, you may not claim the arcade. ",-1)),e(N,{label:"PCBID",help:"A PCBID from the arcade you're wanting to claim."},{default:n(()=>[e(q,{modelValue:d.PCBID,"onUpdate:modelValue":s[0]||(s[0]=l=>d.PCBID=l),icon:i(F),name:"cardId",type:"pcbid",placeholder:"XXXXXXXXXXXXXXXXX",minlength:20,maxlength:20,required:""},null,8,["modelValue","icon"])]),_:1})]),_:1})],64)),t.value&&c.value==null?(o(),_("div",O,[e(f,{icon:i(B),title:"Confirm Merge",main:""},null,8,["icon"]),e(v,null,{default:n(()=>{var l,r,u,k,X;return[a("h2",U,p((r=(l=t.value)==null?void 0:l.arcade)==null?void 0:r.name),1),a("h3",j,p((k=(u=t.value)==null?void 0:u.arcade)==null?void 0:k.description),1),a("h2",E," This arcade has "+p((X=t.value)==null?void 0:X.count)+" machine(s). ",1),a("div",K,[e(h,{color:"success",label:"Start Takeover",onClick:g})])]}),_:1})])):m("",!0),c.value==!0?(o(),_("div",Q,[e(f,{icon:i(I),title:"Takeover Results",main:""},null,8,["icon"]),e(v,null,{default:n(()=>{var l,r,u;return[a("h2",W," \u2705 Successfully merged "+p((l=t.value)==null?void 0:l.count)+" machines. Yippie! ",1),a("div",Y,[e(h,{color:"success",label:"Go to Arcade",href:`#/arcade/${(u=(r=t.value)==null?void 0:r.arcade)==null?void 0:u.id}`},null,8,["href"])])]}),_:1})])):m("",!0),c.value==!1?(o(),_("div",z,[e(f,{icon:i(I),title:"Merge Results",main:""},null,8,["icon"]),e(v,null,{default:n(()=>[s[3]||(s[3]=a("h2",{class:"text-xl mb-6"},"\u274C Failed to merge. Please try again.",-1)),a("div",J,[e(h,{color:"warning",label:"Retry",onClick:g})])]),_:1})])):m("",!0)]),_:1})]),_:1}))}};export{le as default};
