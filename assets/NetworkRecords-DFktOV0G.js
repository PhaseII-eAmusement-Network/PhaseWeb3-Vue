import{l as k,m as w,aa as S,r as I,z as R,o as D,s as x,c as p,a as o,w as u,e as v,g as t,_ as N,b as f,d as c,f as B,a4 as F,p as l,F as g,h as V,n as G,t as m,q as T,L as A,k as C}from"./index-WESnALLw.js";import{_ as L}from"./FormControl-CIOYh4lm.js";import{_ as E}from"./GameHeader-B8eabQ2q.js";import{A as P}from"./music-BJyrxs2A.js";import{s as U,f as j}from"./scoreDataFilters-CKK1u78i.js";import"./PhGear.vue-BXxry7SV.js";import"./PhHouse.vue-ChI83qVp.js";const q={key:0,class:"md:w-1/3 md:text-right"},z={class:"md:flex w-full md:place-content-between"},M={class:"mb-4 md:mb-0 space-y-1"},W={class:"text-lg md:text-xl"},H={class:"text-md md:text-lg"},J={class:"grid md:flex gap-2 md:justify-end md:place-content-end"},K={key:0,class:"bg-gray-900 dark:bg-gray-700 p-4 rounded-lg"},O={class:"text-md md:text-lg"},ae={__name:"NetworkRecords",setup(Q){const y=k(),$=w();var _=y.params.game;const e=S(_);var d=I([]);const n=R({currentVersion:null});e||$.push({name:"ErrorPage",params:{catchAll:"404"}}),e.versions||(n.currentVersion=1),D(async()=>{try{const s=await P(_);d.value=s,e.versions&&!n.currentVersion&&(n.currentVersion=h.value.at(-1)?.id??null)}catch(s){console.error("Failed to fetch score data:",s)}});const h=x(()=>{if(!e.versions)return[];const s=new Set(d.value.map(r=>parseInt(r.version)));return e.versions.filter(r=>s.has(r.id))}),b=x(()=>n.currentVersion?d.value.filter(s=>parseInt(s.version)===n.currentVersion):d.value);return(s,r)=>(o(),p(C,null,{default:u(()=>[t(d)?(o(),p(N,{key:0},{default:u(()=>[f(E,{game:t(e)},null,8,["game"]),f(B,{icon:t(F),title:"Top Records",main:""},{default:u(()=>[t(e).versions?(o(),c("div",q,[r[1]||(r[1]=l("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),f(L,{modelValue:n.currentVersion,"onUpdate:modelValue":r[0]||(r[0]=i=>n.currentVersion=i),options:h.value.slice().reverse()},null,8,["modelValue","options"])])):v("",!0)]),_:1},8,["icon"]),(o(!0),c(g,null,V(b.value,i=>(o(),p(G,{key:i.id,class:"mb-6"},{default:u(()=>[l("div",z,[l("div",M,[l("h1",W,m(i.name),1),l("h2",H,m(i.artist),1),f(T,{label:"View Song",color:"info",to:`/games/${t(_)}/song/${i.id}`},null,8,["to"])]),l("div",J,[(o(!0),c(g,null,V(i.charts,a=>(o(),c(g,{key:a.db_id},[t(U)(a.data?.difficulty,t(e).chartTable,a.chart)?(o(),c("div",K,[l("h2",O,m(t(e).chartTable[a.chart])+" - "+m(t(j)(a.data?.difficulty,t(e).difficultyDenom)),1),A(" "+m(a.record?`${a.record?.username} - ${a.record.points?.toLocaleString()}`:"Unclaimed"),1)])):v("",!0)],64))),128))])])]),_:2},1024))),128))]),_:1})):v("",!0)]),_:1}))}};export{ae as default};
