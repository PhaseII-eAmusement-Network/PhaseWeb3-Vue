import{a as G,b as S,a4 as B,r as x,n as y,D as N,o as j,c as m,d as o,w as i,e as r,_ as E,f as _,g as f,j as v,i as t,J as $,h,F as I,k as P,t as p,l as A,m as U}from"./index-Dk9pwBdW.js";import{I as J}from"./PhPlusCircle.vue-DkBJXA31.js";import{_ as M,G as q}from"./GameHeader-Cm-HW9wj.js";import{_ as z}from"./ProfileCard-BQCiLOdx.js";import{_ as R}from"./FormControl-B19TdIcj.js";import{_ as H}from"./FormField-Cvxm0MqE.js";import{A as K,d as O,a as Q}from"./profile-DncFcBYb.js";import{d as T}from"./userData-DZYdegtD.js";import"./PhGear.vue-DnXNk9Uc.js";import"./PhHouse.vue-BMje50R0.js";const W={key:0,class:"w-full md:flex md:-mt-[75px] mb-4 place-content-end"},X={class:"md:w-1/3 md:text-right"},Y={key:1,class:"w-full"},Z={class:"grid gap-4"},ee={class:"flex w-full place-content-between"},se={class:"text-lg md:text-xl"},te={class:"text-md md:text-lg font-mono"},le={class:"flex align-middle"},oe={class:"grid gap-3"},re={class:"flex justify-between items-center"},ae={class:"flex"},ne={class:"grid"},ie={class:"text-lg"},ce={class:"text-md font-mono"},de={class:"text-2xl"},ke={__name:"RivalsView",setup(ue){const C=G(),F=S();var c=null,d=null;c=C.params.game,d=B(c);const a=x(null),g=x(null),V=x([]),l=y({currentVersion:null});N(()=>l.currentVersion,()=>{w(),k(),b()}),j(async()=>{b(),await w(),k()}),d.versions||(l.currentVersion=1);async function w(){try{a.value=null;const e=await K(c,l.currentVersion);a.value=e,e&&!l.currentVersion&&(l.currentVersion=e.versions[e.versions.length-1])}catch(e){console.error("Failed to fetch user profile data:",e)}}async function k(){try{g.value=null;const e=await O(c,l.currentVersion);g.value=e}catch(e){console.error("Failed to fetch user link data:",e)}}async function b(){try{const e=await Q(c,l.currentVersion);V.value=e}catch(e){console.error("Failed to fetch profile data:",e)}}function L(e){var n=[];for(const s of d.versions)e.includes(s.id)&&n.push(s);return n}const u=y({filter:null});d||F.push({name:"ErrorPage",params:{catchAll:"404"}});function D(){if(u.filter)return V.value.filter(e=>e.username.toLowerCase().includes(u.filter.toLowerCase())||e.extid.toString().toLowerCase().includes(u.filter.toLowerCase()))}return(e,n)=>(o(),m(U,null,{default:i(()=>[r(E,null,{default:i(()=>[r(M,{game:f(d),version:l.currentVersion},{default:i(()=>[f(d).versions&&a.value?(o(),v("div",W,[t("div",X,[n[2]||(n[2]=t("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),r(R,{modelValue:l.currentVersion,"onUpdate:modelValue":n[0]||(n[0]=s=>l.currentVersion=s),options:L(a.value.versions)},null,8,["modelValue","options"])])])):_("",!0),a.value?(o(),v("div",Y,[r(z,{game:f(c),version:l.currentVersion,profile:a.value},null,8,["game","version","profile"])])):_("",!0)]),_:1},8,["game","version"]),r($,{icon:f(J),title:"Add a Rival",main:""},null,8,["icon"]),l.currentVersion?(o(),m(h,{key:0,class:"mb-6"},{default:i(()=>[r(H,{label:"Search",help:"Search by username or Rival ID to add a rival.",class:"w-full md:w-1/3"},{default:i(()=>[r(R,{modelValue:u.filter,"onUpdate:modelValue":n[1]||(n[1]=s=>u.filter=s),"model-value":u.filter,placeholder:"1234-5678"},null,8,["modelValue","model-value"])]),_:1}),t("div",Z,[(o(!0),v(I,null,P(D(),s=>(o(),v("div",{key:s.id,class:"bg-slate-800 p-4 rounded-xl"},[t("div",ee,[t("div",null,[t("h1",se,p(s.username),1),t("h2",te,p(f(T)(s.extid)),1)]),t("div",le,[r(A,{label:"Add Rival",color:"success",disabled:s.userId==a.value?.userId,tooltip:"penis"},null,8,["disabled"])])])]))),128))])]),_:1})):_("",!0),r($,{icon:f(q),title:"Rivals",main:""},null,8,["icon"]),l.currentVersion?(o(),m(h,{key:1,class:"mb-6"},{default:i(()=>[t("div",oe,[(o(!0),v(I,null,P(a.value?.rivals,s=>(o(),m(h,{key:s.id},{default:i(()=>[t("div",re,[t("div",ae,[t("div",ne,[t("h1",ie,p(s.name),1),t("h2",ce,p(s.rivalID),1)])]),r(A,{label:"Remove Rival",color:"danger"})])]),_:2},1024))),128)),a.value?.rivals?_("",!0):(o(),m(h,{key:0},{default:i(()=>[t("h1",de,p(g.value),1)]),_:1}))])]),_:1})):_("",!0)]),_:1})]),_:1}))}};export{ke as default};
