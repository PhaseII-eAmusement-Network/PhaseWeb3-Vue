import{r as _,n as $,o as X,c as g,d as r,w as i,e as s,_ as k,i as t,j as p,f as w,I as A,J as h,g as l,h as D,s as S,l as d,v as V,a0 as F,y as E,F as N,k as P,t as T,m as B,a1 as L,a2 as j,a3 as G}from"./index-DrhAnfmx.js";import{I as M}from"./PhCreditCard.vue-DyRsXBbr.js";import{I as O}from"./PhPlusCircle.vue-BArYMiHG.js";import{I as U}from"./PhSpinnerBall.vue-CoraMPmg.js";import{d as v}from"./userData-DZYdegtD.js";import{_ as q}from"./FormField-BMxZ_1j7.js";import{_ as z}from"./FormControl-H_hSOdva.js";const H={class:"grid md:grid-cols-2 mb-2"},J={key:0,class:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 3xl:grid-cols-6 4xl:grid-cols-7 gap-6"},W={class:"flex justify-between md:grid md:gap-2 mb-4 items-center"},Z=["src"],K={class:"text-xl text-center font-mono"},Q={class:"grid grid-cols-3 md:grid-cols-2 gap-2"},ne={__name:"CardsView",setup(R){const b="https://cdn.phaseii.network/file/PhaseII/web-assets";var c=_([]);const m=_(!1),n=$({newCard:null});async function u(){c.value=null;try{const a=await L();c.value=a}catch(a){console.error("Failed to fetch card data:",a)}}X(async()=>{await u()});function x(a){var e=a.target.value;e=e.replace(/[^A-Za-z0-9]/g,""),e=e.toUpperCase().replace(/(.{4})/g,"$1-").replace(/-$/,""),n.newCard=e}async function y(){m.value=!0,(await j(n.newCard)).status=="success"&&(n.newCard=null,m.value=!1,await u())}async function I(a){(await G(v(a))).status=="success"&&await u()}const f=a=>{navigator.clipboard.writeText(a).then(()=>{alert("Copied to clipboard!")}).catch(()=>{alert("Failed to copy to clipboard!")})};return(a,e)=>(r(),g(B,null,{default:i(()=>[s(k,null,{default:i(()=>[s(A,{class:"mb-6","use-small":"","even-smaller":""}),s(h,{icon:l(O),title:"Add a Card",main:""},null,8,["icon"]),s(D,{"is-form":"",class:"row-span-2 mb-6",onSubmit:e[1]||(e[1]=S(o=>y(),["prevent"]))},{footer:i(()=>[s(d,{type:"submit",color:"success",label:"Add"}),m.value?(r(),g(V,{key:0,icon:l(U),color:"text-yellow-500",class:"animate animate-spin"},null,8,["icon"])):w("",!0)]),default:i(()=>[s(q,{label:"Card ID",help:"The 16 character ACCESS CODE. If your card is dated after 2016, you'll need to get the ACCESS CODE from a game."},{default:i(()=>[s(z,{modelValue:n.newCard,"onUpdate:modelValue":e[0]||(e[0]=o=>n.newCard=o),icon:l(M),name:"cardId",type:"card",placeholder:"XXXX-XXXX-XXXX-XXXX",minlength:19,maxlength:19,required:"",onInput:x},null,8,["modelValue","icon"])]),_:1})]),_:1}),t("div",H,[s(h,{icon:l(F),title:"Login Cards",main:""},null,8,["icon"]),e[2]||(e[2]=t("div",{class:"text-xl md:text-right"},[t("h4",null,"AC = Web Access Code"),t("h4",null,[E("NFC-ID = Internal ID for "),t("samp",null,"card0.txt")])],-1))]),l(c)?(r(),p("div",J,[(r(!0),p(N,null,P(l(c),o=>(r(),p("div",{key:o.id,class:"grid dark:bg-slate-900/70 rounded-2xl p-5"},[t("div",W,[t("img",{src:`${l(b)}/passes/generic.webp`,class:"w-24 md:w-auto"},null,8,Z),t("h1",K,T(l(v)(o.encoded)),1)]),t("div",Q,[s(d,{color:"info",label:"Copy AC",onClick:C=>f(o.encoded)},null,8,["onClick"]),s(d,{color:"info",label:"Copy NFC-ID",onClick:C=>f(o.id)},null,8,["onClick"]),s(d,{color:"danger",label:"Delete",onClick:C=>I(o.encoded)},null,8,["onClick"])])]))),128))])):w("",!0)]),_:1})]),_:1}))}};export{ne as default};
