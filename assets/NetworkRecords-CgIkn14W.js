import{a as F,b as I,a7 as R,r as B,p as D,o as G,al as $,c as p,d as s,w as u,f as v,g as l,_ as L,e as f,j as c,P,bU as T,i,F as g,k,h as U,t as m,l as j,I as A,n as C}from"./index-CHivKhhP.js";import{_ as E}from"./FormControl-BLuW9GWW.js";import{_ as M}from"./GameHeader-CbS6z4E_.js";import{b as W}from"./music-BegIU2Dv.js";import"./sources-0lyug9Pk.js";const q={key:0,class:"md:w-1/3 md:text-right"},z={class:"md:flex w-full md:place-content-between"},H={class:"mb-4 md:mb-0 space-y-1"},J={class:"text-lg md:text-xl"},K={class:"text-md md:text-lg"},O={class:"grid md:flex gap-2 md:justify-end md:place-content-end"},Q={key:0,class:"bg-gray-900 dark:bg-gray-700 p-4 rounded-lg"},X={class:"text-md md:text-lg"},ae={__name:"NetworkRecords",setup(Y){const w=F(),S=I();var _=w.params.game;const t=R(_);var d=B([]);const r=D({currentVersion:null});t||S.push({name:"ErrorPage",params:{catchAll:"404"}}),t.versions||(r.currentVersion=1),G(async()=>{var a;try{const e=await W(_);d.value=e,t.versions&&!r.currentVersion&&(r.currentVersion=((a=h.value.at(-1))==null?void 0:a.id)??null)}catch(e){console.error("Failed to fetch score data:",e)}});const h=$(()=>{if(!t.versions)return[];const a=new Set(d.value.map(e=>e.version));return t.versions.filter(e=>a.has(e.id))}),N=$(()=>r.currentVersion?d.value.filter(a=>a.version===r.currentVersion):d.value);return(a,e)=>(s(),p(C,null,{default:u(()=>[l(d)?(s(),p(L,{key:0},{default:u(()=>[f(M,{game:l(t)},null,8,["game"]),f(P,{icon:l(T),title:"Top Records",main:""},{default:u(()=>[l(t).versions?(s(),c("div",q,[e[1]||(e[1]=i("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),f(E,{modelValue:r.currentVersion,"onUpdate:modelValue":e[0]||(e[0]=o=>r.currentVersion=o),options:h.value.slice().reverse()},null,8,["modelValue","options"])])):v("",!0)]),_:1},8,["icon"]),(s(!0),c(g,null,k(N.value,o=>(s(),p(U,{key:o.id,class:"mb-6"},{default:u(()=>[i("div",z,[i("div",H,[i("h1",J,m(o.name),1),i("h2",K,m(o.artist),1),f(j,{label:"View Song",color:"info",href:`/#/games/${l(_)}/song/${o.id}`},null,8,["href"])]),i("div",O,[(s(!0),c(g,null,k(o.charts,n=>{var x,V,b,y;return s(),c(g,{key:n.db_id},[((x=n.data)==null?void 0:x.difficulty)!=0?(s(),c("div",Q,[i("h2",X,m(l(t).chartTable[n.chart])+" - "+m((V=n.data)==null?void 0:V.difficulty),1),A(" "+m(n.record?`${(b=n.record)==null?void 0:b.username} - ${(y=n.record.points)==null?void 0:y.toLocaleString()}`:"Unclaimed"),1)])):v("",!0)],64)}),128))])])]),_:2},1024))),128))]),_:1})):v("",!0)]),_:1}))}};export{ae as default};
