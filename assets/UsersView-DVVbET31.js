import{b,r as v,o as g,p as k,c as U,d,w as o,e as a,_ as $,h as c,i as e,j as f,F as C,k as y,t as r,l as L,P as D,g as A,aL as B,n as V}from"./index-CHivKhhP.js";import{_ as F}from"./GeneralTable-Dm8yzA2j.js";import{_ as S}from"./FormField-vtioLqMT.js";import{_ as I}from"./FormControl-BLuW9GWW.js";import{i as j}from"./admin-YL_-tKB5.js";const M={class:"grid gap-4"},N={class:"md:flex w-full place-content-between"},O={class:"text-lg md:text-xl"},P={class:"text-md md:text-lg"},R={class:"text-md"},E={class:"bg-slate-900 p-2 rounded-md mt-2 w-14 max-w-16 text-center"},T={class:"text-lg font-mono text-pink-700"},q={class:"flex align-middle mt-2 md:mt-0 max-h-16"},z={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},G={class:"w-full"},Z={__name:"UsersView",setup(H){const h=b(),i=v([]),x=[{text:"User ID",value:"id",width:20,sortable:!0},{text:"Username",value:"username",width:150,sortable:!0},{text:"Admin",value:"admin",width:120,sortable:!0},{text:"Banned",value:"banned",width:120,sortable:!0},{text:"Discord Linked",value:"data.discord.linked",width:120,sortable:!0},{text:"Tachi Linked",value:"data.tachi.linked",width:120,sortable:!0}];g(async()=>{p()});async function p(){try{const t=await j();var l=[];for(var s of t)s.username||(s.username="Unclaimed Account"),l.push(s);i.value=l}catch(t){console.error("Failed to fetch user data:",t)}}const u=l=>{const s=l.id;h.push(`/profiles/${s}`)},n=k({filter:null});function w(){return n.filter?i.value.filter(l=>l.id.toString().toLowerCase().includes(n.filter.toLowerCase())||l.username.toLowerCase().includes(n.filter.toLowerCase())).slice(0,25):[]}return(l,s)=>(d(),U(V,null,{default:o(()=>[a($,null,{default:o(()=>[a(c,{class:"mb-6 p-1"},{default:o(()=>s[1]||(s[1]=[e("h1",{class:"text-3xl"},"User Management",-1),e("p",{class:"text-sm text-gray-400"},"Click a row to open User",-1)])),_:1}),a(c,{class:"mb-6"},{default:o(()=>[a(S,{label:"Search",help:"Search by ID or username.",class:"w-full md:w-1/3"},{default:o(()=>[a(I,{modelValue:n.filter,"onUpdate:modelValue":s[0]||(s[0]=t=>n.filter=t),"model-value":n.filter},null,8,["modelValue","model-value"])]),_:1}),e("div",M,[(d(!0),f(C,null,y(w(),t=>{var m,_;return d(),f("div",{key:t.id,class:"bg-slate-800 p-4 rounded-xl"},[e("div",N,[e("div",null,[e("h1",O,r(t.username),1),e("h2",P," User "+r(t.banned?"is":"isn't")+" banned. ",1),e("h2",R," Discord "+r((_=(m=t.data)==null?void 0:m.discord)!=null&&_.linked?"is":"isn't")+" linked. ",1),e("div",E,[e("h2",T,r(t.id),1)])]),e("div",q,[a(L,{label:"Open User",color:"info",onClick:J=>u(t)},null,8,["onClick"])])])])}),128))])]),_:1}),a(D,{icon:A(B),title:"All Users",color:"text-blue-400",main:""},null,8,["icon"]),a(c,{"has-table":"",class:"mb-6"},{default:o(()=>[e("div",z,[e("div",G,[a(F,{headers:x,items:i.value,"has-avatar":!0,onRowClicked:u},null,8,["items"])])])]),_:1})]),_:1})]),_:1}))}};export{Z as default};
