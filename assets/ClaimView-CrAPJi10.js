import{R as W,S as k,U as C,j as c,d as s,V as H,f as _,i as a,W as Y,a4 as V,r as y,o as K,c as w,g,w as u,e as l,h as b,a5 as z,t as x,l as Z,a6 as B,F as P,k as j,n as F,_ as Q,I as e0,J as S,a7 as a0,s as l0,v as t0,y as N,a8 as s0,p as o0,m as n0,a9 as r0,aa as i0}from"./index-Dk9pwBdW.js";import{I as O}from"./PhCreditCard.vue-QNlK55nF.js";import{G as u0}from"./PhPassword.vue-tD9sr3yA.js";import{I as c0}from"./PhSpinnerBall.vue-Ci9aK4Ly.js";import{F as U}from"./PhUnite.vue-C26zEKAg.js";import{_ as I}from"./FormField-Cvxm0MqE.js";import{_ as T}from"./FormControl-B19TdIcj.js";import{_ as E}from"./FormCheckRadio-ZJiFBCoe.js";import{A as d0}from"./profile-DncFcBYb.js";const m0=["width","height","fill","transform"],g0={key:0},f0=a("path",{d:"M92.38,38.05A12,12,0,0,1,101,23.42a108,108,0,0,1,54,0,12,12,0,1,1-6,23.23,84,84,0,0,0-42,0A12,12,0,0,1,92.38,38.05ZM32.29,113.87a12.2,12.2,0,0,0,3.2.43,12,12,0,0,0,11.56-8.8,84,84,0,0,1,21-36.35A12,12,0,1,0,50.94,52.34a108.1,108.1,0,0,0-27,46.76A12,12,0,0,0,32.29,113.87ZM149,209.35a84,84,0,0,1-42,0,12,12,0,1,0-6,23.23,108,108,0,0,0,54,0,12,12,0,1,0-6-23.23Zm59.95-103.83a12,12,0,0,0,23.12-6.42,108,108,0,0,0-27-46.78A12,12,0,1,0,188,69.15,84,84,0,0,1,208.94,105.52Zm23.15,51.39a107.86,107.86,0,0,1-31.86,51.38,12,12,0,0,1-18.72-3.48,60,60,0,0,0-107,0,12,12,0,0,1-8.5,6.36,12.48,12.48,0,0,1-2.19.2,12,12,0,0,1-8-3.08A107.85,107.85,0,0,1,23.91,156.9,12,12,0,0,1,47,150.49,83.58,83.58,0,0,0,62,180a83.46,83.46,0,0,1,29-23.47,52,52,0,1,1,74,0A83.59,83.59,0,0,1,194,180a83.73,83.73,0,0,0,15-29.49,12,12,0,0,1,23.13,6.42ZM128,148a28,28,0,1,0-28-28A28,28,0,0,0,128,148Z"},null,-1),p0=[f0],v0={key:1},_0=a("path",{d:"M224,128a95.76,95.76,0,0,1-31.8,71.37A72,72,0,0,0,128,160a40,40,0,1,0-40-40,40,40,0,0,0,40,40,72,72,0,0,0-64.2,39.37h0A96,96,0,1,1,224,128Z",opacity:"0.2"},null,-1),h0=a("path",{d:"M96.26,37A8,8,0,0,1,102,27.29a104.11,104.11,0,0,1,52,0,8,8,0,0,1-2,15.75,8.15,8.15,0,0,1-2-.26,88,88,0,0,0-44,0A8,8,0,0,1,96.26,37ZM33.35,110a8,8,0,0,0,9.85-5.57,87.88,87.88,0,0,1,22-38.09A8,8,0,0,0,53.79,55.14a104,104,0,0,0-26,45A8,8,0,0,0,33.35,110ZM150,213.22a88,88,0,0,1-44,0,8,8,0,0,0-4,15.49,104.11,104.11,0,0,0,52,0,8,8,0,0,0-4-15.49Zm62.8-108.77a8,8,0,0,0,15.42-4.28,104,104,0,0,0-26-45,8,8,0,1,0-11.41,11.21A88.14,88.14,0,0,1,212.79,104.45Zm15.44,51.39a103.68,103.68,0,0,1-30.68,49.47A8,8,0,0,1,185.07,203a64,64,0,0,0-114.14,0,8,8,0,0,1-5.67,4.23,8.11,8.11,0,0,1-1.46.14,8,8,0,0,1-5.35-2.05,103.74,103.74,0,0,1-30.68-49.49,8,8,0,0,1,15.42-4.27,87.58,87.58,0,0,0,19,34.88,79.57,79.57,0,0,1,36.1-28.77,48,48,0,1,1,59.38,0,79.57,79.57,0,0,1,36.1,28.77,87.58,87.58,0,0,0,19-34.88,8,8,0,1,1,15.42,4.28ZM128,152a32,32,0,1,0-32-32A32,32,0,0,0,128,152Z"},null,-1),y0=[_0,h0],A0={key:2},M0=a("path",{d:"M96.26,37A8,8,0,0,1,102,27.29a104.11,104.11,0,0,1,52,0,8,8,0,0,1-2,15.75,8.15,8.15,0,0,1-2-.26,88,88,0,0,0-44,0A8,8,0,0,1,96.26,37ZM33.35,110a8,8,0,0,0,9.85-5.57,88,88,0,0,1,22-38.09A8,8,0,0,0,53.79,55.14a104.05,104.05,0,0,0-26,45A8,8,0,0,0,33.35,110Zm179.44-5.56a8,8,0,0,0,15.42-4.28,104,104,0,0,0-26-45,8,8,0,1,0-11.41,11.22A88,88,0,0,1,212.79,104.45ZM222.66,146a8,8,0,0,0-9.85,5.58,87.61,87.61,0,0,1-19,34.83A79.75,79.75,0,0,0,172,165.11a4,4,0,0,0-4.83.31,59.81,59.81,0,0,1-78.27,0,4,4,0,0,0-4.84-.31,79.52,79.52,0,0,0-22,21.12,87.7,87.7,0,0,1-18.83-34.67,8,8,0,0,0-15.42,4.28,104.07,104.07,0,0,0,200.46,0A8,8,0,0,0,222.66,146ZM128,164a44,44,0,1,0-44-44A44.05,44.05,0,0,0,128,164Z"},null,-1),w0=[M0],x0={key:3},b0=a("path",{d:"M98.19,36.54a6,6,0,0,1,4.31-7.31,102,102,0,0,1,51,0,6,6,0,1,1-3,11.61,90,90,0,0,0-45,0A6,6,0,0,1,98.19,36.54Zm-64.3,71.54a5.88,5.88,0,0,0,1.6.22,6,6,0,0,0,5.78-4.4A90,90,0,0,1,63.78,65a6,6,0,1,0-8.56-8.41A102.12,102.12,0,0,0,29.7,100.7,6,6,0,0,0,33.89,108.08ZM150.5,215.15a90,90,0,0,1-45,0,6,6,0,1,0-3,11.61,102,102,0,0,0,51,0,6,6,0,0,0-3-11.62Zm64.22-111.24a6,6,0,0,0,5.78,4.4,5.88,5.88,0,0,0,1.6-.22,6,6,0,0,0,4.18-7.38,102,102,0,0,0-25.49-44.18,6,6,0,0,0-8.55,8.41A90.11,90.11,0,0,1,214.72,103.91ZM226.3,155.3a101.75,101.75,0,0,1-30.08,48.53,6,6,0,0,1-9.37-1.74,66,66,0,0,0-117.7,0,6,6,0,0,1-4.26,3.18,5.74,5.74,0,0,1-1.09.1,6,6,0,0,1-4-1.54A101.74,101.74,0,0,1,29.7,155.3a6,6,0,1,1,11.56-3.21,89.79,89.79,0,0,0,21.2,37.59,77.56,77.56,0,0,1,40-31.43,46,46,0,1,1,51,0,77.56,77.56,0,0,1,40,31.43,89.7,89.7,0,0,0,21.2-37.58,6,6,0,1,1,11.56,3.2ZM128,154a34,34,0,1,0-34-34A34,34,0,0,0,128,154Z"},null,-1),Z0=[b0],$0={key:4},k0=a("path",{d:"M96.26,37A8,8,0,0,1,102,27.29a104.11,104.11,0,0,1,52,0,8,8,0,0,1-2,15.75,8.15,8.15,0,0,1-2-.26,88,88,0,0,0-44,0A8,8,0,0,1,96.26,37ZM33.35,110a8,8,0,0,0,9.85-5.57,87.88,87.88,0,0,1,22-38.09A8,8,0,0,0,53.8,55.14a103.92,103.92,0,0,0-26,45A8,8,0,0,0,33.35,110ZM150,213.22a88,88,0,0,1-44,0,8,8,0,0,0-4,15.49,104.11,104.11,0,0,0,52,0,8,8,0,0,0-4-15.49Zm62.8-108.77a8,8,0,0,0,15.42-4.28,104,104,0,0,0-26-45,8,8,0,1,0-11.41,11.21A88.14,88.14,0,0,1,212.79,104.45Zm15.44,51.39a103.68,103.68,0,0,1-30.68,49.47A8,8,0,0,1,185.07,203a64,64,0,0,0-114.14,0,8,8,0,0,1-12.48,2.32,103.74,103.74,0,0,1-30.68-49.49,8,8,0,0,1,15.42-4.27,87.58,87.58,0,0,0,19,34.88,79.57,79.57,0,0,1,36.1-28.77,48,48,0,1,1,59.38,0,79.57,79.57,0,0,1,36.1,28.77,87.58,87.58,0,0,0,19-34.88,8,8,0,1,1,15.42,4.28ZM128,152a32,32,0,1,0-32-32A32,32,0,0,0,128,152Z"},null,-1),C0=[k0],S0={key:5},I0=a("path",{d:"M100.13,36A4,4,0,0,1,103,31.17a100.09,100.09,0,0,1,50,0,4,4,0,0,1-1,7.88,4.36,4.36,0,0,1-1-.13,92,92,0,0,0-46,0A4,4,0,0,1,100.13,36ZM34.42,106.16a4,4,0,0,0,4.92-2.79,91.92,91.92,0,0,1,23-39.82,4,4,0,0,0-5.71-5.61,100.15,100.15,0,0,0-25,43.3A4,4,0,0,0,34.42,106.16ZM151,217.09a92,92,0,0,1-46,0,4,4,0,0,0-2,7.75,100,100,0,0,0,50,0,4,4,0,1,0-2-7.74Zm65.65-113.71a4,4,0,1,0,7.7-2.14,100.08,100.08,0,0,0-25-43.31,4,4,0,1,0-5.71,5.61A92,92,0,0,1,216.65,103.38Zm7.73,51.39a99.77,99.77,0,0,1-29.5,47.57,4,4,0,0,1-6.24-1.16,68,68,0,0,0-121.28,0,4,4,0,0,1-2.83,2.12,3.61,3.61,0,0,1-.73.07,4,4,0,0,1-2.68-1,99.8,99.8,0,0,1-29.5-47.58,4,4,0,1,1,7.71-2.13A91.89,91.89,0,0,0,62.8,192.91a75.66,75.66,0,0,1,44.54-34.08,44,44,0,1,1,41.32,0,75.66,75.66,0,0,1,44.54,34.08,91.83,91.83,0,0,0,23.47-40.28,4,4,0,0,1,7.71,2.14ZM128,156a36,36,0,1,0-36-36A36,36,0,0,0,128,156Z"},null,-1),V0=[I0],P0={name:"PhUserCircleDashed"},X0=W({...P0,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(A){const m=A,r=k("weight","regular"),f=k("size","1em"),p=k("color","currentColor"),o=k("mirrored",!1),t=C(()=>m.weight??r),d=C(()=>m.size??f),v=C(()=>m.color??p),h=C(()=>m.mirrored!==void 0?m.mirrored?"scale(-1, 1)":void 0:o?"scale(-1, 1)":void 0);return(M,X)=>(s(),c("svg",Y({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:d.value,height:d.value,fill:v.value,transform:h.value},M.$attrs),[H(M.$slots,"default"),t.value==="bold"?(s(),c("g",g0,p0)):t.value==="duotone"?(s(),c("g",v0,y0)):t.value==="fill"?(s(),c("g",A0,w0)):t.value==="light"?(s(),c("g",x0,Z0)):t.value==="regular"?(s(),c("g",$0,C0)):t.value==="thin"?(s(),c("g",S0,V0)):_("",!0)],16,m0))}}),D0={class:"grid grid-cols-1 gap-3"},F0={class:"flex gap-4 items-center"},N0={class:"text-2xl"},O0={class:"font-light text-xl"},U0={class:"space-x-2 mt-6"},T0={__name:"MergeModal",props:{userId:{type:Number,default:null},game:{type:String,default:null},settings:{type:Object,default:null}},emits:["saveMerge","closeModal"],setup(A,{emit:m}){const r=A,f=m,p=V(r.game),o=y({}),t=y(r.settings?.scores??!1);K(async()=>{const v=await d0(r.game,null,r.userId);o.value=v});function d(){f("saveMerge",{game:r.game,scores:t.value})}return(v,h)=>g(p)&&o.value?(s(),w(B,{key:0,transparent:"",onOverlayClick:h[1]||(h[1]=M=>f("closeModal"))},{default:u(()=>[l(b,{class:"shadow-lg max-h-modal w-11/12 md:w-3/5 lg:w-2/5 xl:w-4/12 z-50 text-white/90"},{default:u(()=>[a("div",D0,[a("div",F0,[l(z,{path:g(p).icon},null,8,["path"]),a("h1",N0,x(g(p).name),1)]),a("div",null,[a("h2",O0,x(o.value.name)+" - "+x(o.value.stats?.total_plays??0)+" Plays ",1)]),l(I,{label:"Scores",help:"Transfer all scores from this account to yours. This will not erase your current scores."},{default:u(()=>[l(E,{modelValue:t.value,"onUpdate:modelValue":h[0]||(h[0]=M=>t.value=M),name:"scores","input-value":t.value,type:"switch"},null,8,["modelValue","input-value"])]),_:1}),a("div",U0,[l(Z,{color:"success",label:"Save",onClick:d})])])]),_:1})]),_:1})):_("",!0)}},z0={class:"grid grid-cols-1 gap-3"},B0={key:0,class:"flex gap-4 items-center"},j0={class:"text-2xl"},E0={class:"text-lg"},R0={class:"space-x-2 mt-6"},G0={__name:"ConfirmMergeModal",props:{settings:{type:Object,default:null}},emits:["saveMerge","closeModal"],setup(A,{emit:m}){const r=m;function f(){r("saveMerge")}return(p,o)=>(s(),w(B,{transparent:"",onOverlayClick:o[0]||(o[0]=t=>r("closeModal"))},{default:u(()=>[l(b,{class:"shadow-lg max-h-modal w-11/12 md:w-3/5 lg:w-2/5 xl:w-4/12 z-50 text-white/90"},{default:u(()=>[a("div",z0,[o[1]||(o[1]=a("h1",{class:"text-2xl font-bold"},"Merge Overview",-1)),(s(!0),c(P,null,j(Object.keys(A.settings),t=>(s(),c(P,{key:t},[t!=="card"?(s(),c("div",B0,[l(z,{path:g(V)(t)?.icon},null,8,["path"]),a("div",null,[a("h1",j0,x(g(V)(t)?.name),1),a("h2",E0,x(A.settings[t]?.scores?"✅":"❌")+" Transfer Scores ",1)])])):_("",!0)],64))),128)),a("div",null,[a("span",null,x(A.settings?.card?"✅":"❌")+" Transfer Card",1)]),a("div",R0,[l(Z,{color:"success",label:"Save",onClick:f})])])]),_:1})]),_:1}))}},J0={key:1},q0={class:"grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-4 gap-4 mb-6"},L0={class:"mt-4"},W0={key:2},H0={class:"text-xl mb-6"},Y0={class:"mt-4"},K0={key:3},Q0={class:"mt-4"},u1={__name:"ClaimView",setup(A){const m=y(!1),r=y(null),f=y(!1),p=y(!1),o=F({cardId:null,pin:null}),t=y({game:null,scores:!1}),d=F({card:!0}),v=y(null),h=y(0);function M(i){var e=i.target.value;e=e.replace(/[^A-Za-z0-9]/g,""),e=e.toUpperCase().replace(/(.{4})/g,"$1-").replace(/-$/,""),o.cardId=e}function X(i){i.target.value=i.target.value.replace(/\D/g,"")}async function R(){m.value=!0,r.value=await r0(o.cardId,o.pin),m.value=!1}function G(i){f.value=!1,t.value.game=i,f.value=!0}function D(){p.value=!0}function J(i){var e=[];for(const n of i){const $=V(n.game);$&&!$.skip&&e.push(n)}return e.sort(function(n,$){return $.data.last_play_timestamp-n.data.last_play_timestamp}),e}function q({game:i,scores:e}){d[i]={scores:e},f.value=!1,t.value={game:null,scores:!1,data:!1}}async function L(){const i=await i0(o.cardId,o.pin,d);p.value=!1,i||window.alert("Failed to merge!"),i.status==="success"?(v.value=!0,h.value=i.count??0):v.value=!1}return(i,e)=>(s(),w(n0,null,{default:u(()=>[l(Q,null,{default:u(()=>[l(e0,{class:"mb-6","use-small":"","even-smaller":""}),r.value?_("",!0):(s(),c(P,{key:0},[l(S,{icon:g(a0),title:"Claim a Profile",main:""},null,8,["icon"]),l(b,{"is-form":"",class:"row-span-2 mb-6",onSubmit:e[2]||(e[2]=l0(n=>R(),["prevent"]))},{footer:u(()=>[l(Z,{type:"submit",color:"success",label:"Start Claim"}),m.value?(s(),w(t0,{key:0,icon:g(c0),color:"text-yellow-500",class:"animate animate-spin"},null,8,["icon"])):_("",!0)]),default:u(()=>[e[6]||(e[6]=a("h2",{class:"text-xl mb-6 lg:w-1/2"}," If you registered a card in game and need to claim it, you may do so here. Please note that the account cannot already be claimed! ",-1)),l(I,{label:"Card ID",help:"The 16 character ACCESS CODE. If your card is dated after 2016, you'll need to get the ACCESS CODE from a game."},{default:u(()=>[l(T,{modelValue:o.cardId,"onUpdate:modelValue":e[0]||(e[0]=n=>o.cardId=n),icon:g(O),name:"cardId",type:"card",placeholder:"XXXX-XXXX-XXXX-XXXX",minlength:19,maxlength:19,required:"",onInput:M},null,8,["modelValue","icon"])]),_:1}),l(I,{label:"PIN",help:"Used when logging into a game"},{default:u(()=>[l(T,{modelValue:o.pin,"onUpdate:modelValue":e[1]||(e[1]=n=>o.pin=n),icon:g(u0),type:"password",name:"pin",minlength:4,maxlength:4,inputmode:"numeric",pattern:"\\d{4}",autocomplete:"pin",onInput:X},null,8,["modelValue","icon"])]),_:1})]),_:1,__:[6]})],64)),r.value&&v.value==null?(s(),c("div",J0,[l(S,{icon:g(X0),title:"Select Profiles to Merge",main:""},null,8,["icon"]),l(b,null,{default:u(()=>[e[7]||(e[7]=a("h2",{class:"text-xl mb-6"},[N(" Click a game to view merge options. "),a("br"),N(" Please note that this cannot be undone once complete. ")],-1)),a("div",q0,[(s(!0),c(P,null,j(J(r.value.profiles),n=>(s(),w(s0,{key:n.game,game:n.game,value:n.data.total_plays,"profile-name":"",type:"plays",class:o0(d[n.game]?"border-green-800 border-[3px]":null),"disable-local-click":"",onClick:$=>G(n.game)},null,8,["game","value","class","onClick"]))),128))]),l(I,{label:"Transfer Card",help:"Moves the card to your account."},{default:u(()=>[l(E,{modelValue:d.card,"onUpdate:modelValue":e[3]||(e[3]=n=>d.card=n),"input-value":d.card,icon:g(O),type:"switch",name:"card"},null,8,["modelValue","input-value","icon"])]),_:1}),a("div",L0,[l(Z,{color:"success",label:"Start Merge",disabled:JSON.stringify(d)==JSON.stringify({}),onClick:D},null,8,["disabled"])])]),_:1,__:[7]})])):_("",!0),v.value==!0?(s(),c("div",W0,[l(S,{icon:g(U),title:"Merge Results",main:""},null,8,["icon"]),l(b,null,{default:u(()=>[a("h2",H0," ✅ Successfully merged "+x(h.value)+" records. Yippie! ",1),a("div",Y0,[l(Z,{color:"success",label:"Return to Dashboard",href:"#/"})])]),_:1})])):_("",!0),v.value==!1?(s(),c("div",K0,[l(S,{icon:g(U),title:"Merge Results",main:""},null,8,["icon"]),l(b,null,{default:u(()=>[e[8]||(e[8]=a("h2",{class:"text-xl mb-6"},"❌ Failed to merge. Please try again.",-1)),a("div",Q0,[l(Z,{color:"warning",label:"Retry",onClick:D})])]),_:1,__:[8]})])):_("",!0),f.value?(s(),w(T0,{key:4,game:t.value.game,"user-id":r.value.userId,settings:d[t.value.game],onSaveMerge:q,onCloseModal:e[4]||(e[4]=n=>f.value=!1)},null,8,["game","user-id","settings"])):_("",!0),p.value?(s(),w(G0,{key:5,game:t.value.game,settings:d,onSaveMerge:L,onCloseModal:e[5]||(e[5]=n=>p.value=!1)},null,8,["game","settings"])):_("",!0)]),_:1})]),_:1}))}};export{u1 as default};
