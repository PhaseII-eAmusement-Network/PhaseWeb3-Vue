import{r as w,s as x,o as C,c as b,e as v,w as s,f as t,_ as r,j as o,$ as m,g as d,aL as y,aM as h,x as g,i as $,p as A,q as k}from"./index.28f1a1ac.js";import{_ as N}from"./GeneralTable.7954e9ff.js";import{_ as P}from"./FormField.573ad915.js";import{_ as V}from"./FormControl.fce58e8e.js";import{f as B,g as D}from"./admin.a53808aa.js";const I={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},M={class:"w-full"},R={__name:"APIView",setup(F){const n=w([]),u=[{text:"Create Timestamp",value:"timestamp",width:120},{text:"Name",value:"name",width:120}],i=x({...{name:null}});C(async()=>{c()});async function c(){try{const l=await B();var a=[];for(var e of l){if(e.timestamp){const _=new Date(e.timestamp*1e3);e.timestamp=_.toLocaleString()}a.push(e)}n.value=a}catch(l){console.error("Failed to fetch client data:",l)}}async function f(){try{const a=await D(i);n.value=a}catch(a){console.error("Failed to post client:",a)}c()}const p=a=>{navigator.clipboard.writeText(a.token).then(()=>{alert("Copied to clipboard!")}).catch(()=>{alert("Failed to copy to clipboard!")})};return(a,e)=>(b(),v(k,null,{default:s(()=>[t(A,null,{default:s(()=>[t(r,{class:"mb-6 p-1"},{default:s(()=>e[2]||(e[2]=[o("h1",{class:"text-3xl"},"Data API",-1),o("p",{class:"text-sm text-gray-400"},"Used for RestfulSleep and BEMAPI",-1)])),_:1}),t(m,{icon:d(y),title:"All Active Clients",color:"text-blue-400",main:""},null,8,["icon"]),t(r,{"has-table":"",class:"mb-6"},{default:s(()=>[o("div",I,[o("div",M,[t(N,{headers:u,items:n.value,onRowClicked:p},null,8,["items"]),e[3]||(e[3]=o("h1",{class:"mx-4 mt-1 mb-2 text-md lg:text-lg"}," Click row to copy token ",-1))])])]),_:1}),t(m,{icon:d(h),title:"Create New Client",color:"text-emerald-600",main:""},null,8,["icon"]),t(r,{"is-form":"",class:"row-span-1",onSubmit:e[1]||(e[1]=g(l=>f(),["prevent"]))},{default:s(()=>[t(P,{label:"Name",help:"Name of the client you'd like to onboard."},{default:s(()=>[t(V,{modelValue:i.name,"onUpdate:modelValue":e[0]||(e[0]=l=>i.name=l),required:""},null,8,["modelValue"])]),_:1}),o("div",null,[t($,{type:"submit",color:"success",label:"Create",small:!1})])]),_:1})]),_:1})]),_:1}))}};export{R as default};
