import{a as k,b as w,a4 as S,r as N,n as R,o as B,U as V,c as p,d as r,w as u,f as v,g as l,_ as F,e as _,j as c,J as G,Z as I,i,F as g,k as h,h as A,t as m,l as D,y as T,m as U}from"./index-DwYnfYUr.js";import{_ as j}from"./FormControl-BemwZxz1.js";import{_ as C}from"./GameHeader-Dtj5gCp8.js";import{A as E}from"./music-IrtLlniV.js";import"./PhGear.vue-CrSdXHv8.js";import"./PhHouse.vue-CsFwf3sR.js";const L={key:0,class:"md:w-1/3 md:text-right"},P={class:"md:flex w-full md:place-content-between"},J={class:"mb-4 md:mb-0 space-y-1"},M={class:"text-lg md:text-xl"},W={class:"text-md md:text-lg"},Z={class:"grid md:flex gap-2 md:justify-end md:place-content-end"},q={key:0,class:"bg-gray-900 dark:bg-gray-700 p-4 rounded-lg"},z={class:"text-md md:text-lg"},te={__name:"NetworkRecords",setup(H){const y=k(),$=w();var f=y.params.game;const e=S(f);var d=N([]);const a=R({currentVersion:null});e||$.push({name:"ErrorPage",params:{catchAll:"404"}}),e.versions||(a.currentVersion=1),B(async()=>{try{const t=await E(f);d.value=t,e.versions&&!a.currentVersion&&(a.currentVersion=x.value.at(-1)?.id??null)}catch(t){console.error("Failed to fetch score data:",t)}});const x=V(()=>{if(!e.versions)return[];const t=new Set(d.value.map(s=>s.version));return e.versions.filter(s=>t.has(s.id))}),b=V(()=>a.currentVersion?d.value.filter(t=>t.version===a.currentVersion):d.value);return(t,s)=>(r(),p(U,null,{default:u(()=>[l(d)?(r(),p(F,{key:0},{default:u(()=>[_(C,{game:l(e)},null,8,["game"]),_(G,{icon:l(I),title:"Top Records",main:""},{default:u(()=>[l(e).versions?(r(),c("div",L,[s[1]||(s[1]=i("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),_(j,{modelValue:a.currentVersion,"onUpdate:modelValue":s[0]||(s[0]=o=>a.currentVersion=o),options:x.value.slice().reverse()},null,8,["modelValue","options"])])):v("",!0)]),_:1},8,["icon"]),(r(!0),c(g,null,h(b.value,o=>(r(),p(A,{key:o.id,class:"mb-6"},{default:u(()=>[i("div",P,[i("div",J,[i("h1",M,m(o.name),1),i("h2",W,m(o.artist),1),_(D,{label:"View Song",color:"info",to:`/games/${l(f)}/song/${o.id}`},null,8,["to"])]),i("div",Z,[(r(!0),c(g,null,h(o.charts,n=>(r(),c(g,{key:n.db_id},[n.data?.difficulty!=0?(r(),c("div",q,[i("h2",z,m(l(e).chartTable[n.chart])+" - "+m(n.data?.difficulty),1),T(" "+m(n.record?`${n.record?.username} - ${n.record.points?.toLocaleString()}`:"Unclaimed"),1)])):v("",!0)],64))),128))])])]),_:2},1024))),128))]),_:1})):v("",!0)]),_:1}))}};export{te as default};
