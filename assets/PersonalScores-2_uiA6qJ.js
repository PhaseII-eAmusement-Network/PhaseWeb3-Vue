import{l as h,m as v,u as b,aa as I,r as f,o as P,c as S,a as d,w as n,b as r,_ as k,d as y,e as w,F as G,p as N,g as e,q as p,G as x,a4 as A,f as B,as as F,n as R,k as C}from"./index-DPhT8dOj.js";import{_ as V}from"./GeneralTable-BZBkeQtl.js";import{_ as D}from"./GameHeader-Dxh5AvUe.js";import{A as E}from"./profile-8E3RiZ3E.js";import{a as H,p as M}from"./scores-C19ukh9j.js";import"./contentExport-CUpLLWZa.js";import"./PhGear.vue-CuA2krdU.js";import"./PhHouse.vue-DymxmeIb.js";import"./scoreDataFilters-CKK1u78i.js";const T={class:"flex gap-2 mb-6"},X={__name:"PersonalScores",setup(q){const c=h(),i=v(),_=b();var t=null,a=null,l=null;t=c.params.game,l=c.params.userId,a=I(t),a||i.push({name:"ErrorPage",params:{catchAll:"404"}});const s=f(null),m=f([]);P(async()=>{try{const o=await _.getAttemptData(t,l);m.value=H(a,o)}catch(o){console.error("Failed to fetch score data:",o)}$()});async function $(){try{s.value=null;const o=await E(t,null,l);s.value=o.profile}catch(o){console.error("Failed to fetch user profile data:",o)}}const g=o=>{const u=o.song.id;i.push(`/games/${t}/song/${u}`)};return(o,u)=>(d(),S(C,null,{default:n(()=>[r(k,null,{default:n(()=>[s.value?(d(),y(G,{key:0},[r(D,{game:e(a),profile:s.value},null,8,["game","profile"]),N("div",T,[r(p,{icon:e(x),to:`/games/${e(a).id}/profiles/${s.value.userId}`,outline:!1,color:"info",label:`${s.value.username}'s Profile`},null,8,["icon","to","label"]),r(p,{icon:e(A),to:`/games/${e(a).id}/records/${s.value.userId}`,outline:!1,color:"info",label:`${s.value.username}'s Records`},null,8,["icon","to","label"])]),r(B,{icon:e(F),title:`${s.value.username}'s ${e(a).shortName?e(a).shortName:e(a).name} Scores`,main:""},null,8,["icon","title"]),r(R,{"has-table":""},{default:n(()=>[r(V,{headers:e(M)(e(a)),items:m.value,onRowClicked:g},null,8,["headers","items"])]),_:1})],64)):w("",!0)]),_:1})]),_:1}))}};export{X as default};
