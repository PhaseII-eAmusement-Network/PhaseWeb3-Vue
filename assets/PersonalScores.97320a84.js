import{u as S,ad as y,r as p,o as b,a as h,c as N,w as u,b as l,i as k,g as P,f as _,e,m as B,aa as I,P as H,ax as C,_ as F,F as A,k as D,l as G,n as R,p as V,q as E}from"./index.fd9dd979.js";import{_ as M}from"./GeneralTable.57a0064e.js";const T={class:"grid grid-cols-1 md:max-w-[180px] space-y-3 mb-5"},j={__name:"PersonalScores",setup(U){const m=V(),v=E(),d=S();var r=null,a=null,n=null;r=m.params.game,n=m.params.userId,a=y(r),a||v.push({name:"ErrorPage",params:{catchAll:"404"}});const o=p(null),f=p([]),c=[{text:"Timestamp",value:"timestamp",width:170},{text:"Song",value:"song.name",width:180},{text:"Artist",value:"song.artist",width:180},{text:"Chart",value:"song.chart",width:100},{text:"Grade",value:"data.rank",width:80},{text:"Score",value:"points",width:100}];if(a.scoreHeaders)for(var g of a.scoreHeaders)c.push(g);c.push({text:"Type",value:"type",width:80}),b(async()=>{try{const t=await d.getAttemptData(r,n);f.value=$(t)}catch(t){console.error("Failed to fetch score data:",t)}w()});async function w(){try{o.value=null;const t=await d.getUserProfile(r,null,n);o.value=t}catch(t){console.error("Failed to fetch user profile data:",t)}}function $(t){var i=[];for(var s of t){if(s.timestamp){const x=new Date(s.timestamp*1e3);s.timestamp=x.toLocaleString(),s.newRecord&&(s.timestamp=`${s.timestamp}
New High Score!`)}s.points&&(s.points=s.points.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),i.push(s)}return i}return(t,i)=>(h(),N(R,null,{default:u(()=>[l(G,null,{default:u(()=>[o.value?(h(),k(A,{key:0},[P("div",T,[l(_,{icon:e(B),href:`/#/games/${e(r)}/profiles/${o.value.userId}`,class:"w-full md:w-auto",color:"info",label:`${o.value.name}'s Profile`},null,8,["icon","href","label"]),l(_,{icon:e(I),href:`/#/games/${e(r)}`,class:"w-full md:w-auto",color:"info",label:`${e(a).shortName?e(a).shortName:e(a).name} Home`},null,8,["icon","href","label"])]),l(H,{icon:e(C),title:`${o.value.name}'s ${e(a).shortName?e(a).shortName:e(a).name} Scores`,main:""},null,8,["icon","title"]),l(F,{"has-table":""},{default:u(()=>[l(M,{headers:c,items:f.value},null,8,["items"])]),_:1})],64)):D("",!0)]),_:1})]),_:1}))}};export{j as default};
