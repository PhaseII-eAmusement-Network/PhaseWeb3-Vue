import{u as B,a as F,ag as R,r as I,s as A,o as D,B as b,c as r,e as p,w as u,g as l,p as G,f,k as c,j as i,n as g,bA as L,$ as T,l as k,_ as j,t as m,i as C,F as v,V as E,q as P}from"./index.3b748ec3.js";import{_ as U}from"./FormControl.a0e2c269.js";import{_ as q}from"./GameHeader.41279c5c.js";import{b as M}from"./music.c96d0bcf.js";import"./sources.b67a3d59.js";const W={key:0,class:"md:w-1/3 md:text-right"},z={class:"md:flex w-full md:place-content-between"},H={class:"mb-4 md:mb-0 space-y-1"},J={class:"text-lg md:text-xl"},K={class:"text-md md:text-lg"},O={class:"grid md:flex gap-2 md:justify-end md:place-content-end"},Q={key:0,class:"bg-gray-900 dark:bg-gray-700 p-4 rounded-lg"},X={class:"text-md md:text-lg"},ae={__name:"NetworkRecords",setup(Y){const w=B(),S=F();var _=w.params.game;const s=R(_);var d=I([]);const a=A({currentVersion:null});s||S.push({name:"ErrorPage",params:{catchAll:"404"}}),s.versions||(a.currentVersion=1),D(async()=>{var o,e;try{const t=await M(_);d.value=t,s.versions&&!a.currentVersion&&(a.currentVersion=(e=(o=V.value.at(-1))==null?void 0:o.id)!=null?e:null)}catch(t){console.error("Failed to fetch score data:",t)}});const V=b(()=>{if(!s.versions)return[];const o=new Set(d.value.map(e=>e.version));return s.versions.filter(e=>o.has(e.id))}),N=b(()=>a.currentVersion?d.value.filter(o=>o.version===a.currentVersion):d.value);return(o,e)=>(r(),p(P,null,{default:u(()=>[l(d)?(r(),p(G,{key:0},{default:u(()=>[f(q,{game:l(s)},null,8,["game"]),f(T,{icon:l(L),title:"Top Records",main:""},{default:u(()=>[l(s).versions?(r(),c("div",W,[e[1]||(e[1]=i("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),f(U,{modelValue:a.currentVersion,"onUpdate:modelValue":e[0]||(e[0]=t=>a.currentVersion=t),options:V.value.slice().reverse()},null,8,["modelValue","options"])])):g("",!0)]),_:1},8,["icon"]),(r(!0),c(v,null,k(N.value,t=>(r(),p(j,{key:t.id,class:"mb-6"},{default:u(()=>[i("div",z,[i("div",H,[i("h1",J,m(t.name),1),i("h2",K,m(t.artist),1),f(C,{label:"View Song",color:"info",href:`/#/games/${l(_)}/song/${t.id}`},null,8,["href"])]),i("div",O,[(r(!0),c(v,null,k(t.charts,n=>{var x,h,y,$;return r(),c(v,{key:n.db_id},[((x=n.data)==null?void 0:x.difficulty)!=0?(r(),c("div",Q,[i("h2",X,m(l(s).chartTable[n.chart])+" - "+m((h=n.data)==null?void 0:h.difficulty),1),E(" "+m(n.record?`${(y=n.record)==null?void 0:y.username} - ${($=n.record.points)==null?void 0:$.toLocaleString()}`:"Unclaimed"),1)])):g("",!0)],64)}),128))])])]),_:2},1024))),128))]),_:1})):g("",!0)]),_:1}))}};export{ae as default};
