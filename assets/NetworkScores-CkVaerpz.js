import{l as k,m as g,u as w,a8 as b,r as v,o as T,j as x,c as $,a as S,w as d,b as r,_ as m,g as l,f as R,ap as A,n as C,k as B}from"./index-B8PF5fsn.js";import{_ as D}from"./GeneralTable-BHrFQQ9_.js";import{_ as E}from"./GameHeader-BFbHBmgM.js";import"./contentExport-DZW8_llL.js";import"./PhGear.vue-CAIbbLcP.js";import"./PhHouse.vue-CmhfH9kZ.js";const L={__name:"NetworkScores",setup(I){const u=k(),o=g(),p=w();var n=null,e=null;n=u.params.game,e=b(n),e||o.push({name:"ErrorPage",params:{catchAll:"404"}});const c=v([]),f=[{text:"Player",value:"username",width:120},{text:"New PB",value:"newRecord",width:100},{text:"Timestamp",value:"timestamp",width:140},{text:"Song",value:"song.name",width:180},{text:"Artist",value:"song.artist",width:150},{text:"Chart",value:"song.chart",width:100},{text:"Grade",value:"data.rank",width:80},{text:"Score",value:"points",width:120}];if(e.scoreHeaders)for(var _ of e.scoreHeaders)f.push(_);T(async()=>{try{const s=await p.getAttemptData(n);c.value=i(s)}catch(s){console.error("Failed to fetch score data:",s)}});function i(s){var t=[];for(var a of s)a.newRecord?a.newRecord="âœ…":a.newRecord="",a.timestamp&&(a.timestamp=x(a.timestamp)),a.points!=null&&(a.points=a.points.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),a.data?.stats?.score!=null&&(a.exscore=a.points.toString(),a.points=a.data?.stats?.score.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),a.song?.chart!=null&&e.chartTable&&(a.song.chart=e.chartTable[a.song?.chart]),a.data?.halo!=null&&e.haloTable&&(a.data.halo=e.haloTable[a.data?.halo]),a.data?.medal!=null&&e.medalTable&&(a.data.medal=e.medalTable[a.data?.medal]),a.data?.clear_status!=null&&e.medalTable&&(a.data.medal=e.medalTable[a.data?.clear_status]),a.data?.rank!=null&&e.rankTable&&(a.data.rank=e.rankTable[a.data?.rank]),a.data?.result_rank!=null&&e.rankTable&&(a.data.rank=e.rankTable[a.data?.result_rank]),a.data?.grade!=null&&e.rankTable&&(a.data.rank=e.rankTable[a.data?.grade]),a.data?.skill_perc>0?a.data.skill_perc=`${a.data?.skill_perc/100}%`:a.data.skill_perc="0%",a.data?.skill_points&&(a.data.skill_points=a.data?.skill_points/10),a.data?.perc>0?a.data.perc=`${a.data?.perc/100}%`:a.data.perc="0%",a.data?.new_skill&&(a.data.new_skill=a.data?.new_skill/10),a.data?.music_rate&&(a.data.music_rate=a.data?.music_rate/10),a.data?.excellent?a.medal="EX FC":a.data?.fullcombo?a.medal="FC":a.data?.clear?a.medal="CLEARED":a.medal="FAILED",t.push(a);return t}const h=s=>{const t=s.song.id;o.push(`/games/${n}/song/${t}`)};return(s,t)=>(S(),$(B,null,{default:d(()=>[r(m,null,{default:d(()=>[r(E,{game:l(e)},null,8,["game"]),r(R,{icon:l(A),title:`All ${l(e).shortName?l(e).shortName:l(e).name} Scores`,main:""},null,8,["icon","title"]),r(C,{"has-table":""},{default:d(()=>[r(D,{headers:f,items:c.value,onRowClicked:h},null,8,["items"])]),_:1})]),_:1})]),_:1}))}};export{L as default};
