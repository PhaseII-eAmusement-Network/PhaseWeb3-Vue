import{r as V,s as w,o as T,au as W,N as A,a as n,c,w as p,b as m,i as b,X as q,e as r,aq as R,_ as X,g as i,k as d,V as z,t as H,F,j as J,f as K,l as Q,n as Y,p as Z,av as G}from"./index.dc5fb320.js";import{_ as ee}from"./ArcadeCard.bce9c595.js";import{_ as B}from"./FormField.0e4acf0d.js";import{_ as v}from"./FormControl.d6dcd737.js";import{_ as ae}from"./FormCheckRadio.d5f2fe29.js";import{g as f,s as y}from"./values.1bd6ac4a.js";import{A as le,c as oe}from"./arcade.62e0006e.js";const te={class:"mb-4"},se={class:"grid md:grid-cols-2 gap-4"},ne=i("p",{class:"pb-2 text-lg"},"Game",-1),re={key:0},me=i("p",{class:"pb-2 text-lg"},"Version",-1),ie={key:0},ue={class:"text-xl"},de=i("hr",{class:"pb-1 my-2"},null,-1),be={__name:"EventView",setup(ce){const t=V(null),o=w({game:null,version:null}),_=w([]),k=V(null),S=V(null),N=V(!0),I=Z(),$=parseInt(I.params.id);async function L(){try{S.value=null,t.value={},k.value={};const a=await le($);S.value=a,N.value=!1}catch(a){console.error("Failed to fetch arcade data:",a)}}async function j(){try{t.value={},k.value={};const a=await oe($,o.game,o.version);console.log(a),t.value=a,k.value=a}catch(a){console.error("Failed to fetch arcade setting data:",a)}}T(()=>{L(),C()});function C(){for(const a of W){const l=a.gameOptions;l&&_.push({game:a.id,gameOptions:l})}}function D(){var a=[];for(const l of _)l.gameOptions&&a.push({id:l.game,label:G(l.game).name});return a}function E(){const a=_.find(s=>s.game==o.game),l=G(o.game);var e=[];for(const s of Object.entries(a.gameOptions))if(l.versions==null)e.push({id:s[0],label:l.name}),o.version=1;else{const g=l.versions.find(h=>h.id==s[0]);e.push({id:s[0],label:g.label})}return e}function P(){var e;const a=G(o.game);var l=null;return a.versions&&(l=a.versions.find(s=>s.id==o.version)),`${a.name} ${(e=l==null?void 0:l.label)!=null?e:""}`}function M(){return _.find(l=>l.game==o.game).gameOptions[o.version]}return A(()=>o.game,()=>{o.version=null,t.value={}}),A(()=>o.version,()=>{o.version&&j()}),(a,l)=>(n(),c(Y,null,{default:p(()=>[m(Q,null,{default:p(()=>[N.value?d("",!0):(n(),b(F,{key:0},[m(ee,{class:"mb-6",arcade:S.value,"use-small":!0},null,8,["arcade"]),m(q,{icon:r(R),title:"Game Event Settings",main:""},null,8,["icon"]),m(X,{class:"mb-6"},{default:p(()=>[i("div",te,[m(B,{label:"Select Game",help:"Pick a game and version to get started."},{default:p(()=>[i("div",se,[i("div",null,[ne,m(v,{modelValue:o.game,"onUpdate:modelValue":l[0]||(l[0]=e=>o.game=e),name:"game",options:D()},null,8,["modelValue","options"])]),o.game?(n(),b("div",re,[me,m(v,{modelValue:o.version,"onUpdate:modelValue":l[1]||(l[1]=e=>o.version=e),name:"version",options:E()},null,8,["modelValue","options"])])):d("",!0)])]),_:1})]),o.game&&o.version?(n(),b("div",ie,[i("h2",ue,[z(" Settings for "),i("b",null,H(P()),1)]),de,(n(!0),b(F,null,J(M(),e=>(n(),c(B,{key:e.id,label:e.name,help:e.help},{default:p(()=>{var s,g,h,x,U;return[e.type=="String"?(n(),c(v,{key:0,"model-value":(s=r(f)(t.value,e.id))!=null?s:"",name:e.name,placeholder:"Not Set","onUpdate:modelValue":u=>r(y)(t.value,e.id,u)},null,8,["model-value","name","onUpdate:modelValue"])):d("",!0),e.type=="LargeText"?(n(),c(v,{key:1,"model-value":(g=r(f)(t.value,e.id))!=null?g:"",name:e.name,placeholder:"Not Set",type:"textarea","onUpdate:modelValue":u=>r(y)(t.value,e.id,u)},null,8,["model-value","name","onUpdate:modelValue"])):d("",!0),e.type=="Boolean"?(n(),c(ae,{key:2,name:e.id,"model-value":Boolean((h=r(f)(t.value,e.id))!=null?h:0),"input-value":!0,type:"switch","onUpdate:modelValue":u=>{var O;return r(y)(t.value,e.id,(O=Number(u))!=null?O:0)}},null,8,["name","model-value","onUpdate:modelValue"])):d("",!0),e.type=="Array"?(n(),c(v,{key:3,"model-value":(x=r(f)(t.value,e.id))!=null?x:0,options:e.options,name:e.id,selected:(U=r(f)(t.value,e.id))!=null?U:0,placeholder:"Select...","onUpdate:modelValue":u=>r(y)(t.value,e.id,Number(u))},null,8,["model-value","options","name","selected","onUpdate:modelValue"])):d("",!0)]}),_:2},1032,["label","help"]))),128)),m(K,{color:"success",type:"submit",label:"Save",small:!1})])):d("",!0)]),_:1})],64))]),_:1})]),_:1}))}};export{be as default};
