import{r as m,u as E,o as L,c as r,e as b,w as d,f as n,k as h,W as x,g as i,ax as O,_ as N,x as U,X as F,as as M,j as u,F as P,l as R,n as g,i as y,ay as j,am as G,p as J,q}from"./index.da95f725.js";import{_ as D}from"./ArcadeCard.453900b9.js";import{_ as H}from"./FormField.5c716bff.js";import{_ as W}from"./FormCheckRadio.818a4d56.js";import{g as S,s as A}from"./values.1bd6ac4a.js";import{A as X,a as z,b as K}from"./arcade.b15a599e.js";const Q={class:"grid grid-cols-1 w-full gap-2 md:gap-6 md:flex md:place-content-stretch"},T={key:0,class:"space-x-2 mt-6"},Y={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 mb-6"},se={__name:"ArcadeView",setup(Z){const l=m(null),p=m(null),s=m(null),w=m(!0),V=E(),f=parseInt(V.params.id);var k=[{id:"paseli_enabled",name:"PASELI Services",help:"Enable PASELI for this arcade.",type:"Boolean"},{id:"paseli_infinite",name:"Infinite PASELI",help:"Enable infinite PASELI for this arcade.",type:"Boolean"},{id:"maint",name:"Maintenance Mode",help:"Place this arcade under maintenance.",type:"Boolean"},{id:"hide_network",name:"Incognito Mode",help:"Hide the network and all ranking data.",type:"Boolean"}];async function _(){try{s.value={},l.value={},p.value={};const t=await X(f);s.value=t;for(const a of k){const e=S(s.value.data,a.id);A(l.value,a.id,e),A(p.value,a.id,e)}w.value=!1}catch(t){console.error("Failed to fetch arcade data:",t)}}async function B(){(await K(f,l.value)).status!="error"&&await _()}L(()=>{_()});function I(t,a="NA_"){var e=[...t].map(c=>c.charCodeAt(0)<128?c:a).join("");return e=e.replace(/[!"#$%&'()*+,-./:;<=>?@[\\\]^_`{|}~]/g,""),e=e.replace(/\s+/g,"_"),e}async function C(){try{const t=await z(f),a=new Blob([t],{type:"application/ovpn"}),e=document.createElement("a");e.href=URL.createObjectURL(a),e.download=`gradius-${I(s.value.name)}-phaseii-config.ovpn`,document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)}catch(t){console.log("Failed to fetch arcade data:",t)}}return(t,a)=>(r(),b(q,null,{default:d(()=>[n(J,null,{default:d(()=>{var e,c;return[w.value?g("",!0):(r(),h(P,{key:0},[n(D,{class:"mb-6",arcade:s.value},null,8,["arcade"]),n(x,{icon:i(O),title:"Arcade Administration",main:""},null,8,["icon"]),n(N,{"is-form":"",class:"mb-6",onSubmit:U(B,["prevent"])},{default:d(()=>[n(F,{color:"info",label:"Settings",icon:i(M),class:"mb-2"},null,8,["icon"]),u("div",Q,[(r(!0),h(P,null,R(i(k),o=>(r(),b(H,{key:o.id,label:o.name,help:o.help},{default:d(()=>{var $;return[o.type=="Boolean"?(r(),b(W,{key:0,name:o.id,"model-value":Boolean(($=i(S)(l.value,o.id))!=null?$:!1),"input-value":!0,type:"switch","onUpdate:modelValue":v=>i(A)(l.value,o.id,v!=null?v:!1)},null,8,["name","model-value","onUpdate:modelValue"])):g("",!0)]}),_:2},1032,["label","help"]))),128))]),JSON.stringify(l.value)!==JSON.stringify(p.value)?(r(),h("div",T,[n(y,{color:"success",label:"Save",type:"submit"}),n(y,{color:"danger",label:"Revert",onClick:a[0]||(a[0]=o=>_())})])):g("",!0)]),_:1}),n(N,{class:"w-full md:w-1/2 mb-6"},{default:d(()=>[a[2]||(a[2]=u("h1",{class:"text-lg md:text-xl"},"OpenVPN Configuration",-1)),a[3]||(a[3]=u("p",{class:"pb-1 dark:text-white/50"}," Use this to download your VPN config. ",-1)),n(y,{small:!1,color:"success",class:"my-2",label:"Export",onClick:a[1]||(a[1]=o=>C())})]),_:1}),n(x,{icon:i(j),title:"Arcade Overview",main:""},null,8,["icon"]),u("div",Y,[n(G,{number:(c=(e=s.value)==null?void 0:e.machines)==null?void 0:c.length,label:"Active Machines"},null,8,["number"])])],64))]}),_:1})]),_:1}))}};export{se as default};
