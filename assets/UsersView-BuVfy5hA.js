import{a as v,r as b,o as g,s as k,c as U,e as d,w as o,f as l,_ as $,j as c,k as t,l as _,F as C,m as y,t as r,n as D,P as L,i as A,aF as B,q as V}from"./index-BLNUJ2NM.js";import{_ as F}from"./GeneralTable-J-7uFbEf.js";import{_ as S}from"./FormField-DvuyRx6-.js";import{_ as I}from"./FormControl-C432udtk.js";import{i as j}from"./admin-BOwxU-p3.js";const M={class:"grid gap-4"},N={class:"md:flex w-full place-content-between"},O={class:"text-lg md:text-xl"},P={class:"text-md md:text-lg"},R={class:"text-md"},q={class:"bg-slate-900 p-2 rounded-md mt-2 w-14 max-w-16 text-center"},E={class:"text-lg font-mono text-pink-700"},T={class:"flex align-middle mt-2 md:mt-0 max-h-16"},z={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},G={class:"w-full"},Z={__name:"UsersView",setup(H){const h=v(),i=b([]),x=[{text:"User ID",value:"id",width:50,sortable:!0},{text:"Username",value:"username",width:150,sortable:!0},{text:"Admin",value:"admin",width:120,sortable:!0},{text:"Banned",value:"banned",width:120,sortable:!0},{text:"Discord Linked",value:"data.discord.linked",width:120,sortable:!0},{text:"Tachi Linked",value:"data.tachi.linked",width:120,sortable:!0}];g(async()=>{p()});async function p(){try{const e=await j();var a=[];for(var s of e)s.username||(s.username="Unclaimed Account"),a.push(s);i.value=a}catch(e){console.error("Failed to fetch user data:",e)}}const u=a=>{const s=a.id;h.push(`/user/${s}`)},n=k({filter:null});function w(){return n.filter?i.value.filter(a=>a.id.toString().toLowerCase().includes(n.filter.toLowerCase())||a.username.toLowerCase().includes(n.filter.toLowerCase())).slice(0,25):[]}return(a,s)=>(d(),U(V,null,{default:o(()=>[l($,null,{default:o(()=>[l(c,{class:"mb-6 p-1"},{default:o(()=>s[2]||(s[2]=[t("h1",{class:"text-3xl"},"User Management",-1),t("p",{class:"text-sm text-gray-400"},"Click a row to open User",-1)])),_:1}),l(c,{class:"mb-6"},{default:o(()=>[l(S,{label:"Search",help:"Search by ID or username.",class:"w-full md:w-1/3"},{default:o(()=>[l(I,{modelValue:n.filter,"onUpdate:modelValue":s[0]||(s[0]=e=>n.filter=e),"model-value":n.filter},null,8,["modelValue","model-value"])]),_:1}),t("div",M,[(d(!0),_(C,null,y(w(),e=>{var m,f;return d(),_("div",{key:e.id,class:"bg-slate-800 p-4 rounded-xl"},[t("div",N,[t("div",null,[t("h1",O,r(e.username),1),t("h2",P," User "+r(e.banned?"is":"isn't")+" banned. ",1),t("h2",R," Discord "+r((f=(m=e.data)==null?void 0:m.discord)!=null&&f.linked?"is":"isn't")+" linked. ",1),t("div",q,[t("h2",E,r(e.id),1)])]),t("div",T,[l(D,{label:"Open User",color:"info",onClick:J=>u(e)},null,8,["onClick"])])])])}),128))])]),_:1}),l(L,{icon:A(B),title:"All Users",color:"text-blue-400",main:""},null,8,["icon"]),l(c,{"has-table":"",class:"mb-6"},{default:o(()=>[t("div",z,[t("div",G,[l(F,{headers:x,items:i.value,onRowClicked:s[1]||(s[1]=e=>u(a.user))},null,8,["items"])])])]),_:1})]),_:1})]),_:1}))}};export{Z as default};
