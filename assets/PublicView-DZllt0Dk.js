import{a as N,r as C,o as H,al as r,c as x,d as l,w as S,e as n,_ as L,j as f,f as k,F as g,i as T,P as _,g as v,x as Q,O as z,am as J,k as w,an as K,ao as W,ab as X,ap as Y,h as Z,aq as ee,n as ae,ar as te,a7 as se,as as D,at as p,au as re}from"./index-CHivKhhP.js";const oe={class:"grid grid-cols-2 sm:grid-cols-3 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 3xl:grid-cols-5 mb-6"},le={class:"grid grid-flow-row auto-rows-auto grid-cols-2 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-3 3xl:grid-cols-4 4xl:grid-cols-6 gap-5 mb-5"},ne={key:0},me={__name:"PublicView",setup(ce){const O=N().params.id,o=C({});async function $(){try{o.value={};var e=await te(O);e.name||(e.name="Unclaimed Account"),o.value=e}catch(t){console.error("Failed to fetch user profile data:",t)}}H(async()=>{$(),console.log(o.value)});const c=r(()=>o.value.userProfiles),d=r(()=>o.value.userScoreStats),E=r(()=>{var e;return(e=c.value)==null?void 0:e.reduce((t,a)=>t+a.data.total_plays,0)}),I=r(()=>{var e;return(e=c.value)==null?void 0:e.length}),A=r(()=>{var a;const e=s=>{const i={};return s.forEach(u=>{const m=new Date(u*1e3).toISOString().split("T")[0];i[m]=(i[m]||0)+1}),i};var t=0;return(a=c.value)==null||a.forEach(s=>{var y,b;const i=(y=s.data)!=null&&y.arcade_history?(b=s.data)==null?void 0:b.arcade_history:{},u=[];Object.values(i).forEach(M=>{Object.values(M).forEach(q=>{u.push(...q)})});const m=e(u),h=Math.max(...Object.values(m));t=Math.max(t,h)}),t});function B(e){if(e){var t=[];for(const a of e){const s=se(a.game);s&&!s.skip&&t.push(a)}return t.sort(function(a,s){return s.data.last_play_timestamp-a.data.last_play_timestamp}),t}}const P=new Date().toISOString().split("T")[0],U=r(()=>{var e,t;return((t=(e=d.value)==null?void 0:e.attempts)==null?void 0:t.length)||0}),j=r(()=>{var e,t;return((t=(e=d.value)==null?void 0:e.records)==null?void 0:t.length)||0}),F=r(()=>{var e,t;return((t=(e=d.value)==null?void 0:e.attempts)==null?void 0:t.filter(a=>new Date(a.timestamp*1e3).toISOString().split("T")[0]===P).length)||0}),G=r(()=>{var e,t;return((t=(e=d.value)==null?void 0:e.records)==null?void 0:t.filter(a=>new Date(a.timestamp*1e3).toISOString().split("T")[0]===P).length)||0}),R=r(()=>{var a;const e=new Date().toISOString().split("T")[0];let t=0;return(a=c.value)==null||a.forEach(s=>{var u;const i=((u=s.data)==null?void 0:u.arcade_history)||{};Object.values(i).forEach(m=>{Object.values(m).forEach(h=>{h.forEach(y=>{new Date(y*1e3).toISOString().split("T")[0]===e&&t++})})})}),t}),V=C([{label:"Cumulative Plays",icon:D,iconColor:"text-emerald-600",suffix:"play",number:E},{label:"Games Played",icon:p,iconColor:"text-sky-300",suffix:"game",number:I},{label:"Plays Today",icon:D,iconColor:"text-sky-300",suffix:"play",number:R},{label:"Longest Play Streak",icon:re,iconColor:"text-red-500",suffix:"play",number:A},{label:"Total Records",icon:p,iconColor:"text-sky-300",suffix:"record",number:j},{label:"Total Attempts",icon:p,iconColor:"text-sky-300",suffix:"attempt",number:U},{label:"Records Today",icon:p,iconColor:"text-sky-300",suffix:"record",number:G},{label:"Attempts Today",icon:p,iconColor:"text-sky-300",suffix:"attempt",number:F}]);return(e,t)=>(l(),x(ae,null,{default:S(()=>[n(L,null,{default:S(()=>[o.value!=null?(l(),f(g,{key:0},[n(_,{icon:v(Q),title:`${o.value.name}'s Profile`,main:""},null,8,["icon","title"]),n(z,{class:"mb-6","override-profile":o.value,"use-small":""},null,8,["override-profile"]),n(_,{icon:v(J),title:"Quick Stats",main:""},null,8,["icon"]),T("div",oe,[(l(!0),f(g,null,w(V.value,a=>(l(),f(g,{key:a.label},[a.number?(l(),x(K,{key:0,icon:a.icon,number:a.number,label:a.label,suffix:`${a.suffix}${a.number==1?"":"s"}`,"icon-color":a.iconColor},null,8,["icon","number","label","suffix","icon-color"])):k("",!0)],64))),128))]),n(_,{icon:v(W),title:"Showcase",main:""},null,8,["icon"]),T("div",le,[(l(!0),f(g,null,w(B(c.value),a=>(l(),x(X,{key:a.game,game:a.game,value:a.data.total_plays,"profile-name":"",type:"plays"},null,8,["game","value"]))),128))]),n(_,{icon:v(Y),title:"Play Trends",main:""},null,8,["icon"]),n(Z,{class:"mb-6"},{default:S(()=>[c.value?(l(),f("div",ne,[n(ee,{data:e.generateChartData(c.value,d.value),class:"h-96"},null,8,["data"])])):k("",!0)]),_:1})],64)):k("",!0)]),_:1})]),_:1}))}};export{me as default};
