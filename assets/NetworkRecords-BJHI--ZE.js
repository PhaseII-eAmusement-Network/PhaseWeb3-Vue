import{a as k,b as w,a7 as S,r as N,p as F,o as I,al as x,c as p,d as r,w as u,f as v,g as l,_ as R,e as f,j as c,P as B,bX as D,i,F as g,k as V,h as G,t as m,l as L,I as P,n as T}from"./index-DpUG9nZw.js";import{_ as j}from"./FormControl-DJSYTs7f.js";import{_ as A}from"./GameHeader-CBJFGYbE.js";import{b as C}from"./music-Du1YpyHA.js";import"./sources-nlgNqjxM.js";const E={key:0,class:"md:w-1/3 md:text-right"},U={class:"md:flex w-full md:place-content-between"},M={class:"mb-4 md:mb-0 space-y-1"},W={class:"text-lg md:text-xl"},X={class:"text-md md:text-lg"},q={class:"grid md:flex gap-2 md:justify-end md:place-content-end"},z={key:0,class:"bg-gray-900 dark:bg-gray-700 p-4 rounded-lg"},H={class:"text-md md:text-lg"},ee={__name:"NetworkRecords",setup(J){const b=k(),y=w();var _=b.params.game;const e=S(_);var d=N([]);const a=F({currentVersion:null});e||y.push({name:"ErrorPage",params:{catchAll:"404"}}),e.versions||(a.currentVersion=1),I(async()=>{try{const t=await C(_);d.value=t,e.versions&&!a.currentVersion&&(a.currentVersion=h.value.at(-1)?.id??null)}catch(t){console.error("Failed to fetch score data:",t)}});const h=x(()=>{if(!e.versions)return[];const t=new Set(d.value.map(s=>s.version));return e.versions.filter(s=>t.has(s.id))}),$=x(()=>a.currentVersion?d.value.filter(t=>t.version===a.currentVersion):d.value);return(t,s)=>(r(),p(T,null,{default:u(()=>[l(d)?(r(),p(R,{key:0},{default:u(()=>[f(A,{game:l(e)},null,8,["game"]),f(B,{icon:l(D),title:"Top Records",main:""},{default:u(()=>[l(e).versions?(r(),c("div",E,[s[1]||(s[1]=i("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),f(j,{modelValue:a.currentVersion,"onUpdate:modelValue":s[0]||(s[0]=o=>a.currentVersion=o),options:h.value.slice().reverse()},null,8,["modelValue","options"])])):v("",!0)]),_:1},8,["icon"]),(r(!0),c(g,null,V($.value,o=>(r(),p(G,{key:o.id,class:"mb-6"},{default:u(()=>[i("div",U,[i("div",M,[i("h1",W,m(o.name),1),i("h2",X,m(o.artist),1),f(L,{label:"View Song",color:"info",href:`/#/games/${l(_)}/song/${o.id}`},null,8,["href"])]),i("div",q,[(r(!0),c(g,null,V(o.charts,n=>(r(),c(g,{key:n.db_id},[n.data?.difficulty!=0?(r(),c("div",z,[i("h2",H,m(l(e).chartTable[n.chart])+" - "+m(n.data?.difficulty),1),P(" "+m(n.record?`${n.record?.username} - ${n.record.points?.toLocaleString()}`:"Unclaimed"),1)])):v("",!0)],64))),128))])])]),_:2},1024))),128))]),_:1})):v("",!0)]),_:1}))}};export{ee as default};
