import{j as o}from"./index-DPhT8dOj.js";import{f as l,r as t}from"./scoreDataFilters-CKK1u78i.js";function s(r,d){var e=JSON.parse(JSON.stringify(d));if(r){var a=e?.points/r*100;a=Math.round(a*100)/100,e.data.achievement_rate=a*100}return e}function u(r){const d=[{text:"Player",value:"username",width:120},{text:"New PB",value:"newRecord",width:80},{text:"Timestamp",value:"timestamp",width:120},{text:"Song",value:"song.name",width:180},{text:"Artist",value:"song.artist",width:150},{text:"Chart",value:"song.chart",width:100},{text:"Score",value:"points",width:100}];if(r.scoreHeaders)for(var e of r.scoreHeaders)d.push(e);return d}function p(r){const d=[{text:"Timestamp",value:"timestamp",width:120},{text:"New PB",value:"newRecord",width:80},{text:"Song",value:"song.name",width:180},{text:"Artist",value:"song.artist",width:180},{text:"Chart",value:"song.chart",width:120},{text:"Score",value:"points",width:100}];if(r.scoreHeaders)for(var e of r.scoreHeaders)d.push(e);return d}function b(r){const d=[{text:"Player",value:"username",width:120,sortable:!0},{text:"Timestamp",value:"timestamp",width:140,sortable:!0},{text:"Score",value:"points",width:100,sortable:!0}];if(r.scoreHeaders)for(var e of r.scoreHeaders)e.sortable=!0,d.push(e);return d}function _(r,d){var e=[];for(var a of d){if(a.song?.data?.notecount){const n=a.song.data.notecount*2;a=s(n,a)}a.newRecord?a.newRecord="âœ…":a.newRecord="",a.timestamp&&(a.timestamp=o(a.timestamp)),a.song?.chart!=null&&r.chartTable&&(a.song.chart=`${r.chartTable[a.song?.chart]} - ${l(a.song.data?.difficulty,r.difficultyDenom)}`),a.data?.halo!=null&&r.haloTable&&(a.data.halo=r.haloTable[a.data?.halo]),a.data?.medal!=null&&r.medalTable&&(a.data.medal=r.medalTable[a.data?.medal]),a.data?.clear_status!=null&&r.medalTable&&(a.data.medal=r.medalTable[a.data?.clear_status]),a.data?.clear_type!=null&&r.medalTable&&(a.data.clear_type=r.medalTable[a.data?.clear_type]),a.data?.combo_type!=null&&r.comboTable&&(a.data.combo_type=r.comboTable[a.data?.combo_type]),!a.data?.rank&&r.ratingTable&&(a.data.rank=t(r.ratingTable,a.points)),!a.data?.rank&&r.percTable&&(a.data.rank=t(r.percTable,a.data?.achievement_rate)),a.data?.rank!=null&&r.rankTable&&(a.data.rank=r.rankTable[a.data?.rank]),a.data?.result_rank!=null&&r.rankTable&&(a.data.rank=r.rankTable[a.data?.result_rank]),a.data?.grade!=null&&r.rankTable&&(a.data.rank=r.rankTable[a.data?.grade]),a.data?.skill_perc>0?a.data.skill_perc=`${a.data?.skill_perc/100}%`:a.data.skill_perc="0%",a.data?.skill_points&&(a.data.skill_points=a.data?.skill_points/10),a.data?.perc>0?a.data.perc=`${a.data?.perc/100}%`:a.data.perc="0%",a.data?.new_skill&&(a.data.new_skill=a.data?.new_skill/10),a.data?.music_rate&&(a.data.music_rate=a.data?.music_rate/10),a.data?.achievement_rate&&(a.data.achievement_rate=`${a.data?.achievement_rate/100}%`),a.data?.excellent?a.medal="EX FC":a.data?.fullcombo?a.medal="FC":a.data?.clear?a.medal="CLEARED":a.medal="FAILED",a.data?.clear_gauge!==void 0&&(a.data.clear_gauge=`${a.data?.clear_gauge/10}%`),a.data?.combo||(a.data.combo=0),a.data?.miss_count===-1&&(a.data.miss_count=0),a.points!=null&&(a.points=a.points.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),a.data?.stats?.score!=null&&(a.exscore=a.points.toString(),a.points=a.data?.stats?.score.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),e.push(a)}return e}export{_ as a,s as f,p,u as s,b as t};
