import{u as B,a as D,ag as G,r as y,s as $,M as N,o as j,c as r,e as _,w as i,f as a,g as c,k as v,j as s,n as p,$ as k,by as E,_ as h,l as P,t as g,i as R,F as A,b5 as M,p as U,q}from"./index.8a280443.js";import{_ as Y}from"./GameHeader.f731053e.js";import{_ as z}from"./ProfileCard.cbc363a9.js";import{_ as C}from"./FormControl.2ad9e0cb.js";import{_ as H}from"./FormField.34bb1156.js";import{A as J,a as K}from"./profile.b861a50a.js";import{d as O}from"./userData.bcc92478.js";import"./sources.2ab8f546.js";const Q={key:0,class:"w-full md:flex md:-mt-[75px] mb-4 place-content-end"},T={class:"md:w-1/3 md:text-right"},W={key:1,class:"w-full"},X={class:"grid gap-4"},Z={class:"flex w-full place-content-between"},ee={class:"text-lg md:text-xl"},se={class:"text-md md:text-lg font-mono"},te={class:"flex align-middle"},le={class:"grid gap-3"},oe={class:"flex justify-between items-center"},re={class:"flex"},ae={class:"grid"},ne={class:"text-lg"},ie={class:"text-md font-mono"},ge={__name:"RivalsView",setup(de){const I=B(),F=D();var m=null,d=null;m=I.params.game,d=G(m);const n=y(null),V=y([]),l=$({currentVersion:null});N(()=>l.currentVersion,()=>{w(),b()}),j(async()=>{b(),w()}),d.versions||(l.currentVersion=1);async function w(){try{n.value=null;const e=await J(m,l.currentVersion);n.value=e,e&&!l.currentVersion&&(l.currentVersion=e.versions[e.versions.length-1])}catch(e){console.error("Failed to fetch user profile data:",e)}}async function b(){try{const e=await K(m,l.currentVersion);V.value=e}catch(e){console.error("Failed to fetch profile data:",e)}}function S(e){var o=[];for(const t of d.versions)e.includes(t.id)&&o.push(t);return o}const u=$({filter:null});d||F.push({name:"ErrorPage",params:{catchAll:"404"}});function L(){if(u.filter)return V.value.filter(e=>e.username.toLowerCase().includes(u.filter.toLowerCase())||e.extid.toString().toLowerCase().includes(u.filter.toLowerCase()))}return(e,o)=>(r(),_(q,null,{default:i(()=>[a(U,null,{default:i(()=>[a(Y,{game:c(d),version:l.currentVersion},{default:i(()=>[c(d).versions&&n.value?(r(),v("div",Q,[s("div",T,[o[2]||(o[2]=s("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),a(C,{modelValue:l.currentVersion,"onUpdate:modelValue":o[0]||(o[0]=t=>l.currentVersion=t),options:S(n.value.versions)},null,8,["modelValue","options"])])])):p("",!0),n.value?(r(),v("div",W,[a(z,{game:c(m),version:l.currentVersion,profile:n.value,"use-small":""},null,8,["game","version","profile"])])):p("",!0)]),_:1},8,["game","version"]),a(k,{icon:c(E),title:"Add a Rival",main:""},null,8,["icon"]),l.currentVersion?(r(),_(h,{key:0,class:"mb-6"},{default:i(()=>[a(H,{label:"Search",help:"Search by username or Rival ID to add a rival.",class:"w-full md:w-1/3"},{default:i(()=>[a(C,{modelValue:u.filter,"onUpdate:modelValue":o[1]||(o[1]=t=>u.filter=t),"model-value":u.filter,placeholder:"1234-5678"},null,8,["modelValue","model-value"])]),_:1}),s("div",X,[(r(!0),v(A,null,P(L(),t=>{var f;return r(),v("div",{key:t.id,class:"bg-slate-800 p-4 rounded-xl"},[s("div",Z,[s("div",null,[s("h1",ee,g(t.username),1),s("h2",se,g(c(O)(t.extid)),1)]),s("div",te,[a(R,{label:"Add Rival",color:"success",disabled:t.userId==((f=n.value)==null?void 0:f.userId),tooltip:"penis"},null,8,["disabled"])])])])}),128))])]),_:1})):p("",!0),a(k,{icon:c(M),title:"Rivals",main:""},null,8,["icon"]),l.currentVersion?(r(),_(h,{key:1,class:"mb-6"},{default:i(()=>{var t,f;return[s("div",le,[(r(!0),v(A,null,P((t=n.value)==null?void 0:t.rivals,x=>(r(),_(h,{key:x.id},{default:i(()=>[s("div",oe,[s("div",re,[s("div",ae,[s("h1",ne,g(x.name),1),s("h2",ie,g(x.rivalID),1)])]),a(R,{label:"Remove Rival",color:"danger"})])]),_:2},1024))),128)),(f=n.value)!=null&&f.rivals?p("",!0):(r(),_(h,{key:0},{default:i(()=>o[3]||(o[3]=[s("h1",{class:"text-2xl"},"You have no rivals!",-1)])),_:1}))])]}),_:1})):p("",!0)]),_:1})]),_:1}))}};export{ge as default};
