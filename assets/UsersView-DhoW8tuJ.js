import{a as b,r as v,o as g,s as k,c as U,e as d,w as o,f as a,_ as $,j as c,k as e,l as _,F as C,m as y,t as i,n as D,P as L,i as A,aK as B,q as V}from"./index-Y79vkHsf.js";import{_ as F}from"./GeneralTable-B25ZjUz3.js";import{_ as S}from"./FormField-Dg_gxznO.js";import{_ as I}from"./FormControl-jpMBu3sT.js";import{i as j}from"./admin-DRGmn_LJ.js";const M={class:"grid gap-4"},N={class:"md:flex w-full place-content-between"},O={class:"text-lg md:text-xl"},P={class:"text-md md:text-lg"},R={class:"text-md"},q={class:"bg-slate-900 p-2 rounded-md mt-2 w-14 max-w-16 text-center"},E={class:"text-lg font-mono text-pink-700"},K={class:"flex align-middle mt-2 md:mt-0 max-h-16"},T={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},z={class:"w-full"},Z={__name:"UsersView",setup(G){const h=b(),r=v([]),x=[{text:"User ID",value:"id",width:50,sortable:!0},{text:"Username",value:"username",width:150,sortable:!0},{text:"Admin",value:"admin",width:120,sortable:!0},{text:"Banned",value:"banned",width:120,sortable:!0},{text:"Discord Linked",value:"data.discord.linked",width:120,sortable:!0},{text:"Tachi Linked",value:"data.tachi.linked",width:120,sortable:!0}];g(async()=>{p()});async function p(){try{const t=await j();var l=[];for(var s of t)s.username||(s.username="Unclaimed Account"),l.push(s);r.value=l}catch(t){console.error("Failed to fetch user data:",t)}}const u=l=>{const s=l.id;h.push(`/profiles/${s}`)},n=k({filter:null});function w(){return n.filter?r.value.filter(l=>l.id.toString().toLowerCase().includes(n.filter.toLowerCase())||l.username.toLowerCase().includes(n.filter.toLowerCase())).slice(0,25):[]}return(l,s)=>(d(),U(V,null,{default:o(()=>[a($,null,{default:o(()=>[a(c,{class:"mb-6 p-1"},{default:o(()=>s[1]||(s[1]=[e("h1",{class:"text-3xl"},"User Management",-1),e("p",{class:"text-sm text-gray-400"},"Click a row to open User",-1)])),_:1}),a(c,{class:"mb-6"},{default:o(()=>[a(S,{label:"Search",help:"Search by ID or username.",class:"w-full md:w-1/3"},{default:o(()=>[a(I,{modelValue:n.filter,"onUpdate:modelValue":s[0]||(s[0]=t=>n.filter=t),"model-value":n.filter},null,8,["modelValue","model-value"])]),_:1}),e("div",M,[(d(!0),_(C,null,y(w(),t=>{var m,f;return d(),_("div",{key:t.id,class:"bg-slate-800 p-4 rounded-xl"},[e("div",N,[e("div",null,[e("h1",O,i(t.username),1),e("h2",P," User "+i(t.banned?"is":"isn't")+" banned. ",1),e("h2",R," Discord "+i((f=(m=t.data)==null?void 0:m.discord)!=null&&f.linked?"is":"isn't")+" linked. ",1),e("div",q,[e("h2",E,i(t.id),1)])]),e("div",K,[a(D,{label:"Open User",color:"info",onClick:H=>u(t)},null,8,["onClick"])])])])}),128))])]),_:1}),a(L,{icon:A(B),title:"All Users",color:"text-blue-400",main:""},null,8,["icon"]),a(c,{"has-table":"",class:"mb-6"},{default:o(()=>[e("div",T,[e("div",z,[a(F,{headers:x,items:r.value,onRowClicked:u},null,8,["items"])])])]),_:1})]),_:1})]),_:1}))}};export{Z as default};
