import{l as k,m as w,a8 as S,r as I,s as D,o as N,Y as V,c as p,a,w as u,e as v,g as o,_ as R,b as f,d,f as B,a2 as F,p as l,F as g,h,n as G,t as m,q as T,D as A,k as C}from"./index-B8PF5fsn.js";import{_ as E}from"./FormControl-BtNKEqsc.js";import{_ as L}from"./GameHeader-BFbHBmgM.js";import{A as P}from"./music-qXM57SCO.js";import"./PhGear.vue-CAIbbLcP.js";import"./PhHouse.vue-CmhfH9kZ.js";const U={key:0,class:"md:w-1/3 md:text-right"},j={class:"md:flex w-full md:place-content-between"},q={class:"mb-4 md:mb-0 space-y-1"},M={class:"text-lg md:text-xl"},W={class:"text-md md:text-lg"},Y={class:"grid md:flex gap-2 md:justify-end md:place-content-end"},z={key:0,class:"bg-gray-900 dark:bg-gray-700 p-4 rounded-lg"},H={class:"text-md md:text-lg"},te={__name:"NetworkRecords",setup(J){const y=k(),$=w();var _=y.params.game;const e=S(_);var c=I([]);const n=D({currentVersion:null});e||$.push({name:"ErrorPage",params:{catchAll:"404"}}),e.versions||(n.currentVersion=1),N(async()=>{try{const t=await P(_);c.value=t,e.versions&&!n.currentVersion&&(n.currentVersion=x.value.at(-1)?.id??null)}catch(t){console.error("Failed to fetch score data:",t)}});const x=V(()=>{if(!e.versions)return[];const t=new Set(c.value.map(s=>parseInt(s.version)));return e.versions.filter(s=>t.has(s.id))}),b=V(()=>n.currentVersion?c.value.filter(t=>parseInt(t.version)===n.currentVersion):c.value);return(t,s)=>(a(),p(C,null,{default:u(()=>[o(c)?(a(),p(R,{key:0},{default:u(()=>[f(L,{game:o(e)},null,8,["game"]),f(B,{icon:o(F),title:"Top Records",main:""},{default:u(()=>[o(e).versions?(a(),d("div",U,[s[1]||(s[1]=l("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),f(E,{modelValue:n.currentVersion,"onUpdate:modelValue":s[0]||(s[0]=i=>n.currentVersion=i),options:x.value.slice().reverse()},null,8,["modelValue","options"])])):v("",!0)]),_:1},8,["icon"]),(a(!0),d(g,null,h(b.value,i=>(a(),p(G,{key:i.id,class:"mb-6"},{default:u(()=>[l("div",j,[l("div",q,[l("h1",M,m(i.name),1),l("h2",W,m(i.artist),1),f(T,{label:"View Song",color:"info",to:`/games/${o(_)}/song/${i.id}`},null,8,["to"])]),l("div",Y,[(a(!0),d(g,null,h(i.charts,r=>(a(),d(g,{key:r.db_id},[r.data?.difficulty!=0&&o(e).chartTable[r.chart]?(a(),d("div",z,[l("h2",H,m(o(e).chartTable[r.chart])+" - "+m(r.data?.difficulty/(o(e).difficultyDenom??1)),1),A(" "+m(r.record?`${r.record?.username} - ${r.record.points?.toLocaleString()}`:"Unclaimed"),1)])):v("",!0)],64))),128))])])]),_:2},1024))),128))]),_:1})):v("",!0)]),_:1}))}};export{te as default};
