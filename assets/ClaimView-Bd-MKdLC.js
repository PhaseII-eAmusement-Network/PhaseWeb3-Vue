import{b as D,r as x,p as $,c as w,d as o,w as n,e,_ as V,j as _,f as m,M as T,F as A,N as f,g as i,b1 as B,h as v,v as F,i as a,H as P,b2 as M,l as h,B as N,C as R,t as p,aa as S,n as L}from"./index-DxCfvdTP.js";import{_ as O}from"./FormField-6QLSYEs8.js";import{_ as U}from"./FormControl-Duix1c6v.js";import{f as Y,g as j}from"./arcade-BrP5FuHJ.js";const q={key:1},E={class:"text-2xl font-bold"},G={class:"text-xl mb-6"},H={class:"text-xl mb-6"},K={class:"mt-4"},z={key:2},J={class:"text-xl mb-6"},Q={class:"mt-4"},W={key:3},Z={class:"mt-4"},ne={__name:"ClaimView",setup(ee){const g=D(),b=x(!1),t=x(null),d=$({PCBID:null}),c=x(null);async function I(){b.value=!0,t.value=await Y(d.PCBID),b.value=!1}async function X(){const C=await j(d.PCBID);C||window.alert("Failed to takeover!"),C.status==="success"?c.value=!0:c.value=!1,g.userLoaded=!1,g.loadUser()}return(C,s)=>(o(),w(L,null,{default:n(()=>[e(V,null,{default:n(()=>[e(T,{class:"mb-6","use-small":"","even-smaller":""}),t.value?m("",!0):(o(),_(A,{key:0},[e(f,{icon:i(B),title:"Claim an Arcade",main:""},null,8,["icon"]),e(v,{"is-form":"",class:"row-span-2 mb-6",onSubmit:s[1]||(s[1]=F(l=>I(),["prevent"]))},{footer:n(()=>[e(h,{type:"submit",color:"success",label:"Start Claim"}),b.value?(o(),w(N,{key:0,path:i(R),color:"text-yellow-500",class:"animate animate-spin"},null,8,["path"])):m("",!0)]),default:n(()=>[s[2]||(s[2]=a("h2",{class:"text-xl mb-6 lg:w-1/2"},[P(" Claim an arcade using a PCBID."),a("br"),P(" You cannot claim the arcade if it has an owner. ")],-1)),e(O,{label:"PCBID",help:"A PCBID from the arcade you're wanting to claim."},{default:n(()=>[e(U,{modelValue:d.PCBID,"onUpdate:modelValue":s[0]||(s[0]=l=>d.PCBID=l),icon:i(M),name:"cardId",type:"pcbid",placeholder:"XXXXXXXXXXXXXXXXX",minlength:20,maxlength:20,required:""},null,8,["modelValue","icon"])]),_:1})]),_:1})],64)),t.value&&c.value==null?(o(),_("div",q,[e(f,{icon:i(B),title:"Confirm Merge",main:""},null,8,["icon"]),e(v,null,{default:n(()=>{var l,r,u,k,y;return[a("h2",E,p((r=(l=t.value)==null?void 0:l.arcade)==null?void 0:r.name),1),a("h3",G,p((k=(u=t.value)==null?void 0:u.arcade)==null?void 0:k.description),1),a("h2",H," This arcade has "+p((y=t.value)==null?void 0:y.count)+" machine(s). ",1),a("div",K,[e(h,{color:"success",label:"Start Takeover",onClick:X})])]}),_:1})])):m("",!0),c.value==!0?(o(),_("div",z,[e(f,{icon:i(S),title:"Takeover Results",main:""},null,8,["icon"]),e(v,null,{default:n(()=>{var l,r,u;return[a("h2",J," ✅ Successfully merged "+p((l=t.value)==null?void 0:l.count)+" machines. Yippie! ",1),a("div",Q,[e(h,{color:"success",label:"Go to Arcade",href:`#/arcade/${(u=(r=t.value)==null?void 0:r.arcade)==null?void 0:u.id}`},null,8,["href"])])]}),_:1})])):m("",!0),c.value==!1?(o(),_("div",W,[e(f,{icon:i(S),title:"Merge Results",main:""},null,8,["icon"]),e(v,null,{default:n(()=>[s[3]||(s[3]=a("h2",{class:"text-xl mb-6"},"❌ Failed to merge. Please try again.",-1)),a("div",Z,[e(h,{color:"warning",label:"Retry",onClick:X})])]),_:1})])):m("",!0)]),_:1})]),_:1}))}};export{ne as default};
