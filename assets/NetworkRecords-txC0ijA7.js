import{a as k,b as w,a4 as S,r as N,n as R,o as B,U as x,c as p,d as r,w as u,f as v,g as l,_ as F,e as f,j as c,J as G,Z as I,i,F as g,k as V,h as D,t as m,l as T,y as U,m as j}from"./index-DrhAnfmx.js";import{_ as A}from"./FormControl-H_hSOdva.js";import{_ as C}from"./GameHeader-1-4MA9IX.js";import{b as E}from"./music-mUzHW_sN.js";import"./PhGear.vue-q7vz76Kz.js";import"./PhHouse.vue-CpIDFyGM.js";const L={key:0,class:"md:w-1/3 md:text-right"},P={class:"md:flex w-full md:place-content-between"},J={class:"mb-4 md:mb-0 space-y-1"},M={class:"text-lg md:text-xl"},W={class:"text-md md:text-lg"},Z={class:"grid md:flex gap-2 md:justify-end md:place-content-end"},q={key:0,class:"bg-gray-900 dark:bg-gray-700 p-4 rounded-lg"},z={class:"text-md md:text-lg"},te={__name:"NetworkRecords",setup(H){const y=k(),$=w();var _=y.params.game;const e=S(_);var d=N([]);const a=R({currentVersion:null});e||$.push({name:"ErrorPage",params:{catchAll:"404"}}),e.versions||(a.currentVersion=1),B(async()=>{try{const t=await E(_);d.value=t,e.versions&&!a.currentVersion&&(a.currentVersion=h.value.at(-1)?.id??null)}catch(t){console.error("Failed to fetch score data:",t)}});const h=x(()=>{if(!e.versions)return[];const t=new Set(d.value.map(s=>s.version));return e.versions.filter(s=>t.has(s.id))}),b=x(()=>a.currentVersion?d.value.filter(t=>t.version===a.currentVersion):d.value);return(t,s)=>(r(),p(j,null,{default:u(()=>[l(d)?(r(),p(F,{key:0},{default:u(()=>[f(C,{game:l(e)},null,8,["game"]),f(G,{icon:l(I),title:"Top Records",main:""},{default:u(()=>[l(e).versions?(r(),c("div",L,[s[1]||(s[1]=i("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),f(A,{modelValue:a.currentVersion,"onUpdate:modelValue":s[0]||(s[0]=o=>a.currentVersion=o),options:h.value.slice().reverse()},null,8,["modelValue","options"])])):v("",!0)]),_:1},8,["icon"]),(r(!0),c(g,null,V(b.value,o=>(r(),p(D,{key:o.id,class:"mb-6"},{default:u(()=>[i("div",P,[i("div",J,[i("h1",M,m(o.name),1),i("h2",W,m(o.artist),1),f(T,{label:"View Song",color:"info",href:`/#/games/${l(_)}/song/${o.id}`},null,8,["href"])]),i("div",Z,[(r(!0),c(g,null,V(o.charts,n=>(r(),c(g,{key:n.db_id},[n.data?.difficulty!=0?(r(),c("div",q,[i("h2",z,m(l(e).chartTable[n.chart])+" - "+m(n.data?.difficulty),1),U(" "+m(n.record?`${n.record?.username} - ${n.record.points?.toLocaleString()}`:"Unclaimed"),1)])):v("",!0)],64))),128))])])]),_:2},1024))),128))]),_:1})):v("",!0)]),_:1}))}};export{te as default};
