import{u as F,a as R,a6 as B,r as I,s as D,o as G,bd as $,c as p,e as s,w as u,g as v,i as l,_ as L,f,l as c,P,bJ as T,k as i,F as g,m as k,j,t as m,n as A,J as C,q as E}from"./index-BLNUJ2NM.js";import{_ as J}from"./FormControl-C432udtk.js";import{_ as U}from"./GameHeader-BIZyaPtb.js";import{b as q}from"./music-c933cll6.js";import"./sources-CaFLxZU6.js";const M={key:0,class:"md:w-1/3 md:text-right"},W={class:"md:flex w-full md:place-content-between"},z={class:"mb-4 md:mb-0 space-y-1"},H={class:"text-lg md:text-xl"},K={class:"text-md md:text-lg"},O={class:"grid md:flex gap-2 md:justify-end md:place-content-end"},Q={key:0,class:"bg-gray-900 dark:bg-gray-700 p-4 rounded-lg"},X={class:"text-md md:text-lg"},ae={__name:"NetworkRecords",setup(Y){const w=F(),S=R();var _=w.params.game;const t=B(_);var d=I([]);const r=D({currentVersion:null});t||S.push({name:"ErrorPage",params:{catchAll:"404"}}),t.versions||(r.currentVersion=1),G(async()=>{var a;try{const e=await q(_);d.value=e,t.versions&&!r.currentVersion&&(r.currentVersion=((a=x.value.at(-1))==null?void 0:a.id)??null)}catch(e){console.error("Failed to fetch score data:",e)}});const x=$(()=>{if(!t.versions)return[];const a=new Set(d.value.map(e=>e.version));return t.versions.filter(e=>a.has(e.id))}),N=$(()=>r.currentVersion?d.value.filter(a=>a.version===r.currentVersion):d.value);return(a,e)=>(s(),p(E,null,{default:u(()=>[l(d)?(s(),p(L,{key:0},{default:u(()=>[f(U,{game:l(t)},null,8,["game"]),f(P,{icon:l(T),title:"Top Records",main:""},{default:u(()=>[l(t).versions?(s(),c("div",M,[e[1]||(e[1]=i("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),f(J,{modelValue:r.currentVersion,"onUpdate:modelValue":e[0]||(e[0]=o=>r.currentVersion=o),options:x.value.slice().reverse()},null,8,["modelValue","options"])])):v("",!0)]),_:1},8,["icon"]),(s(!0),c(g,null,k(N.value,o=>(s(),p(j,{key:o.id,class:"mb-6"},{default:u(()=>[i("div",W,[i("div",z,[i("h1",H,m(o.name),1),i("h2",K,m(o.artist),1),f(A,{label:"View Song",color:"info",href:`/#/games/${l(_)}/song/${o.id}`},null,8,["href"])]),i("div",O,[(s(!0),c(g,null,k(o.charts,n=>{var V,h,b,y;return s(),c(g,{key:n.db_id},[((V=n.data)==null?void 0:V.difficulty)!=0?(s(),c("div",Q,[i("h2",X,m(l(t).chartTable[n.chart])+" - "+m((h=n.data)==null?void 0:h.difficulty),1),C(" "+m(n.record?`${(b=n.record)==null?void 0:b.username} - ${(y=n.record.points)==null?void 0:y.toLocaleString()}`:"Unclaimed"),1)])):v("",!0)],64)}),128))])])]),_:2},1024))),128))]),_:1})):v("",!0)]),_:1}))}};export{ae as default};
