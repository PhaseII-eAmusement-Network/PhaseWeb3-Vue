import{a as S,b as D,a7 as L,r as w,p as b,M as B,o as G,c as f,d as r,w as i,e as a,_ as E,f as _,g as c,j as v,i as t,P as y,bD as N,h as p,F as k,k as P,t as h,l as $,bE as j,n as M}from"./index-CnOij2ox.js";import{_ as U}from"./GameHeader-CBuPJHyD.js";import{_ as Y}from"./ProfileCard-LUcwS1ks.js";import{_ as R}from"./FormControl-uZTX6QPL.js";import{_ as q}from"./FormField-x_tBdBII.js";import{A as z,a as H}from"./profile-LMwz6EtV.js";import{d as J}from"./userData-DZYdegtD.js";import"./sources-CICTvAn6.js";const K={key:0,class:"w-full md:flex md:-mt-[75px] mb-4 place-content-end"},O={class:"md:w-1/3 md:text-right"},Q={key:1,class:"w-full"},T={class:"grid gap-4"},W={class:"flex w-full place-content-between"},X={class:"text-lg md:text-xl"},Z={class:"text-md md:text-lg font-mono"},ee={class:"flex align-middle"},se={class:"grid gap-3"},te={class:"flex justify-between items-center"},le={class:"flex"},oe={class:"grid"},re={class:"text-lg"},ae={class:"text-md font-mono"},pe={__name:"RivalsView",setup(ne){const A=S(),C=D();var m=null,d=null;m=A.params.game,d=L(m);const n=w(null),g=w([]),l=b({currentVersion:null});B(()=>l.currentVersion,()=>{x(),V()}),G(async()=>{V(),x()}),d.versions||(l.currentVersion=1);async function x(){try{n.value=null;const e=await z(m,l.currentVersion);n.value=e,e&&!l.currentVersion&&(l.currentVersion=e.versions[e.versions.length-1])}catch(e){console.error("Failed to fetch user profile data:",e)}}async function V(){try{const e=await H(m,l.currentVersion);g.value=e}catch(e){console.error("Failed to fetch profile data:",e)}}function I(e){var o=[];for(const s of d.versions)e.includes(s.id)&&o.push(s);return o}const u=b({filter:null});d||C.push({name:"ErrorPage",params:{catchAll:"404"}});function F(){if(u.filter)return g.value.filter(e=>e.username.toLowerCase().includes(u.filter.toLowerCase())||e.extid.toString().toLowerCase().includes(u.filter.toLowerCase()))}return(e,o)=>(r(),f(M,null,{default:i(()=>[a(E,null,{default:i(()=>[a(U,{game:c(d),version:l.currentVersion},{default:i(()=>[c(d).versions&&n.value?(r(),v("div",K,[t("div",O,[o[2]||(o[2]=t("h2",{class:"text-md sm:text-lg md:text-xl font-bold p-2"}," Select Version ",-1)),a(R,{modelValue:l.currentVersion,"onUpdate:modelValue":o[0]||(o[0]=s=>l.currentVersion=s),options:I(n.value.versions)},null,8,["modelValue","options"])])])):_("",!0),n.value?(r(),v("div",Q,[a(Y,{game:c(m),version:l.currentVersion,profile:n.value,"use-small":""},null,8,["game","version","profile"])])):_("",!0)]),_:1},8,["game","version"]),a(y,{icon:c(N),title:"Add a Rival",main:""},null,8,["icon"]),l.currentVersion?(r(),f(p,{key:0,class:"mb-6"},{default:i(()=>[a(q,{label:"Search",help:"Search by username or Rival ID to add a rival.",class:"w-full md:w-1/3"},{default:i(()=>[a(R,{modelValue:u.filter,"onUpdate:modelValue":o[1]||(o[1]=s=>u.filter=s),"model-value":u.filter,placeholder:"1234-5678"},null,8,["modelValue","model-value"])]),_:1}),t("div",T,[(r(!0),v(k,null,P(F(),s=>(r(),v("div",{key:s.id,class:"bg-slate-800 p-4 rounded-xl"},[t("div",W,[t("div",null,[t("h1",X,h(s.username),1),t("h2",Z,h(c(J)(s.extid)),1)]),t("div",ee,[a($,{label:"Add Rival",color:"success",disabled:s.userId==n.value?.userId,tooltip:"penis"},null,8,["disabled"])])])]))),128))])]),_:1})):_("",!0),a(y,{icon:c(j),title:"Rivals",main:""},null,8,["icon"]),l.currentVersion?(r(),f(p,{key:1,class:"mb-6"},{default:i(()=>[t("div",se,[(r(!0),v(k,null,P(n.value?.rivals,s=>(r(),f(p,{key:s.id},{default:i(()=>[t("div",te,[t("div",le,[t("div",oe,[t("h1",re,h(s.name),1),t("h2",ae,h(s.rivalID),1)])]),a($,{label:"Remove Rival",color:"danger"})])]),_:2},1024))),128)),n.value?.rivals?_("",!0):(r(),f(p,{key:0},{default:i(()=>o[3]||(o[3]=[t("h1",{class:"text-2xl"},"You have no rivals!",-1)])),_:1,__:[3]}))])]),_:1})):_("",!0)]),_:1})]),_:1}))}};export{pe as default};
