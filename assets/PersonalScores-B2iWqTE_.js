import{l as h,m as v,u as b,a8 as I,r as f,o as P,c as S,a as d,w as n,b as r,_ as k,d as y,e as w,F as G,p as N,g as e,q as _,G as x,a2 as A,f as B,aq as F,n as R,k as C}from"./index-jHbWkO02.js";import{_ as V}from"./GeneralTable-D-FKNE3P.js";import{_ as q}from"./GameHeader-bIyl3tCO.js";import{A as D}from"./profile-CoytY5Qo.js";import{f as E,p as H}from"./scores-CCsWi536.js";import"./contentExport-BHEc0v0f.js";import"./PhGear.vue-DYLiDm8m.js";import"./PhHouse.vue-DlintoIq.js";import"./scoreDataFilters-BXPRPpKA.js";const M={class:"flex gap-2 mb-6"},X={__name:"PersonalScores",setup(T){const c=h(),i=v(),p=b();var t=null,a=null,l=null;t=c.params.game,l=c.params.userId,a=I(t),a||i.push({name:"ErrorPage",params:{catchAll:"404"}});const s=f(null),m=f([]);P(async()=>{try{const o=await p.getAttemptData(t,l);m.value=E(a,o)}catch(o){console.error("Failed to fetch score data:",o)}$()});async function $(){try{s.value=null;const o=await D(t,null,l);s.value=o}catch(o){console.error("Failed to fetch user profile data:",o)}}const g=o=>{const u=o.song.id;i.push(`/games/${t}/song/${u}`)};return(o,u)=>(d(),S(C,null,{default:n(()=>[r(k,null,{default:n(()=>[s.value?(d(),y(G,{key:0},[r(q,{game:e(a),profile:s.value},null,8,["game","profile"]),N("div",M,[r(_,{icon:e(x),to:`/games/${e(a).id}/profiles/${s.value.userId}`,outline:!1,color:"info",label:`${s.value.username}'s Profile`},null,8,["icon","to","label"]),r(_,{icon:e(A),to:`/games/${e(a).id}/records/${s.value.userId}`,outline:!1,color:"info",label:`${s.value.username}'s Records`},null,8,["icon","to","label"])]),r(B,{icon:e(F),title:`${s.value.username}'s ${e(a).shortName?e(a).shortName:e(a).name} Scores`,main:""},null,8,["icon","title"]),r(R,{"has-table":""},{default:n(()=>[r(V,{headers:e(H)(e(a)),items:m.value,onRowClicked:g},null,8,["headers","items"])]),_:1})],64)):w("",!0)]),_:1})]),_:1}))}};export{X as default};
