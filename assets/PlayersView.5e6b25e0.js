import{u as b,a as k,a3 as I,r as A,o as R,c,e as u,w as f,f as n,j as o,g as s,i as h,aE as B,n as g,aF as D,aB as C,W as N,aG as S,_ as G,p as L,q as V}from"./index.8375db53.js";import{_ as j}from"./GameTitleLine.2dd8af90.js";import{_ as F}from"./GeneralTable.2529ef12.js";import{a as M}from"./profile.ef14a6d4.js";import{a as E}from"./sources.0e8cabdf.js";import{d as H}from"./userData.bcc92478.js";import{g as y}from"./danClass.233b0381.js";const T={class:"bg-white dark:bg-slate-900/90 rounded-2xl pt-6 p-3 card-content"},q={class:"w-full"},z={class:"md:flex md:px-5 md:space-x-10 md:justify-between md:items-center"},O={class:"md:w-1/2 grid grid-cols-1 md:grid-cols-2 gap-3"},W={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},X={class:"w-full"},ea={__name:"PlayersView",setup(J){const v=b(),_=k();var l=null,t=null;l=v.params.id,t=I(l),t==null&&_.push({name:"ErrorPage",params:{catchAll:"404"}});const m=A([]);R(async()=>{try{const e=await M(l);m.value=x(e)}catch(e){console.error("Failed to fetch profile data:",e)}});const i=[];if(i.push({text:"Player",value:"username",sortable:!0,width:120}),t.noRivals||i.push({text:"Rival ID",value:"extid",width:100}),i.push({text:"Last Play",value:"stats.last_play_timestamp",width:150},{text:"Last Arcade",value:"stats.last_play_arcade",width:150},{text:"Plays",value:"stats.total_plays",sortable:!0,width:50}),t.playerHeaders)for(var w of t.playerHeaders)i.push(w);function x(e){var r=[];for(var a of e){if(a.extid&&(a.extid=H(a.extid)),a.stats){if(a.stats.last_play_timestamp){const d=new Date(a.stats.last_play_timestamp*1e3);a.stats.last_play_timestamp=d.toLocaleString()}a.sgrade&&(a.sgrade=y(a.sgrade).short),a.dgrade&&(a.dgrade=y(a.dgrade).short)}r.push(a)}return r.sort((d,p)=>{const $=d.stats&&d.stats.total_plays||0;return(p.stats&&p.stats.total_plays||0)-$}),r}const P=e=>{const r=e.userId;_.push(`/games/${l}/profiles/${r}`)};return(e,r)=>(c(),u(V,null,{default:f(()=>[n(L,null,{default:f(()=>[o("div",{style:C(s(E)(s(t))),class:"rounded-2xl mb-6 card-container"},[o("div",T,[o("div",q,[o("div",z,[n(j,{path:s(t).icon,title:s(t).name},null,8,["path","title"])])]),o("div",O,[s(t).noScores?g("",!0):(c(),u(h,{key:0,href:`/#/games/${s(l)}/scores`,icon:s(B),outline:!1,color:"info",label:"Network Scores"},null,8,["href","icon"])),s(t).noRecords?g("",!0):(c(),u(h,{key:1,href:`/#/games/${s(l)}/records`,icon:s(D),outline:!1,color:"info",label:"Network Records"},null,8,["href","icon"]))])])],4),n(N,{icon:s(S),title:"All Players",main:""},null,8,["icon"]),n(G,{"has-table":""},{default:f(()=>[o("div",W,[o("div",X,[n(F,{headers:i,items:m.value,path:`/#/${s(l)}/profiles/`,onRowClicked:P},null,8,["items","path"])])])]),_:1})]),_:1})]),_:1}))}};export{ea as default};
