import{r as b,o as B,c as d,e as F,w as c,f as i,V as N,g as l,k as u,W as w,aa as P,_ as y,j as a,U as S,t as m,i as T,F as U,n as D,ab as G,p as L,q as Y,a3 as j}from"./index.06305a39.js";import{_ as A}from"./GeneralTable.4b972e09.js";import{l as I}from"./account.39f55e0a.js";const O={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},R={controls:"",class:"mt-3 rounded-xl w-[640px] xl:w-[1280px]"},W=["src"],q={class:"text-center md:text-left grid grid-cols-1 place-content-start gap-6"},E={class:"space-y-1"},M={class:"text-xl xl:text-2xl font-light"},z={key:1},H={class:"space-y-1 text-center"},J={class:"text-xl xl:text-xl"},K={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},Q={class:"w-full"},st={__name:"VideoView",setup(X){var o=b([]);const V=b(!1),k=[{text:"Timestamp",value:"timestamp",sortable:!0,width:120},{text:"Game",value:"game",sortable:!0,width:120},{text:"Version",value:"version",sortable:!0,width:120},{text:"Status",value:"data.status",sortable:!0,width:120}];async function $(){o.value=null;try{const s=await I();o.value=C(s)}catch(s){console.error("Failed to fetch video data:",s)}V.value=!1}B(async()=>{await $()});function C(s){var e;s.sort(function(t,n){return n.timestamp-t.timestamp});for(const t of s){const n=j(t.game);if(t.game=n.name,t.version=(e=n.versions.find(r=>r.id==t.version).label)!=null?e:0,t.timestamp){const r=new Date(t.timestamp*1e3);t.timestamp=r.toLocaleString()}}return s}const p=s=>{var e,t;(e=s.data)!=null&&e.url&&(s=(t=s.data)==null?void 0:t.url),navigator.clipboard.writeText(s).then(()=>{alert("Copied URL to clipboard!")}).catch(()=>{alert("Failed to copy to clipboard!")})};return(s,e)=>(d(),F(Y,null,{default:c(()=>[i(L,null,{default:c(()=>[i(N,{class:"mb-6","use-small":"","even-smaller":""}),l(o)[0]?(d(),u(U,{key:0},[i(w,{icon:l(P),title:"Your Latest Upload",main:""},null,8,["icon"]),i(y,{class:"mb-6"},{default:c(()=>{var t,n,r,_,f,x,v;return[((n=(t=l(o)[0])==null?void 0:t.data)==null?void 0:n.status)=="uploaded"?(d(),u("div",O,[a("video",R,[a("source",{src:(_=(r=l(o)[0])==null?void 0:r.data)==null?void 0:_.url,type:"video/mp4"},null,8,W),e[1]||(e[1]=S(" Your browser does not support the video tag. "))]),a("div",q,[a("div",E,[a("h2",M,m((f=l(o)[0])==null?void 0:f.game)+" "+m((x=l(o)[0])==null?void 0:x.version),1)]),a("div",null,[a("p",null,m((v=l(o)[0])==null?void 0:v.timestamp),1)]),a("div",null,[i(T,{color:"info",label:"Share",onClick:e[0]||(e[0]=Z=>{var g,h;return p((h=(g=l(o)[0])==null?void 0:g.data)==null?void 0:h.url)})})])])])):(d(),u("div",z,[a("div",H,[e[2]||(e[2]=a("h1",{class:"text-2xl xl:text-4xl font-bold"}," Your video is still uploading! ",-1)),e[3]||(e[3]=a("h2",{class:"text-xl xl:text-2xl font-light"}," Please wait for the upload to complete. ",-1)),a("h2",J," Upload started at "+m(l(o)[0].timestamp),1)])]))]}),_:1})],64)):D("",!0),i(w,{icon:l(G),title:"All Play Videos",main:""},null,8,["icon"]),i(y,{"has-table":""},{default:c(()=>[a("div",K,[a("div",Q,[i(A,{headers:k,items:l(o),onRowClicked:p},null,8,["items"])])])]),_:1})]),_:1})]),_:1}))}};export{st as default};
