import{r as h,s as v,o as b,c as M,e as V,w as i,f as e,$ as m,g as d,aI as g,_ as c,j as l,aJ as x,i as $,p as y,q as P,as as k}from"./index.876daf35.js";import{_ as T}from"./GeneralTable.c787a642.js";import{_ as u}from"./FormField.a39cf0a1.js";import{_ as C}from"./FormControl.e4cfa07a.js";import{d as D,e as A}from"./admin.7331481d.js";const W={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},B={class:"w-full"},N={__name:"MaintView",setup(E){const o=h([]),f=[{text:"Start Timestamp",value:"timestamp",width:120},{text:"End Timestamp",value:"data.endTimestamp",width:120},{text:"Reason",value:"data.reason",width:120}],_={endTimestamp:Date.now()},n=v({..._});b(async()=>{r()});async function r(){try{const a=await D();o.value=a}catch(a){console.error("Failed to fetch maint data:",a)}}async function p(){try{const a=await A(n);o.value=a}catch(a){console.error("Failed to post maint:",a)}r()}return(a,t)=>{const w=k("VueDatePicker");return M(),V(P,null,{default:i(()=>[e(y,null,{default:i(()=>[e(m,{icon:d(g),title:"Recent Maintenance Periods",color:"text-blue-400",main:""},null,8,["icon"]),e(c,{"has-table":"",class:"mb-6"},{default:i(()=>[l("div",W,[l("div",B,[e(T,{headers:f,items:o.value},null,8,["items"])])])]),_:1}),e(m,{icon:d(x),title:"Create Maintenance Period",color:"text-yellow-600",main:""},null,8,["icon"]),e(c,{"is-form":"",class:"row-span-1",onSubmit:t[3]||(t[3]=s=>p())},{default:i(()=>[e(u,{label:"Reason",help:"Why are we going under maintenance?"},{default:i(()=>[e(C,{modelValue:n.reason,"onUpdate:modelValue":t[0]||(t[0]=s=>n.reason=s),required:""},null,8,["modelValue"])]),_:1}),e(u,{label:"Period End",help:"When the network will release the maintenance window."},{default:i(()=>[e(w,{modelValue:n.endTimestamp,"onUpdate:modelValue":[t[1]||(t[1]=s=>n.endTimestamp=s),t[2]||(t[2]=s=>n.endTimestamp=new Date(s).getTime())],dark:""},null,8,["modelValue"])]),_:1}),l("div",null,[e($,{type:"submit",color:"warning",label:"Enter Maintenance",small:!1})])]),_:1})]),_:1})]),_:1})}}};export{N as default};
