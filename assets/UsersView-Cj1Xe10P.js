import{b as D,r as f,o as I,n as y,c as V,d as m,w as r,e,_ as F,i as a,h as i,J as _,g as h,K as b,j as p,F as A,k as L,t as d,l as v,s as S,m as B}from"./index-D5js98pV.js";import{I as M}from"./PhMagnifyingGlass.vue-C6J01TCu.js";import{F as P}from"./PhUsersThree.vue-DlKmmcXj.js";import{_ as j}from"./GeneralTable-CgZ3N5Ab.js";import{_ as x}from"./FormField-Bh7gS7TO.js";import{_ as w}from"./FormControl-DfNoBpfO.js";import{m as N,n as O}from"./admin-DoTAzMzk.js";const R={class:"grid md:grid-cols-2 gap-6"},q={class:"grid gap-4"},E={class:"md:flex w-full place-content-between"},J={class:"text-lg md:text-xl"},K={class:"text-md md:text-lg"},T={class:"text-md"},z={class:"bg-slate-900 p-2 rounded-md mt-2 w-14 max-w-16 text-center"},G={class:"text-lg font-mono text-pink-700"},H={class:"flex align-middle mt-2 md:mt-0 max-h-16"},Q={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},W={class:"w-full"},oe={__name:"UsersView",setup(X){const g=D(),c=f([]),n=f(null),k=[{text:"User ID",value:"id",width:20,sortable:!0},{text:"Username",value:"username",width:150,sortable:!0},{text:"Public",value:"public",width:120,sortable:!0},{text:"Admin",value:"admin",width:120,sortable:!0},{text:"Banned",value:"banned",width:120,sortable:!0},{text:"Discord Linked",value:"data.discord.linked",width:120,sortable:!0},{text:"Tachi Linked",value:"data.tachi.linked",width:120,sortable:!0}];I(async()=>{U()});async function U(){try{const t=await N();var l=[];for(var s of t)s.username||(s.username="Unclaimed Account"),l.push(s);c.value=l}catch(t){console.error("Failed to fetch user data:",t)}}const u=l=>{const s=l.id;g.push(`/profiles/${s}`)},o=y({filter:null});function C(){return o.filter?c.value.filter(l=>l.id.toString().toLowerCase().includes(o.filter.toLowerCase())||l.username.toLowerCase().includes(o.filter.toLowerCase())).slice(0,25):[]}async function $(){const l=await O(n.value);if(l)u({id:l?.id});else{window.alert("Couldn't find user.");return}}return(l,s)=>(m(),V(B,null,{default:r(()=>[e(F,null,{default:r(()=>[e(i,{class:"mb-6 p-1"},{default:r(()=>s[2]||(s[2]=[a("h1",{class:"text-3xl"},"User Management",-1),a("p",{class:"text-sm text-gray-400"},"Click a row to open User",-1)])),_:1,__:[2]}),e(_,{icon:h(M),title:"Search",color:"text-amber-500",main:""},null,8,["icon"]),a("div",R,[e(i,{class:"mb-6"},{default:r(()=>[e(b,{color:"info",label:"Search",class:"mb-2"}),e(x,{label:"Search",help:"Search by ID or username.",class:"w-full"},{default:r(()=>[e(w,{modelValue:o.filter,"onUpdate:modelValue":s[0]||(s[0]=t=>o.filter=t),"model-value":o.filter},null,8,["modelValue","model-value"])]),_:1}),a("div",q,[(m(!0),p(A,null,L(C(),t=>(m(),p("div",{key:t.id,class:"bg-slate-800 p-4 rounded-xl"},[a("div",E,[a("div",null,[a("h1",J,d(t.username),1),a("h2",K," User "+d(t.banned?"is":"isn't")+" banned. ",1),a("h2",T," Discord "+d(t.data?.discord?.linked?"is":"isn't")+" linked. ",1),a("div",z,[a("h2",G,d(t.id),1)])]),a("div",H,[e(v,{label:"Open User",color:"info",onClick:Y=>u(t)},null,8,["onClick"])])])]))),128))])]),_:1}),e(i,{class:"mb-6","is-form":"",onSubmit:S($,["prevent"])},{default:r(()=>[e(b,{color:"warning",label:"From CardID",class:"mb-2"}),e(x,{label:"Card ID",help:"16 character ID for a user's card.",class:"w-full"},{default:r(()=>[e(w,{modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=t=>n.value=t),name:"Card ID",required:"","model-value":n.value,minlength:16,maxlength:16},null,8,["modelValue","model-value"])]),_:1}),e(v,{color:"success",type:"submit",label:"Open User"})]),_:1})]),e(_,{icon:h(P),title:"All Users",color:"text-blue-400",main:""},null,8,["icon"]),e(i,{"has-table":"",class:"mb-6"},{default:r(()=>[a("div",Q,[a("div",W,[e(j,{headers:k,items:c.value,"has-avatar":!0,onRowClicked:u},null,8,["items"])])])]),_:1})]),_:1})]),_:1}))}};export{oe as default};
