import{a as g,r as A,o as C,s as $,c as d,e as S,w as n,f as t,_ as i,j as s,$ as c,g as m,aN as k,aO as L,k as p,l as y,t as u,i as w,F as E,aP as O,x as V,p as B,q as D}from"./index.ed1d26ef.js";import{_ as P}from"./GeneralTable.2d3fbc22.js";import{_ as F}from"./FormField.242a267c.js";import{_ as I}from"./FormControl.aa8603c8.js";import{h as M}from"./admin.1501fa77.js";const N={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},j={class:"w-full"},R={class:"grid gap-4"},q={class:"md:flex w-full place-content-between"},U={class:"text-lg md:text-xl"},z={class:"text-md md:text-lg"},G={class:"text-md"},H={class:"flex align-middle mt-2 md:mt-0"},Y={__name:"ArcadesView",setup(J){const x=g(),r=A([]),h=[{text:"Name",value:"name",width:150,sortable:!0},{text:"Description",value:"description",width:150},{text:"Owners",value:"owners",width:150},{text:"PASELI Enabled",value:"data.paseli_enabled",width:50},{text:"Infinite PASELI",value:"data.paseli_infinite",width:50},{text:"Beta Enabled",value:"data.is_beta",width:50,sortable:!0}];C(async()=>{b()});async function b(){try{const a=await M();var l=[];for(var e of a){if(e.timestamp){const _=new Date(e.timestamp*1e3);e.timestamp=_.toLocaleString()}e.owners&&(e.owners=e.owners.join(", ")),l.push(e)}r.value=l}catch(a){console.error("Failed to fetch client data:",a)}}const f=l=>{const e=l.id;x.push(`/arcade/${e}`)},o=$({filter:null});function v(){if(o.filter)return r.value.filter(l=>l.name.toLowerCase().includes(o.filter.toLowerCase())||l.description.toLowerCase().includes(o.filter.toLowerCase())||l.owners.toLowerCase().includes(o.filter.toLowerCase()))}return(l,e)=>(d(),S(D,null,{default:n(()=>[t(B,null,{default:n(()=>[t(i,{class:"mb-6 p-1"},{default:n(()=>e[2]||(e[2]=[s("h1",{class:"text-3xl"},"Arcade Management",-1),s("p",{class:"text-sm text-gray-400"},"Enter an arcade to manage it",-1)])),_:1}),t(c,{icon:m(k),title:"All Arcades",color:"text-blue-400",main:""},null,8,["icon"]),t(i,{"has-table":"",class:"mb-6"},{default:n(()=>[s("div",N,[s("div",j,[t(P,{headers:h,items:r.value,onRowClicked:f},null,8,["items"]),e[3]||(e[3]=s("h1",{class:"mx-4 mt-1 mb-2 text-md lg:text-lg"}," Click row to open arcade ",-1))])])]),_:1}),t(c,{icon:m(L),title:"Search Arcades",color:"text-amber-600",main:""},null,8,["icon"]),t(i,{class:"mb-6"},{default:n(()=>[t(F,{label:"Search",help:"Search by name, description, or owner.",class:"w-full md:w-1/3"},{default:n(()=>[t(I,{modelValue:o.filter,"onUpdate:modelValue":e[0]||(e[0]=a=>o.filter=a),"model-value":o.filter},null,8,["modelValue","model-value"])]),_:1}),s("div",R,[(d(!0),p(E,null,y(v(),a=>(d(),p("div",{key:a.id,class:"bg-slate-800 p-4 rounded-xl"},[s("div",q,[s("div",null,[s("h1",U,u(a.name),1),s("h2",z,u(a.description),1),s("h2",G,"Managed by "+u(a.owners),1)]),s("div",H,[t(w,{label:"Open Arcade",color:"info",onClick:_=>f(a)},null,8,["onClick"])])])]))),128))])]),_:1}),t(c,{icon:m(O),title:"Create Arcade",color:"text-emerald-600",main:""},null,8,["icon"]),t(i,{"is-form":"",class:"row-span-1",onSubmit:e[1]||(e[1]=V(a=>l.createClient(),["prevent"]))},{default:n(()=>[t(w,{color:"info",small:!1,label:"Arcade Onboarding",to:"/admin/onboarding"})]),_:1})]),_:1})]),_:1}))}};export{Y as default};
