import{b as k,r as b,o as D,p as y,c as P,d as u,w as o,e as t,_ as B,i as s,h as i,P as f,g as _,aK as V,Q as h,j as x,F as E,k as F,t as d,l as p,v,aL as M,aM as O,n as j}from"./index-D0hKoGh3.js";import{_ as N}from"./GeneralTable-B0XfRRXB.js";import{_ as g}from"./FormField-CdaWEeMy.js";import{_ as C}from"./FormControl-dmBiWM7h.js";import{j as R,k as U}from"./admin-D9keMNBw.js";const q={class:"grid md:grid-cols-2 gap-6"},K={class:"grid gap-4"},Q={class:"md:flex w-full place-content-between"},z={class:"text-lg md:text-xl"},G={class:"text-md md:text-lg"},H={class:"text-md"},J={class:"bg-slate-900 p-2 rounded-md mt-2 w-12 max-w-14 text-center"},T={class:"text-lg font-mono text-pink-700"},W={class:"flex align-middle mt-2 md:mt-0 max-h-12"},X={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},Y={class:"w-full"},oe={__name:"ArcadesView",setup(Z){const A=k(),c=b([]),S=[{text:"Name",value:"name",width:150,sortable:!0},{text:"Description",value:"description",width:150},{text:"Owners",value:"owners",width:150,sortable:!0},{text:"PASELI Enabled",value:"data.paseli_enabled",width:50,sortable:!0},{text:"Infinite PASELI",value:"data.paseli_infinite",width:50,sortable:!0},{text:"Beta Enabled",value:"data.is_beta",width:50,sortable:!0}];D(async()=>{I()});async function I(){try{const l=await R();var a=[];for(var e of l){if(e.timestamp){const w=new Date(e.timestamp*1e3);e.timestamp=w.toLocaleString()}e.owners&&(e.owners=e.owners.join(", ")),a.push(e)}c.value=a}catch(l){console.error("Failed to fetch client data:",l)}}const m=a=>{const e=a.id;A.push(`/arcade/${e}`)},n=y({filter:null});function L(){if(n.filter)return c.value.filter(a=>a.id.toString().toLowerCase().includes(n.filter.toLowerCase())||a.name.toLowerCase().includes(n.filter.toLowerCase())||a.description.toLowerCase().includes(n.filter.toLowerCase())||a.owners.toLowerCase().includes(n.filter.toLowerCase()))}const r=b(null);async function $(){const a=await U(r.value);if(a)m({id:a==null?void 0:a.arcadeId});else{window.alert("Couldn't find machine.");return}}return(a,e)=>(u(),P(j,null,{default:o(()=>[t(B,null,{default:o(()=>[t(i,{class:"mb-6 p-1"},{default:o(()=>e[3]||(e[3]=[s("h1",{class:"text-3xl"},"Arcade Management",-1),s("p",{class:"text-sm text-gray-400"},"Enter an arcade to manage it",-1)])),_:1}),t(f,{icon:_(V),title:"Search Arcades",color:"text-amber-600",main:""},null,8,["icon"]),s("div",q,[t(i,{class:"mb-6"},{default:o(()=>[t(h,{color:"info",label:"Search",class:"mb-2"}),t(g,{label:"Search",help:"Search by ID, name, description, or owner.",class:"w-full"},{default:o(()=>[t(C,{modelValue:n.filter,"onUpdate:modelValue":e[0]||(e[0]=l=>n.filter=l),"model-value":n.filter},null,8,["modelValue","model-value"])]),_:1}),s("div",K,[(u(!0),x(E,null,F(L(),l=>(u(),x("div",{key:l.id,class:"bg-slate-800 p-4 rounded-xl"},[s("div",Q,[s("div",null,[s("h1",z,d(l.name),1),s("h2",G,d(l.description),1),s("h2",H,"Managed by "+d(l.owners),1),s("div",J,[s("h2",T,d(l.id),1)])]),s("div",W,[t(p,{label:"Open Arcade",color:"info",onClick:w=>m(l)},null,8,["onClick"])])])]))),128))])]),_:1}),t(i,{class:"mb-6","is-form":"",onSubmit:v($,["prevent"])},{default:o(()=>[t(h,{color:"warning",label:"From PCBID",class:"mb-2"}),t(g,{label:"PCBID",help:"20 character ID for a machine.",class:"w-full"},{default:o(()=>[t(C,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),name:"PCBID",required:"","model-value":r.value,minlength:20,maxlength:20},null,8,["modelValue","model-value"])]),_:1}),t(p,{color:"success",type:"submit",label:"Open Arcade"})]),_:1})]),t(f,{icon:_(M),title:"All Arcades",color:"text-blue-400",main:""},null,8,["icon"]),t(i,{"has-table":"",class:"mb-6"},{default:o(()=>[s("div",X,[s("div",Y,[t(N,{headers:S,items:c.value,onRowClicked:m},null,8,["items"]),e[4]||(e[4]=s("h1",{class:"mx-4 mt-1 mb-2 text-md lg:text-lg"}," Click row to open arcade ",-1))])])]),_:1}),t(f,{icon:_(O),title:"Create Arcade",color:"text-emerald-600",main:""},null,8,["icon"]),t(i,{"is-form":"",class:"row-span-1",onSubmit:e[2]||(e[2]=v(l=>a.createClient(),["prevent"]))},{default:o(()=>[t(p,{color:"info",small:!1,label:"Arcade Onboarding",to:"/admin/onboarding"})]),_:1})]),_:1})]),_:1}))}};export{oe as default};
