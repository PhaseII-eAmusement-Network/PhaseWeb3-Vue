import{b as C,r as f,o as $,p as D,c as y,d as m,w as r,e,_ as I,i as a,h as i,Q as _,j as h,F as V,k as A,t as d,l as b,v as F,P as L,g as B,aO as S,n as O}from"./index-CZV9MRmx.js";import{_ as P}from"./GeneralTable-duKeEe4G.js";import{_ as p}from"./FormField-BxzsYNTe.js";import{_ as v}from"./FormControl-h3k2K9va.js";import{m as M,n as j}from"./admin-B2O9OgX0.js";const N={class:"grid md:grid-cols-2 gap-6"},R={class:"grid gap-4"},q={class:"md:flex w-full place-content-between"},E={class:"text-lg md:text-xl"},Q={class:"text-md md:text-lg"},T={class:"text-md"},z={class:"bg-slate-900 p-2 rounded-md mt-2 w-14 max-w-16 text-center"},G={class:"text-lg font-mono text-pink-700"},H={class:"flex align-middle mt-2 md:mt-0 max-h-16"},J={class:"bg-white dark:bg-slate-900/95 rounded-2xl lg:flex lg:justify-between"},K={class:"w-full"},se={__name:"UsersView",setup(W){const x=C(),c=f([]),o=f(null),w=[{text:"User ID",value:"id",width:20,sortable:!0},{text:"Username",value:"username",width:150,sortable:!0},{text:"Public",value:"public",width:120,sortable:!0},{text:"Admin",value:"admin",width:120,sortable:!0},{text:"Banned",value:"banned",width:120,sortable:!0},{text:"Discord Linked",value:"data.discord.linked",width:120,sortable:!0},{text:"Tachi Linked",value:"data.tachi.linked",width:120,sortable:!0}];$(async()=>{g()});async function g(){try{const t=await M();var l=[];for(var s of t)s.username||(s.username="Unclaimed Account"),l.push(s);c.value=l}catch(t){console.error("Failed to fetch user data:",t)}}const u=l=>{const s=l.id;x.push(`/profiles/${s}`)},n=D({filter:null});function k(){return n.filter?c.value.filter(l=>l.id.toString().toLowerCase().includes(n.filter.toLowerCase())||l.username.toLowerCase().includes(n.filter.toLowerCase())).slice(0,25):[]}async function U(){const l=await j(o.value);if(l)u({id:l?.id});else{window.alert("Couldn't find user.");return}}return(l,s)=>(m(),y(O,null,{default:r(()=>[e(I,null,{default:r(()=>[e(i,{class:"mb-6 p-1"},{default:r(()=>s[2]||(s[2]=[a("h1",{class:"text-3xl"},"User Management",-1),a("p",{class:"text-sm text-gray-400"},"Click a row to open User",-1)])),_:1,__:[2]}),a("div",N,[e(i,{class:"mb-6"},{default:r(()=>[e(_,{color:"info",label:"Search",class:"mb-2"}),e(p,{label:"Search",help:"Search by ID or username.",class:"w-full"},{default:r(()=>[e(v,{modelValue:n.filter,"onUpdate:modelValue":s[0]||(s[0]=t=>n.filter=t),"model-value":n.filter},null,8,["modelValue","model-value"])]),_:1}),a("div",R,[(m(!0),h(V,null,A(k(),t=>(m(),h("div",{key:t.id,class:"bg-slate-800 p-4 rounded-xl"},[a("div",q,[a("div",null,[a("h1",E,d(t.username),1),a("h2",Q," User "+d(t.banned?"is":"isn't")+" banned. ",1),a("h2",T," Discord "+d(t.data?.discord?.linked?"is":"isn't")+" linked. ",1),a("div",z,[a("h2",G,d(t.id),1)])]),a("div",H,[e(b,{label:"Open User",color:"info",onClick:X=>u(t)},null,8,["onClick"])])])]))),128))])]),_:1}),e(i,{class:"mb-6","is-form":"",onSubmit:F(U,["prevent"])},{default:r(()=>[e(_,{color:"warning",label:"From CardID",class:"mb-2"}),e(p,{label:"Card ID",help:"16 character ID for a user's card.",class:"w-full"},{default:r(()=>[e(v,{modelValue:o.value,"onUpdate:modelValue":s[1]||(s[1]=t=>o.value=t),name:"Card ID",required:"","model-value":o.value,minlength:16,maxlength:16},null,8,["modelValue","model-value"])]),_:1}),e(b,{color:"success",type:"submit",label:"Open User"})]),_:1})]),e(L,{icon:B(S),title:"All Users",color:"text-blue-400",main:""},null,8,["icon"]),e(i,{"has-table":"",class:"mb-6"},{default:r(()=>[a("div",J,[a("div",K,[e(P,{headers:w,items:c.value,"has-avatar":!0,onRowClicked:u},null,8,["items"])])])]),_:1})]),_:1})]),_:1}))}};export{se as default};
