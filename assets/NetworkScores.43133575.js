import{u as L,a as z,b as J,a3 as K,r as O,o as Q,c as U,e as X,w as l,f as r,W as Y,g as s,aW as Z,j as aa,i as ea,_ as sa,p as ta,q as ra}from"./index.f464fe03.js";import{_ as da}from"./GeneralTable.93e66ca9.js";const na={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 2xl:grid-cols-5 gap-3 pb-6"},ua={__name:"NetworkScores",setup(la){const V=L(),W=z(),j=J();var d=null,e=null;d=V.params.game,e=K(d),e||W.push({name:"ErrorPage",params:{catchAll:"404"}});const o=O([]),c=[{text:"Player",value:"username",width:120},{text:"New PB",value:"newRecord",width:100},{text:"Timestamp",value:"timestamp",width:140},{text:"Song",value:"song.name",width:180},{text:"Artist",value:"song.artist",width:150},{text:"Chart",value:"song.chart",width:100},{text:"Grade",value:"data.rank",width:80},{text:"Score",value:"points",width:120}];if(e.scoreHeaders)for(var q of e.scoreHeaders)c.push(q);Q(async()=>{try{const t=await j.getAttemptData(d);o.value=E(t)}catch(t){console.error("Failed to fetch score data:",t)}});function E(t){var u,f,i,_,p,h,g,k,w,b,v,T,x,$,S,m,N,B,R,A,H,y,C,D,G,I,P,M;var n=[];for(var a of t){if(a.newRecord?a.newRecord="\u2705":a.newRecord="",a.timestamp){const F=new Date(a.timestamp*1e3);a.timestamp=F.toLocaleString()}a.points!=null&&(a.points=a.points.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),((f=(u=a.data)==null?void 0:u.stats)==null?void 0:f.score)!=null&&(a.exscore=a.points.toString(),a.points=(_=(i=a.data)==null?void 0:i.stats)==null?void 0:_.score.toString().replace(new RegExp("\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))","g"),",")),((p=a.song)==null?void 0:p.chart)!=null&&e.chartTable&&(a.song.chart=e.chartTable[(h=a.song)==null?void 0:h.chart]),((g=a.data)==null?void 0:g.halo)!=null&&e.haloTable&&(a.data.halo=e.haloTable[(k=a.data)==null?void 0:k.halo]),((w=a.data)==null?void 0:w.medal)!=null&&e.medalTable&&(a.data.medal=e.medalTable[(b=a.data)==null?void 0:b.medal]),((v=a.data)==null?void 0:v.clear_status)!=null&&e.medalTable&&(a.data.medal=e.medalTable[(T=a.data)==null?void 0:T.clear_status]),((x=a.data)==null?void 0:x.rank)!=null&&e.rankTable&&(a.data.rank=e.rankTable[($=a.data)==null?void 0:$.rank]),((S=a.data)==null?void 0:S.result_rank)!=null&&e.rankTable&&(a.data.rank=e.rankTable[(m=a.data)==null?void 0:m.result_rank]),((N=a.data)==null?void 0:N.grade)!=null&&e.rankTable&&(a.data.rank=e.rankTable[(B=a.data)==null?void 0:B.grade]),((R=a.data)==null?void 0:R.skill_perc)>0?a.data.skill_perc=`${((A=a.data)==null?void 0:A.skill_perc)/100}%`:a.data.skill_perc="0%",(H=a.data)!=null&&H.skill_points&&(a.data.skill_points=((y=a.data)==null?void 0:y.skill_points)/10),((C=a.data)==null?void 0:C.perc)>0?a.data.perc=`${((D=a.data)==null?void 0:D.perc)/100}%`:a.data.perc="0%",(G=a.data)!=null&&G.new_skill&&(a.data.new_skill=((I=a.data)==null?void 0:I.new_skill)/10),(P=a.data)!=null&&P.music_rate&&(a.data.music_rate=((M=a.data)==null?void 0:M.music_rate)/10),n.push(a)}return n}return(t,n)=>(U(),X(ra,null,{default:l(()=>[r(ta,null,{default:l(()=>[r(Y,{icon:s(Z),title:`All ${s(e).shortName?s(e).shortName:s(e).name} Scores`,main:""},null,8,["icon","title"]),aa("div",na,[r(ea,{icon:t.mdiHome,href:`/#/games/${s(d)}`,color:"info",label:`${s(e).shortName?s(e).shortName:s(e).name} Home`},null,8,["icon","href","label"])]),r(sa,{"has-table":""},{default:l(()=>[r(da,{headers:c,items:o.value},null,8,["items"])]),_:1})]),_:1})]),_:1}))}};export{ua as default};
