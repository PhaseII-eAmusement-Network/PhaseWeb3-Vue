import{r as _,s as $,o as k,c as g,e as r,w as i,f as s,_ as A,k as t,l as p,g as w,O as I,P as h,i as n,a1 as D,j as P,y as S,a2 as V,n as c,D as E,C as F,J as N,F as O,m as T,t as B,q as L,a3 as j,a4 as q,a5 as M}from"./index-Bc45stE5.js";import{d as v}from"./userData-DZYdegtD.js";import{_ as U}from"./FormField-yHTVSteI.js";import{_ as z}from"./FormControl-DHk9sN2D.js";const G={class:"grid md:grid-cols-2 mb-2"},H={key:0,class:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 3xl:grid-cols-6 4xl:grid-cols-7 gap-6"},J={class:"flex justify-between md:grid md:gap-2 mb-4 items-center"},W=["src"],Z={class:"text-xl text-center font-mono"},K={class:"grid grid-cols-3 md:grid-cols-2 gap-2"},se={__name:"CardsView",setup(Q){const b="https://cdn.phaseii.network/file/PhaseII/web-assets";var d=_([]);const u=_(!1),o=$({newCard:null});async function m(){d.value=null;try{const a=await j();d.value=a}catch(a){console.error("Failed to fetch card data:",a)}}k(async()=>{await m()});function y(a){var e=a.target.value;e=e.replace(/[^A-Za-z0-9]/g,""),e=e.toUpperCase().replace(/(.{4})/g,"$1-").replace(/-$/,""),o.newCard=e}async function x(){u.value=!0,(await q(o.newCard)).status=="success"&&(o.newCard=null,u.value=!1,await m())}async function X(a){(await M(v(a))).status=="success"&&await m()}const C=a=>{navigator.clipboard.writeText(a).then(()=>{alert("Copied to clipboard!")}).catch(()=>{alert("Failed to copy to clipboard!")})};return(a,e)=>(r(),g(L,null,{default:i(()=>[s(A,null,{default:i(()=>[s(I,{class:"mb-6","use-small":"","even-smaller":""}),s(h,{icon:n(D),title:"Add a Card",main:""},null,8,["icon"]),s(P,{"is-form":"",class:"row-span-2 mb-6",onSubmit:e[1]||(e[1]=S(l=>x(),["prevent"]))},{footer:i(()=>[s(c,{type:"submit",color:"success",label:"Add"}),u.value?(r(),g(E,{key:0,path:a.mdiLoading,color:"text-yellow-500",class:"animate animate-spin"},null,8,["path"])):w("",!0)]),default:i(()=>[s(U,{label:"Card ID",help:"The 16 character ACCESS CODE. If your card is dated after 2016, you'll need to get the ACCESS CODE from a game."},{default:i(()=>[s(z,{modelValue:o.newCard,"onUpdate:modelValue":e[0]||(e[0]=l=>o.newCard=l),icon:n(V),name:"cardId",type:"card",placeholder:"XXXX-XXXX-XXXX-XXXX",minlength:19,maxlength:19,required:"",onInput:y},null,8,["modelValue","icon"])]),_:1})]),_:1}),t("div",G,[s(h,{icon:n(F),title:"Login Cards",main:""},null,8,["icon"]),e[2]||(e[2]=t("div",{class:"text-xl md:text-right"},[t("h4",null,"AC = Web Access Code"),t("h4",null,[N("NFC-ID = Internal ID for "),t("samp",null,"card0.txt")])],-1))]),n(d)?(r(),p("div",H,[(r(!0),p(O,null,T(n(d),l=>(r(),p("div",{key:l.id,class:"grid dark:bg-slate-900/70 rounded-2xl p-5"},[t("div",J,[t("img",{src:`${n(b)}/passes/generic.webp`,class:"w-24 md:w-auto"},null,8,W),t("h1",Z,B(n(v)(l.encoded)),1)]),t("div",K,[s(c,{color:"info",label:"Copy AC",onClick:f=>C(l.encoded)},null,8,["onClick"]),s(c,{color:"info",label:"Copy NFC-ID",onClick:f=>C(l.id)},null,8,["onClick"]),s(c,{color:"danger",label:"Delete",onClick:f=>X(l.encoded)},null,8,["onClick"])])]))),128))])):w("",!0)]),_:1})]),_:1}))}};export{se as default};
